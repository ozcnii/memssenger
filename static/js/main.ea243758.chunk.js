(this["webpackJsonpreact-mess-main"]=this["webpackJsonpreact-mess-main"]||[]).push([[0],{22:function(e,t,a){e.exports={container:"LoginPage_container__1_7A_",title:"LoginPage_title__36gIY",form:"LoginPage_form__2tDt-",login:"LoginPage_login__ukfLg",password:"LoginPage_password__2VEXY",passwordConfirm:"LoginPage_passwordConfirm__ZV9we",submit:"LoginPage_submit__3pefJ",google:"LoginPage_google__3MWI1",facebook:"LoginPage_facebook__1ruEM",registr:"LoginPage_registr__q3Vfb",logIn:"LoginPage_logIn__23L1w",googleIcon:"LoginPage_googleIcon__2Yu9T",fbIcon:"LoginPage_fbIcon__2KwK4"}},23:function(e,t,a){e.exports={header:"SettingsContainer_header__1SpYu",top:"SettingsContainer_top__1PV1F",avatar:"SettingsContainer_avatar__3HayJ",info:"SettingsContainer_info__3d2FW",userName:"SettingsContainer_userName___kndz",edit:"SettingsContainer_edit__9j_1Y",icon:"SettingsContainer_icon__3RiIu",last:"SettingsContainer_last__7mO_O"}},31:function(e,t,a){e.exports={wrapper:"Messages_wrapper__1gvJC",formWrapper:"Messages_formWrapper__hpS5f",messages:"Messages_messages__1YLcP",form:"Messages_form__1qD7o",input:"Messages_input__2GqLB",send:"Messages_send__8YIaL",messagesWrapper:"Messages_messagesWrapper__1Hqdq",messageContainer:"Messages_messageContainer__3TvVx",message:"Messages_message__3weM9",messageDate:"Messages_messageDate__3BD3V",noMessages:"Messages_noMessages__2BWgq"}},33:function(e,t,a){e.exports={modal:"EditName_modal__2LJka",modalContent:"EditName_modalContent__3htUp",form:"EditName_form__37cQl",close:"EditName_close__pchS3",inputAvatar:"EditName_inputAvatar__3lZIC",labelAvatar:"EditName_labelAvatar__OMG1k"}},38:function(e,t,a){e.exports={messageContainer:"Dialog_messageContainer__2Ev8r",avatar:"Dialog_avatar__1_os3",info:"Dialog_info__1GD89",top:"Dialog_top__2uXh2",date:"Dialog_date__bxesN",userName:"Dialog_userName__1-CQ1"}},41:function(e,t,a){e.exports={container:"LastItem_container__2-nyf",avatar:"LastItem_avatar__2asVG",info:"LastItem_info__OLwhu",date:"LastItem_date__2exj-"}},42:function(e,t,a){e.exports={alert:"Alert_alert__1rkHi",show:"Alert_show__1Z3JK",wrapper:"Alert_wrapper__1KEZd",container:"Alert_container__3N0Do",close:"Alert_close__JOcz2"}},55:function(e,t,a){e.exports={menuButton:"Header_menuButton__359Sw",searchButton:"Header_searchButton__8uA4v"}},56:function(e,t,a){e.exports={container:"HeaderComponent_container__3IQED",wrapper:"HeaderComponent_wrapper__2MVFD","App-header":"HeaderComponent_App-header__3CfwK","App-link":"HeaderComponent_App-link__34TTV"}},57:function(e,t,a){e.exports={backButton:"Header_backButton__dAJoJ",userAvatar:"Header_userAvatar__rWy97",container:"Header_container__3k8dW"}},58:function(e,t,a){e.exports={backButton:"Header_backButton__26Q1B",container:"Header_container__enFS8",input:"Header_input__10jd2"}},59:function(e,t,a){e.exports={header:"Header_header__3FHhu",backButton:"Header_backButton__1WwS9",searchButton:"Header_searchButton__3FcrP"}},66:function(e,t,a){e.exports={container:"BodyComponent_container__1DXJL"}},73:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var s=a(7),n=a(34),c=a.n(n),r=(a(73),a(15)),i=a(14),o={dialogs:"/dialogs",messages:"/im",settings:"/settings",search:"/search",login:"/login",registr:"/register"},l=a(11),u=a(38),j=a.n(u),d=a(0),b=a.n(d),h=a(36),m=a(1),g=a(2),v=a(4),O=a(48),x=a(13),f=a(17),p=a(63);Object(p.a)({apiKey:"AIzaSyAtz3-Jp3MsxNLBujPPCLcwUJm6YpPyGQg",authDomain:"memssenger-c0d86.firebaseapp.com",projectId:"memssenger-c0d86",storageBucket:"memssenger-c0d86.appspot.com",messagingSenderId:"271283967966",appId:"1:271283967966:web:0b4e1a68a6aa42d5ebef4f",measurementId:"G-YLB9Z3H722"});var _=Object(x.f)(),w=Object(O.b)(),N=new(function(){function e(){Object(g.a)(this,e),this.user=null,this.loading=!1,this.error=!1,Object(f.d)(this)}return Object(v.a)(e,[{key:"checkUser",value:function(){}},{key:"editUserName",value:function(){var e=Object(m.a)(b.a.mark((function e(t){var a,s,n,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,s=Object(x.b)(_,"users"),n=Object(x.g)(s,Object(x.j)("uid","==",this.user.uid)),e.next=5,Object(x.e)(n);case 5:return e.sent.forEach((function(e){a=e.id})),c=Object(x.c)(_,"users",a),e.next=10,Object(x.i)(c,{name:t});case 10:return r=Object(h.a)(Object(h.a)({},this.user),{},{name:t}),this.setUser(r),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editUserAvatar",value:function(){var e=Object(m.a)(b.a.mark((function e(t){var a,s,n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s=Object(x.g)(Object(x.b)(_,"users"),Object(x.j)("uid","==",this.user.uid)),e.next=4,Object(x.e)(s);case 4:e.sent.forEach((function(e){a=e.id})),n=Object(x.c)(_,"users",a),Object(x.i)(n,{avatar:t}),c=Object(h.a)(Object(h.a)({},this.user),{},{avatar:t}),this.setUser(c),c&&this.setLoading(!1),this.setLoading(!1);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(m.a)(b.a.mark((function e(t,a){var s,n,c,r,i,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoading(!0),e.next=3,Object(O.c)(w,t,a);case 3:return s=e.sent,n=null,c=null,r=s.user.uid,i=Object(x.b)(_,"users"),o=Object(x.g)(i,Object(x.j)("email","==",t)),e.next=11,Object(x.e)(o);case 11:return e.sent.forEach((function(e){n=e.data().name,c=e.data().avatar})),(l={email:t,uid:r,name:n,avatar:c})&&this.setLoading(!1),this.setUser(l),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(m.a)(b.a.mark((function e(t,a,s){var n,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoading(!0),e.next=3,Object(O.a)(w,t,a);case 3:return n=e.sent,c=n.user.uid,e.next=7,Object(x.a)(Object(x.b)(_,"users"),{email:t,uid:c,name:s});case 7:return(r={email:t,uid:c,name:s})&&this.setLoading(!1),this.setUser(r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})));return function(t,a,s){return e.apply(this,arguments)}}()},{key:"setLoading",value:function(e){this.loading=e}},{key:"setError",value:function(e){this.error=e}},{key:"setUser",value:function(e){this.user=e}}]),e}()),k=a(18);function y(e){if(e){var t=new Date(1e3*e.seconds),a=t.getHours();a<10&&(a="0"+a);var s=t.getMinutes();return s<10&&(s="0"+s),"".concat(a,":").concat(s)}}var C=new(function(){function e(){Object(g.a)(this,e),this.users=[],this.loading=!0,this.error=!1,this.dialogs=[],this.activeDialog=null,this.searchedUsers=[],Object(f.d)(this)}return Object(v.a)(e,[{key:"getChats",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.e)(Object(x.b)(_,"users"));case 2:t=e.sent,a=t.docs.map((function(e){return e.data()})).filter((function(e){return e.uid!==N.user.uid})),this.serUsers(a),a&&this.getDialogs();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDialogs",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,a,s,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.e)(Object(x.b)(_,"dialogs"));case 2:t=e.sent,a=t.docs.map((function(e){return e.data()})),s=[],a.forEach((function(e){var t,a;e.messages[0]&&(null===(t=e.messages[0])||void 0===t?void 0:t.dialog_id.includes(null===(a=N.user)||void 0===a?void 0:a.uid))&&s.push(e.messages)})),n=s.sort((function(e,t){var a=e.length-1;return t[t.length-1].date.seconds-e[a].date.seconds})),this.setDialogs(n),a&&this.setLoading(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchUsers",value:function(e){this.searchedUsers=this.users.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))}},{key:"setLoading",value:function(e){this.loading=e}},{key:"setError",value:function(e){this.error=e}},{key:"serUsers",value:function(e){this.searchedUsers=e,this.users=e}},{key:"setDialogs",value:function(e){this.dialogs=e}}]),e}()),M=a(21),S=new(function(){function e(){Object(g.a)(this,e),this.activeDialog=null,this.messages=[],this.dialogId=null,this.loading=!1,Object(f.d)(this)}return Object(v.a)(e,[{key:"sendMessage",value:function(){var e=Object(m.a)(b.a.mark((function e(t){var a,s,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(x.c)(_,"dialogs",this.dialogId),e.next=3,Object(x.d)(a);case 3:if(!(s=e.sent).exists()){e.next=10;break}return n=s.data(),e.next=8,Object(x.i)(a,{messages:[].concat(Object(M.a)(n.messages),[t])});case 8:e.next=12;break;case 10:return e.next=12,Object(x.h)(Object(x.c)(_,"dialogs",this.dialogId),{messages:[t]});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDialogId",value:function(){var e=N.user;if(this.activeDialog&&e){var t=null;t=this.activeDialog.uid>e.uid?this.activeDialog.uid+e.uid:e.uid+this.activeDialog.uid,this.setDialogId(t),this.setLoading(!1)}}},{key:"setActiveDialog",value:function(e){this.activeDialog=e}},{key:"setMessages",value:function(e){this.messages=e}},{key:"setDialogId",value:function(e){this.dialogId=e}},{key:"setLoading",value:function(e){this.loading=e}},{key:"setAll",value:function(){this.dialogId=null,this.activeDialog=null,this.messages=[]}}]),e}()),L=a(20),z=a(3),H=Object(k.a)((function(e){var t=e.dialog,a=N.user,n=Object(s.useState)(""),c=Object(l.a)(n,2),i=c[0],u=c[1],d=Object(s.useState)(""),b=Object(l.a)(d,2),m=b[0],g=b[1];Object(s.useMemo)((function(){var e=t[0].dialog_id;C.users.forEach((function(t){e.includes(t.uid)&&g(t)}))}),[t]);var v=m.name,O=m.uid,x=m.email,f=m.avatar;return Object(s.useLayoutEffect)((function(){var e=function(e){var t=e[e.length-1];if(0!==t.length){var a=y(t.date);t=Object(h.a)(Object(h.a)({},t),{},{time:a})}return t}(t);u(e),C.setLoading(!1)}),[t]),Object(z.jsx)(z.Fragment,{children:i&&0!==i.length?Object(z.jsx)(L.motion.div,{layout:!0,children:Object(z.jsxs)(r.b,{to:o.messages+"/".concat(O),className:j.a.messageContainer,onClick:function(){return S.setActiveDialog({email:x,uid:O,name:v,avatar:f})},children:[Object(z.jsx)("div",{className:j.a.avatar,children:(null===m||void 0===m?void 0:m.avatar)&&Object(z.jsx)("img",{src:m.avatar,alt:""})}),Object(z.jsxs)("div",{className:j.a.info,children:[Object(z.jsxs)("div",{className:j.a.top,children:[Object(z.jsx)("div",{className:"".concat(j.a.userName," text-mw"),children:v}),Object(z.jsx)("div",{className:j.a.time,children:C.loading||0===i.length?null:null===i||void 0===i?void 0:i.time})]}),Object(z.jsx)("div",{className:"text-mw",children:C.loading?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":0!==i.length?i.uid===a.uid?"\u0412\u044b: ".concat(i.message):i.message:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})]})}):null})}));a(90);function I(){return Object(z.jsx)("div",{className:"preloader-wrapper",children:Object(z.jsx)("div",{className:"loadingio-spinner-spinner-sczevsac37c",children:Object(z.jsxs)("div",{className:"ldio-cg0exsdxg3p",children:[Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{})]})})})}var D=Object(k.a)((function(){var e=Object(i.g)();return Object(s.useLayoutEffect)((function(){C.getChats();var t=JSON.parse(localStorage.getItem("user"));t?N.setUser(t):e.push("/")}),[e]),Object(z.jsx)(z.Fragment,{children:C.loading?Object(z.jsx)(I,{}):0!==C.dialogs.length&&0!==C.users.length?Object(z.jsx)(z.Fragment,{children:C.dialogs.map((function(e){return Object(z.jsx)(H,{dialog:e},e[0].dialog_id)}))}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{className:"not-dialogs",children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),Object(z.jsx)("div",{className:"to-search",children:Object(z.jsx)(r.b,{to:"search",children:" \u041a \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 "})})]})})})),B=a(55),A=a.n(B),E=a(56),U=a.n(E);function F(e){var t=e.children;return Object(z.jsx)("div",{className:U.a.wrapper,children:Object(z.jsx)("div",{className:U.a.container,children:t})})}var V=function(){return Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(F,{children:[Object(z.jsx)(r.b,{to:o.settings,className:A.a.menuButton,children:Object(z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(z.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(z.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})}),Object(z.jsx)("div",{className:"appTitle",children:"Memssenger"}),Object(z.jsx)(r.b,{to:o.search,className:A.a.searchButton,children:Object(z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(z.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(z.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})]})})]})})},P=a(66),J=a.n(P);function T(e){var t=e.children;return Object(z.jsx)("div",{className:J.a.container,children:t})}function W(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(V,{}),Object(z.jsx)(T,{children:Object(z.jsx)(L.motion.div,{initial:{opacity:.2,scale:.7,y:"-20%"},animate:{opacity:1,scale:1,y:0},children:Object(z.jsx)(D,{})})})]})}var R=a(57),Y=a.n(R),q=Object(k.a)((function(){var e=Object(i.g)(),t=S.activeDialog;return t?Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(F,{children:[Object(z.jsx)(r.b,{to:o.dialogs,className:Y.a.backButton,children:Object(z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(z.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(z.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})]})}),Object(z.jsx)("div",{className:"appTitle text-mw",children:t.name}),Object(z.jsx)("div",{className:Y.a.userAvatar,children:Object(z.jsx)("img",{src:null===t||void 0===t?void 0:t.avatar,alt:""})})]})}):(e.push(o.dialogs),null)})),G=a(31),K=a.n(G),Q=a(67),Z=a.n(Q),X=Object(k.a)((function(){var e=N.user,t=S.dialogId,a=Object(s.useState)(""),n=Object(l.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),o=Object(l.a)(i,2),u=o[0],j=o[1],d=function(){var a=Object(m.a)(b.a.mark((function a(s){var n,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s.preventDefault(),(null===(n=c)||void 0===n?void 0:n.trim().length)&&(i={message:n,uid:e.uid,date:new Date,dialog_id:t,name:e.name},r(""),S.sendMessage(i));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(z.jsx)("div",{className:K.a.wrapper,children:Object(z.jsx)("div",{className:K.a.formWrapper,children:Object(z.jsxs)("form",{className:K.a.form,onSubmit:function(e){d(e),j(!1)},children:[Object(z.jsx)("input",{value:c,onChange:function(e){return r(e.target.value)},className:K.a.input,type:"text",placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),Object(z.jsxs)("div",{onClick:function(){return j(!u)},className:"emoji-button",children:[Object(z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#383838",children:[Object(z.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(z.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"})]}),u?Object(z.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:"emoji-popover",children:Object(z.jsx)(Z.a,{pickerStyle:{boxShadow:"none"},onEmojiClick:function(e,t){r((function(e){return"".concat(e," ").concat(t.emoji)}))}})}):null]}),Object(z.jsx)("button",{className:K.a.send,children:Object(z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(z.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(z.jsx)("path",{d:"M4.01 6.03l7.51 3.22-7.52-1 .01-2.22m7.5 8.72L4 17.97v-2.22l7.51-1M2.01 3L2 10l15 2-15 2 .01 7L23 12 2.01 3z"})]})})]})})})}));function $(e){var t=e.message,a=e.uid,s=e.userUid,n=e.date,c=y(n),r=a===s?"100%":"-100%";return Object(z.jsx)(L.motion.div,{initial:{x:r},animate:{x:"0%"},className:K.a.messageContainer,style:{justifyContent:a===s&&"flex-end",textAlign:a===s&&"right"},children:Object(z.jsxs)("div",{className:K.a.message,children:[Object(z.jsx)("span",{className:K.a.messageText,children:t}),n?Object(z.jsxs)("span",{className:K.a.messageDate,children:[" ",c," "]}):null]})})}var ee=a(68);var te=Object(k.a)((function(){var e=N.user,t=function(){var e=Object(s.useState)(window.innerHeight),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(s.useLayoutEffect)((function(){var e=setInterval((function(){n(window.innerHeight)}),500);return function(){return clearInterval(e)}}),[]),a}();return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)("div",{layout:!0,className:K.a.messagesWrapper,style:{height:t-168+"px"},children:Object(z.jsx)(ee.a,{className:"x-hidden",children:S.messages.map((function(t,a){var s=t.message,n=t.uid,c=t.date;return Object(z.jsx)($,{message:s,userUid:e.uid,uid:n,date:c},"message_key_".concat(a))}))})})})})),ae=a(45),se=Object(k.a)((function(){return Object(s.useEffect)((function(){S.createDialogId()}),[]),Object(s.useEffect)((function(){if(S.dialogId){var e=Object(ae.g)(Object(ae.c)(_,"dialogs",S.dialogId),(function(e){var t=e.data();t?t.messages.length>0&&S.setMessages(t.messages):S.setMessages([])}));return function(){e(),S.setAll()}}}),[]),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(q,{}),Object(z.jsxs)(T,{children:[S.loading?Object(z.jsx)(I,{}):Object(z.jsx)(te,{}),Object(z.jsx)(X,{})]})]})})),ne=a(58),ce=a.n(ne);var re=function(e){var t=e.searchUsers,a=Object(s.useRef)();return Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(F,{children:[Object(z.jsx)(r.b,{to:o.dialogs,className:ce.a.backButton,children:Object(z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(z.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(z.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})]})}),Object(z.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",className:ce.a.input,onChange:function(){t(a)},ref:a})]})})},ie=a(41),oe=a.n(ie);var le=function(e){var t=e.user,a=t.name,s=t.uid,n=t.email,c=t.avatar;return Object(z.jsx)(L.motion.div,{layout:!0,children:Object(z.jsx)(r.b,{to:o.messages+"/".concat(t.uid),onClick:function(){return S.setActiveDialog({email:n,uid:s,name:a,avatar:c})},children:Object(z.jsxs)("div",{className:oe.a.container,children:[Object(z.jsx)("div",{className:oe.a.avatar,children:Object(z.jsx)("img",{src:t.avatar?t.avatar:null,alt:""})}),Object(z.jsxs)("div",{className:oe.a.info,children:[Object(z.jsxs)("div",{className:"".concat(oe.a.title," text-mw"),children:[" ",t.name," "]}),Object(z.jsxs)("div",{className:"".concat(oe.a.date," text-mw"),children:[" ",t.email," "]})]})]})})})};var ue=function(e){var t=e.users;return Object(z.jsx)(z.Fragment,{children:0!==t.length?t.map((function(e){return Object(z.jsx)(le,{user:e},e.uid)})):Object(z.jsx)("div",{className:"not-dialogs",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})})},je=Object(k.a)((function(){var e=Object(i.g)();localStorage.getItem("user")&&0!==C.users.length||e.push("/");var t=function(){var e=Object(m.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.current.value,C.searchUsers(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(re,{searchUsers:t}),Object(z.jsx)(T,{children:Object(z.jsx)(L.motion.div,{initial:{x:"100%"},animate:{x:"0%"},children:Object(z.jsx)(ue,{users:C.searchedUsers})})})]})})),de=a(59),be=a.n(de);function he(){return Object(z.jsxs)(F,{children:[Object(z.jsx)(r.b,{to:"/im",className:be.a.backButton,children:Object(z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(z.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(z.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})]})}),Object(z.jsx)("div",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(z.jsx)(r.b,{to:"/search",className:be.a.searchButton,children:Object(z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(z.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(z.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})]})})]})}var me=a(23),ge=a.n(me),ve=a(33),Oe=a.n(ve);function xe(e){var t=e.setModal;return c.a.createPortal(Object(z.jsx)(fe,{setModal:t}),document.body)}function fe(e){var t=e.setModal,a=Object(s.useRef)(null),n=function(){var e=Object(m.a)(b.a.mark((function e(s){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=a.current.value.trim()).length>0)){e.next=6;break}return e.next=4,N.editUserName(n);case 4:void 0!==(c=e.sent)&&localStorage.setItem("user",JSON.stringify(c));case 6:t(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(e){e.stopPropagation(),"close"===e.target.dataset.close&&t(!1)};return Object(z.jsx)("div",{className:Oe.a.modal,"data-close":"close",onClick:c,children:Object(z.jsx)(L.motion.div,{initial:{y:"100%"},animate:{y:"0%"},children:Object(z.jsxs)("div",{className:Oe.a.modalContent,children:[Object(z.jsxs)("div",{className:Oe.a.form,children:[Object(z.jsx)("input",{autoFocus:!0,ref:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",type:"text"}),Object(z.jsx)("button",{onClick:n,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(z.jsx)("button",{onClick:c,"data-close":"close",className:Oe.a.close,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})})})}var pe=a(43);function _e(e){var t=e.setModal;return c.a.createPortal(Object(z.jsx)(we,{setModal:t}),document.body)}function we(e){var t=e.setModal,a=Object(s.useState)(!1),n=Object(l.a)(a,2),c=n[0],r=n[1],i=N.user,o=function(){var e=Object(m.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),t.preventDefault(),a=t.target.files[0],e.next=5,u(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(m.a)(b.a.mark((function e(a){var s,n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.size>10485760)){e.next=5;break}alert("\u0420\u0430\u0437\u043c\u0435\u0440 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439"),t(!1),e.next=16;break;case 5:if("image/png"===a.type||"image/jpg"===a.type||"image/jpeg"===a.type){e.next=11;break}console.log("image/png"!==a.type),alert("\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f (png/jpg/jpeg)"),t(!1),e.next=16;break;case 11:return s=i.uid+"_avatar",n=Object(pe.b)(),c=Object(pe.c)(n,s),e.next=16,Object(pe.d)(c,a).then((function(){Object(pe.a)(Object(pe.c)(n,s)).then(function(){var e=Object(m.a)(b.a.mark((function e(a){var s,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a,e.next=3,N.editUserAvatar(s);case 3:void 0!==(n=e.sent)&&localStorage.setItem("user",JSON.stringify(n)),t(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){e.stopPropagation(),"close"===e.target.dataset.close&&t(!1)};return Object(z.jsx)("div",{className:Oe.a.modal,"data-close":"close",onClick:j,children:Object(z.jsx)(L.motion.div,{initial:{y:"100%"},animate:{y:"0%"},children:Object(z.jsxs)("div",{className:Oe.a.modalContent,children:[Object(z.jsxs)("form",{onChange:o,className:Oe.a.form,children:[!c&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("label",{className:Oe.a.labelAvatar,htmlFor:"avatar",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"}),Object(z.jsx)("input",{className:Oe.a.inputAvatar,type:"file",id:"avatar"})]}),c&&Object(z.jsx)("div",{className:Oe.a.labelAvatar,children:"loading..."})]}),!c&&Object(z.jsx)("button",{onClick:j,"data-close":"close",className:Oe.a.close,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})})})}var Ne=a(42),ke=a.n(Ne);function ye(e){var t=e.message,a=e.closeAlert;return c.a.createPortal(Object(z.jsx)(Ce,{message:t,closeAlert:a}),document.body)}function Ce(e){var t=e.message,a=e.closeAlert,n=Object(s.useState)(!1),c=Object(l.a)(n,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){var e=setTimeout((function(){i(!0)}),4e3),t=a?setTimeout((function(){a(!1)}),4300):0;return function(){clearTimeout(e),clearTimeout(t)}}),[a]),Object(z.jsx)("div",{className:ke.a.wrapper,children:Object(z.jsx)(L.motion.div,{initial:{x:"100%"},animate:{x:"0%"},children:Object(z.jsx)("div",{className:r?ke.a.alert+" "+ke.a.close:ke.a.alert,children:Object(z.jsx)("div",{className:ke.a.container,children:t})})})})}var Me=Object(k.a)((function(){var e=N.user,t=Object(s.useState)(!1),a=Object(l.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(!1),u=Object(l.a)(r,2),j=u[0],d=u[1],h=Object(s.useState)(!1),g=Object(l.a)(h,2),v=g[0],O=g[1],x=Object(s.useState)(null),f=Object(l.a)(x,2),p=f[0],_=f[1],w=Object(i.g)();Object(s.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e&&N.setUser(e)}),[]);var k=function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\u041f\u0440\u0438\u0432\u0435\u0442, \u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e Memssenger \u0434\u043b\u044f \u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438. \u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0441\u044f \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435: https://ozcnii.github.io/memssenger",e.prev=1,e.next=4,navigator.clipboard.writeText("\u041f\u0440\u0438\u0432\u0435\u0442, \u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e Memssenger \u0434\u043b\u044f \u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438. \u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0441\u044f \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435: https://ozcnii.github.io/memssenger");case 4:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430",_("\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430"),O(!0),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",_("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),O(!0);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)(z.Fragment,{children:[n&&Object(z.jsx)(xe,{setModal:c}),j&&Object(z.jsx)(_e,{setModal:d}),v&&Object(z.jsx)(ye,{message:p,closeAlert:O}),e?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{className:ge.a.main,children:Object(z.jsxs)("div",{className:ge.a.top,children:[Object(z.jsx)("div",{className:ge.a.avatar,children:(null===e||void 0===e?void 0:e.avatar)&&Object(z.jsx)("img",{src:e.avatar,alt:""})}),Object(z.jsxs)("div",{className:ge.a.info,children:[Object(z.jsxs)("div",{className:"".concat(ge.a.userName," text-mw-100"),children:[e.name," "]}),Object(z.jsx)("div",{className:"text-mw-100",children:e.email})]})]})}),Object(z.jsxs)("div",{className:ge.a.settings,children:[Object(z.jsxs)("div",{className:ge.a.edit,onClick:function(){d(!0)},children:[Object(z.jsx)("div",{className:ge.a.icon,children:Object(z.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"user-astronaut",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:Object(z.jsx)("path",{fill:"currentColor",d:"M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z"})})}),Object(z.jsx)("span",{children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440 "})]}),Object(z.jsxs)("div",{className:ge.a.edit,onClick:function(){c(!0)},children:[Object(z.jsx)("div",{className:ge.a.icon,children:Object(z.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"edit",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:Object(z.jsx)("path",{fill:"currentColor",d:"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"})})}),Object(z.jsx)("span",{children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u043c\u044f"})]}),Object(z.jsxs)("a",{href:"https://github.com/ttenapp/memssenger",target:"blank",className:ge.a.edit,children:[Object(z.jsx)("div",{className:ge.a.icon,children:Object(z.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"question",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",children:Object(z.jsx)("path",{fill:"currentColor",d:"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"})})}),Object(z.jsx)("span",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"})]}),Object(z.jsxs)("div",{className:ge.a.edit,onClick:k,children:[Object(z.jsx)("div",{className:ge.a.icon,children:Object(z.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"user-friends",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",children:Object(z.jsx)("path",{fill:"currentColor",d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"})})}),Object(z.jsx)("span",{children:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"})]}),Object(z.jsxs)("div",{className:ge.a.edit+" "+ge.a.last,onClick:function(){localStorage.setItem("user",null),N.setUser(null),w.push(o.login)},children:[Object(z.jsx)("div",{className:ge.a.icon,children:Object(z.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"sign-out-alt",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(z.jsx)("path",{fill:"currentColor",d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"})})}),Object(z.jsx)("span",{children:"\u0412\u044b\u0445\u043e\u0434"})]})]})]}):null]})}));function Se(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(he,{}),Object(z.jsx)(T,{children:Object(z.jsx)(L.motion.div,{initial:{x:"-100%"},animate:{x:"0%"},children:Object(z.jsx)(Me,{})})})]})}var Le=a(22),ze=a.n(Le),He=Object(k.a)((function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(null),u=Object(l.a)(c,2),j=u[0],d=u[1],h=Object(i.g)(),g=Object(s.useRef)(null),v=Object(s.useRef)(null),O=function(){var e=Object(m.a)(b.a.mark((function e(t){var a,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=g.current.value.trim(),s=v.current.value.trim(),!a||!s){e.next=18;break}return e.prev=4,e.next=7,N.login(a,s);case 7:void 0!==(c=e.sent)&&localStorage.setItem("user",JSON.stringify(c)),h.push(o.dialogs),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),d(e.t0.message),n(!0);case 16:e.next=21;break;case 18:"\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b",d("\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"),n(!0);case 21:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e&&(N.setUser(e),h.push(o.dialogs))}),[h]),Object(z.jsxs)(z.Fragment,{children:[a&&Object(z.jsx)(ye,{message:j,closeAlert:n}),Object(z.jsxs)("div",{className:ze.a.container,children:[Object(z.jsx)("div",{className:ze.a.title,children:"\u0412\u0445\u043e\u0434"}),Object(z.jsxs)("form",{onSubmit:O,className:ze.a.form,children:[Object(z.jsx)("input",{ref:g,type:"text",placeholder:"\u042d\u043b. \u0430\u0434\u0440\u0435\u0441",className:ze.a.login}),Object(z.jsx)("input",{ref:v,type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:ze.a.password}),Object(z.jsx)("button",{type:"submit",className:ze.a.submit,children:N.loading?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u0412\u043e\u0439\u0442\u0438"}),Object(z.jsx)("div",{children:Object(z.jsx)(r.b,{to:o.registr,className:ze.a.registr,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})]})]})})),Ie=Object(k.a)((function(e){var t=e.setUser,a=Object(s.useState)(!1),n=Object(l.a)(a,2),c=n[0],u=n[1],j=Object(s.useState)(null),d=Object(l.a)(j,2),h=d[0],g=d[1],v=Object(i.g)(),O=Object(s.useRef)(null),x=Object(s.useRef)(null),f=Object(s.useRef)(null),p=Object(s.useRef)(null),_=function(){var e=Object(m.a)(b.a.mark((function e(t){var a,s,n,c,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=O.current.value.trim(),s=x.current.value.trim(),n=f.current.value.trim(),c=p.current.value.trim(),!(a&&s&&c&&n&&s===n)){e.next=21;break}return e.prev=6,e.next=9,N.register(a,s,c);case 9:void 0!==(r=e.sent)&&localStorage.setItem("user",JSON.stringify(r)),v.push("/chat"),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),i=e.t0.message,g(i),u(!0);case 19:e.next=22;break;case 21:s!==n?("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442",g("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"),u(!0)):("\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b",g("\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"),u(!0));case 22:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e&&(t(e),v.push(o.dialogs))}),[v,t]),Object(z.jsxs)(z.Fragment,{children:[c&&Object(z.jsx)(ye,{message:h,closeAlert:u}),Object(z.jsxs)("div",{className:ze.a.container,children:[Object(z.jsx)("div",{className:ze.a.title,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(z.jsxs)("form",{onSubmit:_,className:ze.a.form,children:[Object(z.jsx)("input",{type:"text",ref:O,placeholder:"\u042d\u043b. \u0430\u0434\u0440\u0435\u0441",className:ze.a.login}),Object(z.jsx)("input",{type:"text",ref:x,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:ze.a.password}),Object(z.jsx)("input",{type:"text",ref:f,placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",className:ze.a.passwordConfirm}),Object(z.jsx)("input",{type:"text",ref:p,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f",className:ze.a.passwordConfirm}),Object(z.jsx)("button",{type:"submit",className:ze.a.submit,children:N.loading?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(z.jsx)("div",{children:Object(z.jsx)(r.b,{to:o.login,className:ze.a.logIn,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})]})}));var De=function(){return Object(z.jsxs)(r.a,{children:[Object(z.jsx)("div",{className:"header-background"}),Object(z.jsxs)(i.d,{children:[Object(z.jsx)(i.b,{exact:!0,path:"/",render:function(){return Object(z.jsx)(i.a,{to:o.login})}}),Object(z.jsx)(i.b,{path:o.dialogs,render:function(){return Object(z.jsx)(W,{})}}),Object(z.jsx)(i.b,{path:o.messages+"/:id",render:function(){return Object(z.jsx)(se,{})}}),Object(z.jsx)(i.b,{path:o.settings,render:function(){return Object(z.jsx)(Se,{})}}),Object(z.jsx)(i.b,{path:o.search,render:function(){return Object(z.jsx)(je,{})}}),Object(z.jsx)(i.b,{path:o.login,render:function(){return Object(z.jsx)(He,{})}}),Object(z.jsx)(i.b,{path:o.registr,render:function(){return Object(z.jsx)(Ie,{})}}),Object(z.jsx)(i.b,{path:"*",render:function(){return Object(z.jsx)(i.a,{to:o.dialogs})}})]})]})},Be=document.getElementById("root");c.a.render(Object(z.jsx)(s.StrictMode,{children:Object(z.jsx)(De,{})}),Be)}},[[91,1,2]]]);
//# sourceMappingURL=main.ea243758.chunk.js.map