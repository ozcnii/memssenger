{"version":3,"sources":["pages/LoginPage/LoginPage.module.css","pages/SettingsPage/SettingsContainer/SettingsContainer.module.css","pages/MessagePage/Messages.module.css","components/Modals/EditName/EditName.module.css","pages/DialogsPage/Dialog/Dialog.module.css","pages/SearchPage/LastList/LastItem/LastItem.module.css","components/Alert/Alert.module.css","pages/DialogsPage/Header/Header.module.css","components/Layout/Header/HeaderComponent.module.css","pages/MessagePage/Header/Header.module.css","pages/SearchPage/Header/Header.module.css","pages/SettingsPage/Header/Header.module.css","components/Layout/Body/BodyComponent.module.css","routes/routes.js","firebase.js","store/user.store.js","utils/get_date.js","utils/getLastMessage.js","store/chat.store.js","store/dialog.store.js","pages/DialogsPage/Dialog/Dialog.jsx","components/Layout/Body/BodyComponent.jsx","components/Preloader/Preloader.jsx","pages/DialogsPage/Dialogs/Dialogs.jsx","components/Layout/Header/HeaderComponent.jsx","pages/DialogsPage/Header/Header.jsx","pages/DialogsPage/index.jsx","pages/MessagePage/Header/Header.jsx","pages/MessagePage/FormMessage/FormMessage.jsx","pages/MessagePage/Message/Message.jsx","pages/MessagePage/MessagesWrapper/MessagesWrapper.jsx","hooks/useInnerHeight.js","pages/MessagePage/index.jsx","pages/SearchPage/Header/Header.jsx","pages/SearchPage/LastList/LastItem/LastItem.jsx","pages/SearchPage/LastList/LastList.jsx","pages/SearchPage/index.jsx","pages/SettingsPage/Header/Header.jsx","components/Modals/EditName/EditName.jsx","components/Modals/EditAvatar/EditAvatar.jsx","components/Alert/Alert.jsx","pages/SettingsPage/SettingsContainer/SettingContainer.jsx","pages/SettingsPage/index.jsx","pages/LoginPage/index.jsx","pages/LoginPage/RegistrationPage/RegistrationPage.jsx","App.jsx","index.jsx"],"names":["module","exports","routes","dialogs","messages","settings","search","login","registr","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","auth","getAuth","userStore","user","loading","error","makeAutoObservable","this","name","a","userId","userRef","collection","q","query","where","uid","getDocs","forEach","doc","id","nameRef","updateDoc","setUser","avatarUrl","docID","avatarRef","avatar","setLoading","myEmail","myPassword","signInWithEmailAndPassword","responseFromAuth","myName","myAvatar","data","email","createUserWithEmailAndPassword","addDoc","getDate","date","thisDate","Date","seconds","hours","getHours","minutes","getMinutes","chatStore","users","activeDialog","searchedUsers","querySnapshop","filteredUsers","docs","map","filter","serUsers","getDialogs","allMessages","authUserDialogs","message","dialog_id","includes","push","setDialogs","toLowerCase","dialogStore","dialogId","dialogRef","getDoc","docSnap","exists","docData","setDoc","myDialogId","setDialogId","dialog","Message","observer","authUser","useState","lastMessage","setLastMessage","useEffect","lastIndex","length","newLastMessage","getLastMessage","to","className","styles","messageContainer","onClick","setActiveDialog","src","alt","info","top","userName","BodyComponent","children","s","container","Preloader","Dialogs","history","useHistory","JSON","parse","localStorage","getItem","useLayoutEffect","getChats","Dialog","HeaderComponent","wrapper","Header","menuButton","xmlns","height","viewBox","width","fill","d","searchButton","DialogsPage","div","initial","y","animate","transition","easeInOut","backButton","userAvatar","FormMessage","newMessage","setNewMessage","emojiPopover","setEmojiPopover","sendMessage","event","preventDefault","trim","myMessage","formWrapper","form","onSubmit","value","onChange","e","target","input","type","placeholder","stopPropagation","disableAutoFocus","pickerStyle","boxShadow","onEmojiClick","emojiObject","emoji","send","userUid","messageDate","initialPosition","x","style","justifyContent","textAlign","messageText","MessagesWrapper","innerHeight","window","setInnerHeight","interval","setInterval","clearInterval","useInnerHeight","layout","messagesWrapper","i","Messages","createDialogId","unsub","onSnapshot","currentData","setMessages","setAll","searchUsers","searchRef","useRef","ref","LastItem","title","LastList","SearchPage","searchInput","current","EditName","setModal","ReactDOM","createPortal","Modal","document","body","newName","onClickHandler","editUserName","undefined","newUser","setItem","stringify","onClose","dataset","close","modal","data-close","modalContent","autoFocus","EditAvatar","isLoading","setIsLoading","file","files","getAvatarUrl","size","alert","console","log","avatarName","storage","getStorage","storageRef","uploadBytes","then","getDownloadURL","url","editUserAvatar","catch","labelAvatar","htmlFor","inputAvatar","Alert","closeAlert","isClosed","setIsClosed","setTimeout","SettingsContainer","editNameModal","setEditNameModal","editAvatarModal","setEditAvatarModal","showAlert","setAlert","alertText","setAlertText","saveToBuffer","navigator","clipboard","writeText","main","edit","icon","aria-hidden","focusable","data-prefix","data-icon","role","href","last","SettingsPage","LoginPage","setShowAlert","password","submit","RegistrationPage","confirmPassword","register","myConfirmPassword","text","passwordConfirm","logIn","App","exact","path","render","rootElement","getElementById"],"mappings":"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","file":"static/js/main.0ac9f8d5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LoginPage_container__1RIQA\",\"title\":\"LoginPage_title__1vt9e\",\"form\":\"LoginPage_form__3H2UY\",\"login\":\"LoginPage_login__35KoP\",\"password\":\"LoginPage_password__44Akj\",\"passwordConfirm\":\"LoginPage_passwordConfirm__b0D4h\",\"submit\":\"LoginPage_submit__3MH80\",\"google\":\"LoginPage_google__314qS\",\"facebook\":\"LoginPage_facebook__2AGgj\",\"registr\":\"LoginPage_registr__24fhz\",\"logIn\":\"LoginPage_logIn__3BlGN\",\"googleIcon\":\"LoginPage_googleIcon__DZ0pe\",\"fbIcon\":\"LoginPage_fbIcon__3kwIy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"SettingsContainer_header__1SXVC\",\"top\":\"SettingsContainer_top__-xMDE\",\"avatar\":\"SettingsContainer_avatar__esP34\",\"info\":\"SettingsContainer_info__17IZ_\",\"userName\":\"SettingsContainer_userName__2_VdF\",\"edit\":\"SettingsContainer_edit__38IdM\",\"icon\":\"SettingsContainer_icon__28bIC\",\"last\":\"SettingsContainer_last__8gblu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Messages_wrapper__3ECC9\",\"formWrapper\":\"Messages_formWrapper__1W4zS\",\"messages\":\"Messages_messages__3rkfT\",\"form\":\"Messages_form__3GhiH\",\"input\":\"Messages_input__6NnRE\",\"send\":\"Messages_send__2kr13\",\"messagesWrapper\":\"Messages_messagesWrapper__bjyzV\",\"messageContainer\":\"Messages_messageContainer__37r4z\",\"message\":\"Messages_message__D0aAb\",\"messageDate\":\"Messages_messageDate__315P7\",\"noMessages\":\"Messages_noMessages__3hNF9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"EditName_modal__2VIbH\",\"modalContent\":\"EditName_modalContent__1BVm6\",\"form\":\"EditName_form__2ZxRj\",\"close\":\"EditName_close__27CfM\",\"inputAvatar\":\"EditName_inputAvatar__2nBoS\",\"labelAvatar\":\"EditName_labelAvatar__7nV3G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageContainer\":\"Dialog_messageContainer__c7Zl6\",\"avatar\":\"Dialog_avatar__1zUBO\",\"info\":\"Dialog_info__29FDB\",\"top\":\"Dialog_top__1OKsB\",\"date\":\"Dialog_date__327nK\",\"userName\":\"Dialog_userName__6s1EX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LastItem_container__TEnTp\",\"avatar\":\"LastItem_avatar__3sysp\",\"info\":\"LastItem_info__1WWVx\",\"date\":\"LastItem_date__lGbg3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"Alert_alert__cGDqi\",\"show\":\"Alert_show__3aKWc\",\"container\":\"Alert_container__OvbIo\",\"close\":\"Alert_close__4UO1z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuButton\":\"Header_menuButton__3-UdR\",\"searchButton\":\"Header_searchButton__cJU5n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HeaderComponent_container__1pRFb\",\"wrapper\":\"HeaderComponent_wrapper__39GmX\",\"App-header\":\"HeaderComponent_App-header__3YPkh\",\"App-link\":\"HeaderComponent_App-link__OmSec\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backButton\":\"Header_backButton__1c1V4\",\"userAvatar\":\"Header_userAvatar__2xoo4\",\"container\":\"Header_container__2UVIn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backButton\":\"Header_backButton__3NynG\",\"container\":\"Header_container__f8qQ9\",\"input\":\"Header_input__18w18\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1j4OA\",\"backButton\":\"Header_backButton__6Y5fU\",\"searchButton\":\"Header_searchButton__2o6el\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BodyComponent_container__aEJsO\"};","const routes = {\r\n    dialogs: \"/dialogs\",\r\n    messages: \"/im\",\r\n    settings: \"/settings\",\r\n    search: \"/search\",\r\n    login: \"/login\",\r\n    registr: \"/register\",\r\n};\r\n\r\nexport default routes;\r\n","// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAtz3-Jp3MsxNLBujPPCLcwUJm6YpPyGQg\",\r\n    authDomain: \"memssenger-c0d86.firebaseapp.com\",\r\n    projectId: \"memssenger-c0d86\",\r\n    storageBucket: \"memssenger-c0d86.appspot.com\",\r\n    messagingSenderId: \"271283967966\",\r\n    appId: \"1:271283967966:web:0b4e1a68a6aa42d5ebef4f\",\r\n    measurementId: \"G-YLB9Z3H722\",\r\n};\r\n\r\n// Initialize Firebase\r\ninitializeApp(firebaseConfig);\r\n\r\nconst db = getFirestore();\r\nconst auth = getAuth();\r\n\r\nexport { db, auth };\r\n","import {\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n} from \"firebase/auth\";\r\nimport {\r\n  addDoc,\r\n  collection,\r\n  doc,\r\n  getDocs,\r\n  query,\r\n  updateDoc,\r\n  where,\r\n} from \"firebase/firestore\";\r\nimport { makeAutoObservable } from \"mobx\";\r\nimport { auth, db } from \"../firebase\";\r\n\r\nclass UserStore {\r\n  user = null;\r\n  loading = false;\r\n  error = false;\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  checkUser() {\r\n    // На dialogsPage\r\n    // this.setLoading(true);\r\n  }\r\n\r\n  async editUserName(name) {\r\n    let userId = null;\r\n\r\n    const userRef = collection(db, \"users\");\r\n    const q = query(userRef, where(\"uid\", \"==\", this.user.uid));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    querySnapshot.forEach((doc) => {\r\n      userId = doc.id;\r\n    });\r\n\r\n    const nameRef = doc(db, \"users\", userId);\r\n    await updateDoc(nameRef, {\r\n      name,\r\n    });\r\n\r\n    const user = { ...this.user, name };\r\n\r\n    this.setUser(user);\r\n\r\n    return user;\r\n  }\r\n\r\n  async editUserAvatar(avatarUrl) {\r\n    let docID = \"\";\r\n\r\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", this.user.uid));\r\n    const querySnapshot = await getDocs(q);\r\n    querySnapshot.forEach((doc) => {\r\n      docID = doc.id;\r\n    });\r\n\r\n    const avatarRef = doc(db, \"users\", docID);\r\n\r\n    updateDoc(avatarRef, {\r\n      avatar: avatarUrl,\r\n    });\r\n\r\n    const user = { ...this.user, avatar: avatarUrl };\r\n    this.setUser(user);\r\n\r\n    if (user) {\r\n      this.setLoading(false);\r\n    }\r\n\r\n    this.setLoading(false);\r\n  }\r\n\r\n  async login(myEmail, myPassword) {\r\n    this.setLoading(true);\r\n\r\n    const responseFromAuth = await signInWithEmailAndPassword(\r\n      auth,\r\n      myEmail,\r\n      myPassword\r\n    );\r\n\r\n    let myName = null;\r\n    let myAvatar = null;\r\n    const userId = responseFromAuth.user.uid;\r\n\r\n    const userRef = collection(db, \"users\");\r\n    const q = query(userRef, where(\"email\", \"==\", myEmail));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    querySnapshot.forEach((doc) => {\r\n      myName = doc.data().name;\r\n      myAvatar = doc.data().avatar;\r\n    });\r\n\r\n    const user = {\r\n      email: myEmail,\r\n      uid: userId,\r\n      name: myName,\r\n      avatar: myAvatar,\r\n    };\r\n\r\n    if (user) {\r\n      this.setLoading(false);\r\n    }\r\n\r\n    this.setUser(user);\r\n    return user;\r\n  }\r\n\r\n  async register(myEmail, myPassword, myName) {\r\n    this.setLoading(true);\r\n    const responseFromAuth = await createUserWithEmailAndPassword(\r\n      auth,\r\n      myEmail,\r\n      myPassword\r\n    );\r\n\r\n    const userId = responseFromAuth.user.uid;\r\n\r\n    await addDoc(collection(db, \"users\"), {\r\n      email: myEmail,\r\n      uid: userId,\r\n      name: myName,\r\n    });\r\n\r\n    const user = {\r\n      email: myEmail,\r\n      uid: userId,\r\n      name: myName,\r\n    };\r\n\r\n    if (user) {\r\n      this.setLoading(false);\r\n    }\r\n\r\n    this.setUser(user);\r\n    return user;\r\n  }\r\n\r\n  setLoading(loading) {\r\n    this.loading = loading;\r\n  }\r\n\r\n  setError(error) {\r\n    this.error = error;\r\n  }\r\n\r\n  setUser(user) {\r\n    this.user = user;\r\n  }\r\n}\r\n\r\nexport const userStore = new UserStore();\r\n","export default function getDate(date) {\r\n    if (date) {\r\n        const thisDate = new Date(date.seconds * 1000);\r\n\r\n        let hours = thisDate.getHours();\r\n        if (hours < 10) {\r\n            hours = \"0\" + hours;\r\n        }\r\n\r\n        let minutes = thisDate.getMinutes();\r\n        if (minutes < 10) {\r\n            minutes = \"0\" + minutes;\r\n        }\r\n\r\n        const messageDate = `${hours}:${minutes}`;\r\n\r\n        return messageDate;\r\n    }\r\n}\r\n","import getDate from \"./get_date\";\r\n\r\nexport const getLastMessage = (dialogs, user) => {\r\n  let lastMessage = [];\r\n\r\n  dialogs.forEach((dialog) => {\r\n    if (dialog[0].dialog_id.includes(user.uid)) {\r\n      const lastIndex = dialog.length - 1;\r\n      lastMessage = dialog[lastIndex];\r\n    }\r\n  });\r\n\r\n  if (lastMessage.length !== 0) {\r\n    const date = getDate(lastMessage.date);\r\n    const newLastMessage = {\r\n      ...lastMessage,\r\n      date,\r\n    };\r\n    lastMessage = newLastMessage;\r\n  }\r\n\r\n  return lastMessage;\r\n};\r\n","import { collection, getDocs } from \"firebase/firestore\";\r\nimport { makeAutoObservable } from \"mobx\";\r\nimport { db } from \"../firebase\";\r\nimport { userStore } from \"./user.store\";\r\n\r\nclass ChatStore {\r\n  users = [];\r\n  loading = true;\r\n  error = false;\r\n  dialogs = [];\r\n  activeDialog = null;\r\n  searchedUsers = [];\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async getChats() {\r\n    const querySnapshop = await getDocs(collection(db, \"users\"));\r\n    const filteredUsers = querySnapshop.docs\r\n      .map((doc) => doc.data())\r\n      .filter((doc) => doc.uid !== userStore.user.uid);\r\n\r\n    this.serUsers(filteredUsers);\r\n    if (filteredUsers) {\r\n      this.getDialogs();\r\n    }\r\n  }\r\n\r\n  async getDialogs() {\r\n    const querySnapshop = await getDocs(collection(db, \"dialogs\"));\r\n    const allMessages = querySnapshop.docs.map((doc) => doc.data());\r\n    const authUserDialogs = [];\r\n\r\n    allMessages.forEach((message) => {\r\n      if (\r\n        message.messages[0] &&\r\n        message.messages[0]?.dialog_id.includes(userStore.user?.uid)\r\n      ) {\r\n        authUserDialogs.push(message.messages);\r\n      }\r\n    });\r\n\r\n    this.setDialogs(authUserDialogs);\r\n    if (allMessages) {\r\n      this.setLoading(false);\r\n    }\r\n  }\r\n\r\n  searchUsers(name) {\r\n    this.searchedUsers = this.users.filter((user) =>\r\n      user.name.toLowerCase().includes(name.toLowerCase())\r\n    );\r\n  }\r\n\r\n  setLoading(loading) {\r\n    this.loading = loading;\r\n  }\r\n\r\n  setError(error) {\r\n    this.error = error;\r\n  }\r\n\r\n  serUsers(users) {\r\n    this.searchedUsers = users;\r\n    this.users = users;\r\n  }\r\n  setDialogs(dialogs) {\r\n    this.dialogs = dialogs;\r\n  }\r\n}\r\n\r\nexport const chatStore = new ChatStore();\r\n","import { doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\";\r\nimport { makeAutoObservable } from \"mobx\";\r\nimport { db } from \"../firebase\";\r\nimport { userStore } from \"./user.store\";\r\n\r\nclass DialogStore {\r\n  activeDialog = null;\r\n  messages = [];\r\n  dialogId = null;\r\n  loading = false;\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async sendMessage(message) {\r\n    const dialogRef = doc(db, \"dialogs\", this.dialogId);\r\n    const docSnap = await getDoc(dialogRef);\r\n\r\n    if (docSnap.exists()) {\r\n      const docData = docSnap.data();\r\n      await updateDoc(dialogRef, {\r\n        messages: [...docData.messages, message],\r\n      });\r\n    } else {\r\n      await setDoc(doc(db, \"dialogs\", this.dialogId), {\r\n        messages: [message],\r\n      });\r\n    }\r\n  }\r\n\r\n  createDialogId() {\r\n    const user = userStore.user;\r\n    if (!this.activeDialog || !user) return;\r\n\r\n    let myDialogId = null;\r\n\r\n    if (this.activeDialog.uid > user.uid) {\r\n      myDialogId = this.activeDialog.uid + user.uid;\r\n    } else {\r\n      myDialogId = user.uid + this.activeDialog.uid;\r\n    }\r\n\r\n    this.setDialogId(myDialogId);\r\n    this.setLoading(false);\r\n  }\r\n\r\n  setActiveDialog(dialog) {\r\n    this.activeDialog = dialog;\r\n  }\r\n\r\n  setMessages(messages) {\r\n    this.messages = messages;\r\n  }\r\n\r\n  setDialogId(dialogId) {\r\n    this.dialogId = dialogId;\r\n  }\r\n\r\n  setLoading(loading) {\r\n    this.loading = loading;\r\n  }\r\n\r\n  setAll() {\r\n    this.dialogId = null;\r\n    this.activeDialog = null;\r\n    this.messages = [];\r\n  }\r\n}\r\n\r\nexport const dialogStore = new DialogStore();\r\n","import styles from \"./Dialog.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { getLastMessage } from \"../../../utils/getLastMessage\";\r\nimport { chatStore } from \"../../../store/chat.store\";\r\nimport { dialogStore } from \"../../../store/dialog.store\";\r\n\r\nconst Message = observer(({ user, dialogs }) => {\r\n  const authUser = userStore.user;\r\n  const [lastMessage, setLastMessage] = useState(\"-\");\r\n  const { name, uid, email, avatar } = user;\r\n\r\n  useEffect(() => {\r\n    const lastMessage = getLastMessage(dialogs, user);\r\n    setLastMessage(lastMessage);\r\n    chatStore.setLoading(false);\r\n  }, [dialogs, user]);\r\n\r\n  return (\r\n    <>\r\n      {lastMessage && lastMessage.length !== 0 ? (\r\n        <NavLink\r\n          to={routes.messages + `/${uid}`}\r\n          className={styles.messageContainer}\r\n          onClick={() =>\r\n            dialogStore.setActiveDialog({ email, uid, name, avatar })\r\n          }\r\n        >\r\n          <div className={styles.avatar}>\r\n            {user?.avatar && <img src={user.avatar} alt=\"\" />}\r\n          </div>\r\n\r\n          <div className={styles.info}>\r\n            <div className={styles.top}>\r\n              <div className={`${styles.userName} text-mw`}>{name}</div>\r\n              <div className={styles.date}>\r\n                {chatStore.loading\r\n                  ? null\r\n                  : lastMessage.length === 0\r\n                  ? null\r\n                  : lastMessage?.date}\r\n              </div>\r\n            </div>\r\n            <div className=\"text-mw\">\r\n              {chatStore.loading\r\n                ? \"Загрузка...\"\r\n                : lastMessage.length !== 0\r\n                ? lastMessage.uid === authUser.uid\r\n                  ? `Вы: ${lastMessage.message}`\r\n                  : lastMessage.message\r\n                : \"Сообщений не найдено\"}\r\n            </div>\r\n          </div>\r\n        </NavLink>\r\n      ) : null}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Message;\r\n","import s from \"./BodyComponent.module.css\";\r\n\r\nexport default function BodyComponent({ children }) {\r\n    return <div className={s.container}>{children}</div>;\r\n}\r\n","import \"./preloader.css\";\r\n\r\nexport default function Preloader() {\r\n    return (\r\n        <div className=\"preloader-wrapper\">\r\n            <div className=\"loadingio-spinner-spinner-sczevsac37c\">\r\n                <div className=\"ldio-cg0exsdxg3p\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import Dialog from \"../Dialog/Dialog\";\r\nimport BodyComponent from \"../../../components/Layout/Body/BodyComponent\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useEffect, useLayoutEffect } from \"react\";\r\nimport Preloader from \"../../../components/Preloader/Preloader\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { chatStore } from \"../../../store/chat.store\";\r\nimport { userStore } from \"../../../store/user.store\";\r\n\r\nconst Dialogs = observer(() => {\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    if (user) {\r\n      userStore.setUser(user);\r\n    } else {\r\n      history.push(\"/\");\r\n    }\r\n  }, [history]);\r\n\r\n  useLayoutEffect(() => {\r\n    chatStore.getChats();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <BodyComponent>\r\n        {chatStore.loading ? (\r\n          <Preloader />\r\n        ) : chatStore.dialogs.length !== 0 && chatStore.users.length !== 0 ? (\r\n          <>\r\n            {chatStore.users.map((user) => (\r\n              <Dialog key={user.uid} user={user} dialogs={chatStore.dialogs} />\r\n            ))}\r\n          </>\r\n        ) : (\r\n          <>\r\n            <div className=\"not-dialogs\">Сообщений не найдено</div>\r\n            <div className=\"to-search\">\r\n              <NavLink to={\"search\"}> К списку пользователей </NavLink>\r\n            </div>\r\n          </>\r\n        )}\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Dialogs;\r\n","import styles from \"./HeaderComponent.module.css\";\r\n\r\nexport default function HeaderComponent({ children }) {\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <div className={styles.container}>{children}</div>\r\n        </div>\r\n    );\r\n}\r\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./Header.module.css\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\n\r\nfunction Header() {\r\n    return (\r\n        <>\r\n            <HeaderComponent>\r\n                <NavLink to={routes.settings} className={styles.menuButton}>\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24px\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        width=\"24px\"\r\n                        fill=\"#000000\"\r\n                    >\r\n                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                        <path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\" />\r\n                    </svg>\r\n                </NavLink>\r\n\r\n                <div className=\"appTitle\">Memssenger</div>\r\n\r\n                <NavLink to={routes.search} className={styles.searchButton}>\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24px\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        width=\"24px\"\r\n                        fill=\"#000000\"\r\n                    >\r\n                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                        <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\r\n                    </svg>\r\n                </NavLink>\r\n            </HeaderComponent>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import Dialogs from \"./Dialogs/Dialogs\";\r\nimport Header from \"./Header/Header\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\n\r\nexport default function DialogsPage() {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <motion.div\r\n        initial={{ y: \"-100%\" }}\r\n        animate={{ y: \"0%\" }}\r\n        transition={{ easeInOut: 2 }}\r\n      >\r\n        <Dialogs />\r\n      </motion.div>\r\n    </>\r\n  );\r\n}\r\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./Header.module.css\";\r\n\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useHistory } from \"react-router\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { dialogStore } from \"../../../store/dialog.store\";\r\n\r\nconst Header = observer(() => {\r\n  const history = useHistory();\r\n  const dialog = dialogStore.activeDialog;\r\n  if (!dialog) {\r\n    history.push(routes.dialogs);\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <HeaderComponent>\r\n        <NavLink to={routes.dialogs} className={styles.backButton}>\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            height=\"24px\"\r\n            viewBox=\"0 0 24 24\"\r\n            width=\"24px\"\r\n            fill=\"#000000\"\r\n          >\r\n            <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n            <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n          </svg>\r\n        </NavLink>\r\n\r\n        <div className=\"appTitle text-mw\">{dialog.name}</div>\r\n\r\n        <div className={styles.userAvatar}>\r\n          <img src={dialog?.avatar} alt=\"\" />\r\n        </div>\r\n      </HeaderComponent>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Header;\r\n","import React, { useState } from \"react\";\r\nimport s from \"../Messages.module.css\";\r\nimport Picker from \"emoji-picker-react\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { dialogStore } from \"../../../store/dialog.store\";\r\n\r\nconst FormMessage = observer(() => {\r\n  const user = userStore.user;\r\n  const dialogId = dialogStore.dialogId;\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [emojiPopover, setEmojiPopover] = useState(false);\r\n\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    setNewMessage((e) => `${e} ${emojiObject.emoji}`);\r\n  };\r\n\r\n  const sendMessage = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const message = newMessage;\r\n    if (message?.trim().length) {\r\n      const myMessage = {\r\n        message: message,\r\n        uid: user.uid,\r\n        date: new Date(),\r\n        dialog_id: dialogId,\r\n        name: user.name,\r\n      };\r\n\r\n      setNewMessage(\"\");\r\n      dialogStore.sendMessage(myMessage);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.wrapper}>\r\n      <div className={s.formWrapper}>\r\n        <form\r\n          className={s.form}\r\n          onSubmit={(event) => {\r\n            sendMessage(event);\r\n            setEmojiPopover(false);\r\n          }}\r\n        >\r\n          <input\r\n            value={newMessage}\r\n            onChange={(e) => setNewMessage(e.target.value)}\r\n            className={s.input}\r\n            type=\"text\"\r\n            placeholder=\"Сообщение\"\r\n          />\r\n\r\n          <div\r\n            onClick={() => setEmojiPopover(!emojiPopover)}\r\n            className=\"emoji-button\"\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              height=\"24px\"\r\n              viewBox=\"0 0 24 24\"\r\n              width=\"24px\"\r\n              fill=\"#383838\"\r\n            >\r\n              <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n              <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z\" />\r\n            </svg>\r\n\r\n            {emojiPopover ? (\r\n              <div\r\n                onClick={(e) => e.stopPropagation()}\r\n                className=\"emoji-popover\"\r\n              >\r\n                <Picker\r\n                  disableAutoFocus\r\n                  pickerStyle={{\r\n                    boxShadow: \"none\",\r\n                  }}\r\n                  onEmojiClick={onEmojiClick}\r\n                />\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n\r\n          <button className={s.send}>\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 24 24\"\r\n              width=\"24px\"\r\n              fill=\"#000000\"\r\n            >\r\n              <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n              <path d=\"M4.01 6.03l7.51 3.22-7.52-1 .01-2.22m7.5 8.72L4 17.97v-2.22l7.51-1M2.01 3L2 10l15 2-15 2 .01 7L23 12 2.01 3z\" />\r\n            </svg>\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default FormMessage;\r\n","import s from \"../Messages.module.css\";\r\nimport getDate from \"../../../utils/get_date\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\n\r\nexport default function Message({ message, uid, userUid, date }) {\r\n  const messageDate = getDate(date);\r\n\r\n  const initialPosition = uid === userUid ? \"100%\" : \"-100%\";\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ x: initialPosition }}\r\n      animate={{ x: \"0%\" }}\r\n      transition={{ easeInOut: 2 }}\r\n      className={s.messageContainer}\r\n      style={{\r\n        justifyContent: uid === userUid && \"flex-end\",\r\n        textAlign: uid === userUid && \"right\",\r\n      }}\r\n    >\r\n      <div className={s.message}>\r\n        <span className={s.messageText}>{message}</span>\r\n        {date ? <span className={s.messageDate}> {messageDate} </span> : null}\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport s from \"../Messages.module.css\";\r\nimport Message from \"../Message/Message\";\r\nimport ScrollableFeed from \"react-scrollable-feed\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { dialogStore } from \"../../../store/dialog.store\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport useInnerHeight from \"../../../hooks/useInnerHeight\";\r\n\r\nconst MessagesWrapper = observer(() => {\r\n  const user = userStore.user;\r\n  const headerHeight = 168;\r\n  const innerHeight = useInnerHeight();\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        layout\r\n        className={s.messagesWrapper}\r\n        style={{ height: innerHeight - headerHeight + \"px\" }}\r\n      >\r\n        <ScrollableFeed className=\"x-hidden\">\r\n          {dialogStore.messages.map(({ message, uid, date }, i) => (\r\n            <Message\r\n              key={`message_key_${i}`}\r\n              message={message}\r\n              userUid={user.uid}\r\n              uid={uid}\r\n              date={date}\r\n            ></Message>\r\n          ))}\r\n        </ScrollableFeed>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default MessagesWrapper;\r\n","import { useLayoutEffect, useState } from \"react\";\r\n\r\nexport default function useInnerHeight() {\r\n  const [innerHeight, setInnerHeight] = useState(window.innerHeight);\r\n\r\n  useLayoutEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setInnerHeight(window.innerHeight);\r\n    }, 500);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return innerHeight;\r\n}\r\n","import Header from \"./Header/Header\";\r\nimport BodyComponent from \"../../components/Layout/Body/BodyComponent\";\r\nimport FormMessage from \"./FormMessage/FormMessage\";\r\nimport MessagesWrapper from \"./MessagesWrapper/MessagesWrapper\";\r\nimport { useEffect } from \"react\";\r\nimport { db } from \"../../firebase\";\r\nimport { doc, onSnapshot } from \"@firebase/firestore\";\r\nimport Preloader from \"../../components/Preloader/Preloader\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { dialogStore } from \"../../store/dialog.store\";\r\n\r\nconst Messages = observer(() => {\r\n  useEffect(() => {\r\n    dialogStore.createDialogId();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!dialogStore.dialogId) return;\r\n\r\n    const unsub = onSnapshot(\r\n      doc(db, \"dialogs\", dialogStore.dialogId),\r\n      (doc) => {\r\n        const currentData = doc.data();\r\n\r\n        if (currentData) {\r\n          if (currentData.messages.length > 0) {\r\n            dialogStore.setMessages(currentData.messages);\r\n          }\r\n        } else {\r\n          dialogStore.setMessages([]);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      unsub();\r\n      dialogStore.setAll();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n\r\n      <BodyComponent>\r\n        {dialogStore.loading ? <Preloader /> : <MessagesWrapper />}\r\n\r\n        <FormMessage />\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n});\r\nexport default Messages;\r\n","import styles from \"./Header.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useRef } from \"react\";\r\n\r\nfunction Header({ searchUsers }) {\r\n    const searchRef = useRef();\r\n\r\n    const onChange = () => {\r\n        searchUsers(searchRef);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <HeaderComponent>\r\n                <NavLink to={routes.dialogs} className={styles.backButton}>\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24px\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        width=\"24px\"\r\n                        fill=\"#000000\"\r\n                    >\r\n                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                        <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n                    </svg>\r\n                </NavLink>\r\n\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Поиск\"\r\n                    className={styles.input}\r\n                    onChange={onChange}\r\n                    ref={searchRef}\r\n                />\r\n            </HeaderComponent>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../../routes/routes\";\r\nimport { dialogStore } from \"../../../../store/dialog.store\";\r\nimport styles from \"./LastItem.module.css\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\n\r\nfunction LastItem({ user }) {\r\n  const { name, uid, email, avatar } = user;\r\n\r\n  return (\r\n    <motion.div layout>\r\n      <NavLink\r\n        to={routes.messages + `/${user.uid}`}\r\n        onClick={() =>\r\n          dialogStore.setActiveDialog({ email, uid, name, avatar })\r\n        }\r\n      >\r\n        <div className={styles.container}>\r\n          <div className={styles.avatar}>\r\n            <img src={user.avatar ? user.avatar : null} alt=\"\" />\r\n          </div>\r\n          <div className={styles.info}>\r\n            <div className={`${styles.title} text-mw`}> {user.name} </div>\r\n            <div className={`${styles.date} text-mw`}> {user.email} </div>\r\n          </div>\r\n        </div>\r\n      </NavLink>\r\n    </motion.div>\r\n  );\r\n}\r\nexport default LastItem;\r\n","import BodyComponent from \"../../../components/Layout/Body/BodyComponent\";\r\nimport LastItem from \"./LastItem/LastItem\";\r\n\r\nfunction LastList({ users }) {\r\n  return (\r\n    <BodyComponent>\r\n      {users.length !== 0 ? (\r\n        users.map((user) => <LastItem key={user.uid} user={user} />)\r\n      ) : (\r\n        <div className=\"not-dialogs\">Пользователей не найдено</div>\r\n      )}\r\n    </BodyComponent>\r\n  );\r\n}\r\nexport default LastList;\r\n","import { observer } from \"mobx-react-lite\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { chatStore } from \"../../store/chat.store\";\r\nimport Header from \"./Header/Header\";\r\nimport LastList from \"./LastList/LastList\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\n\r\nconst SearchPage = observer(() => {\r\n  const history = useHistory();\r\n\r\n  if (!localStorage.getItem(\"user\") || chatStore.users.length === 0) {\r\n    history.push(\"/\");\r\n  }\r\n\r\n  const searchUsers = async (searchRef) => {\r\n    const searchInput = searchRef.current.value;\r\n    chatStore.searchUsers(searchInput);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header searchUsers={searchUsers} />\r\n      <motion.div\r\n        initial={{ x: \"100%\" }}\r\n        animate={{ x: \"0%\" }}\r\n        transition={{ easeInOut: 1 }}\r\n      >\r\n        <LastList users={chatStore.searchedUsers} />\r\n      </motion.div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default SearchPage;\r\n","import styles from \"./Header.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\n\r\nexport default function Header() {\r\n    return (\r\n        <HeaderComponent>\r\n            <NavLink to=\"/im\" className={styles.backButton}>\r\n                <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    height=\"24px\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    width=\"24px\"\r\n                    fill=\"#000000\"\r\n                >\r\n                    <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                    <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n                </svg>\r\n            </NavLink>\r\n\r\n            <div>Настройки</div>\r\n\r\n            <NavLink to=\"/search\" className={styles.searchButton}>\r\n                <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    height=\"24px\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    width=\"24px\"\r\n                    fill=\"#000000\"\r\n                >\r\n                    <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                    <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\r\n                </svg>\r\n            </NavLink>\r\n        </HeaderComponent>\r\n    );\r\n}\r\n","import s from \"./EditName.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useRef } from \"react\";\r\nimport { userStore } from \"../../../store/user.store\";\r\n\r\nexport default function EditName({ setModal }) {\r\n  return ReactDOM.createPortal(<Modal setModal={setModal} />, document.body);\r\n}\r\n\r\nfunction Modal({ setModal }) {\r\n  const newName = useRef(null);\r\n\r\n  const onClickHandler = async (event) => {\r\n    const myName = newName.current.value.trim();\r\n\r\n    if (myName.length > 0) {\r\n      const newUser = await userStore.editUserName(myName);\r\n      if (newUser !== undefined) {\r\n        localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n      }\r\n    }\r\n    setModal(false);\r\n  };\r\n\r\n  const onClose = (event) => {\r\n    event.stopPropagation();\r\n\r\n    if (event.target.dataset.close === \"close\") {\r\n      setModal(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.modal} data-close=\"close\" onClick={onClose}>\r\n      <div className={s.modalContent}>\r\n        <div className={s.form}>\r\n          <input\r\n            autoFocus\r\n            ref={newName}\r\n            placeholder=\"Введите имя\"\r\n            type=\"text\"\r\n          />\r\n          <button onClick={onClickHandler}>Сохранить</button>\r\n        </div>\r\n\r\n        <button onClick={onClose} data-close=\"close\" className={s.close}>\r\n          Отменить\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import s from \"./../EditName/EditName.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport { useState } from \"react\";\r\nimport { userStore } from \"../../../store/user.store\";\r\n\r\nexport default function EditAvatar({ setModal }) {\r\n  return ReactDOM.createPortal(<Modal setModal={setModal} />, document.body);\r\n}\r\n\r\nfunction Modal({ setModal }) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const user = userStore.user;\r\n\r\n  const onChange = async (event) => {\r\n    setIsLoading(true);\r\n    event.preventDefault();\r\n\r\n    const file = event.target.files[0];\r\n    await getAvatarUrl(file);\r\n  };\r\n\r\n  const getAvatarUrl = async (file) => {\r\n    if (file.size > 1024 * 1024 * 10) {\r\n      alert(\"Размер изображения слишком большой\");\r\n      setModal(false);\r\n    } else if (\r\n      file.type !== \"image/png\" &&\r\n      file.type !== \"image/jpg\" &&\r\n      file.type !== \"image/jpeg\"\r\n    ) {\r\n      console.log(file.type !== \"image/png\");\r\n      alert(\"Можно загружать только изображения (png/jpg/jpeg)\");\r\n      setModal(false);\r\n    } else {\r\n      const avatarName = user.uid + \"_avatar\";\r\n      const storage = getStorage();\r\n      const storageRef = ref(storage, avatarName);\r\n\r\n      await uploadBytes(storageRef, file).then(() => {\r\n        getDownloadURL(ref(storage, avatarName))\r\n          .then(async (url) => {\r\n            const avatarUrl = url;\r\n\r\n            const newUser = await userStore.editUserAvatar(avatarUrl);\r\n\r\n            if (newUser !== undefined) {\r\n              localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n            }\r\n            setModal(false);\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n      });\r\n    }\r\n  };\r\n\r\n  const onClose = (event) => {\r\n    event.stopPropagation();\r\n    if (event.target.dataset.close === \"close\") {\r\n      setModal(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.modal} data-close=\"close\" onClick={onClose}>\r\n      <div className={s.modalContent}>\r\n        <form onChange={onChange} className={s.form}>\r\n          {!isLoading && (\r\n            <>\r\n              <label className={s.labelAvatar} htmlFor=\"avatar\">\r\n                Выберите файл\r\n              </label>\r\n\r\n              <input className={s.inputAvatar} type=\"file\" id=\"avatar\" />\r\n            </>\r\n          )}\r\n\r\n          {isLoading && <div className={s.labelAvatar}>loading...</div>}\r\n        </form>\r\n\r\n        {!isLoading && (\r\n          <button onClick={onClose} data-close=\"close\" className={s.close}>\r\n            Отменить\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import s from \"./Alert.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function Alert({ message, closeAlert }) {\r\n    return ReactDOM.createPortal(\r\n        <Modal message={message} closeAlert={closeAlert} />,\r\n        document.body\r\n    );\r\n}\r\n\r\nfunction Modal({ message, closeAlert }) {\r\n    const [isClosed, setIsClosed] = useState(false);\r\n\r\n    setTimeout(() => {\r\n        setIsClosed(true);\r\n    }, 4000);\r\n\r\n    if (closeAlert) {\r\n        setTimeout(() => {\r\n            closeAlert(false);\r\n        }, 4300);\r\n    }\r\n\r\n    return (\r\n        <div className={isClosed ? s.alert + \" \" + s.close : s.alert}>\r\n            <div className={s.container}>{message}</div>\r\n        </div>\r\n    );\r\n}\r\n","import { useHistory } from \"react-router\";\r\nimport BodyComponent from \"../../../components/Layout/Body/BodyComponent\";\r\nimport s from \"./SettingsContainer.module.css\";\r\nimport { useEffect } from \"react\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useState } from \"react\";\r\nimport EditName from \"../../../components/Modals/EditName/EditName\";\r\nimport EditAvatar from \"../../../components/Modals/EditAvatar/EditAvatar\";\r\nimport Alert from \"../../../components/Alert/Alert\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nconst SettingsContainer = observer(() => {\r\n  const user = userStore.user;\r\n\r\n  const [editNameModal, setEditNameModal] = useState(false);\r\n  const [editAvatarModal, setEditAvatarModal] = useState(false);\r\n  const [showAlert, setAlert] = useState(false);\r\n  const [alertText, setAlertText] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const logout = () => {\r\n    localStorage.setItem(\"user\", null);\r\n    userStore.setUser(null);\r\n    history.push(routes.login);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    if (user) {\r\n      userStore.setUser(user);\r\n    }\r\n  }, []);\r\n\r\n  const showEditNameModal = () => {\r\n    setEditNameModal(true);\r\n  };\r\n\r\n  const showEditAvatarModal = () => {\r\n    setEditAvatarModal(true);\r\n  };\r\n\r\n  const saveToBuffer = async () => {\r\n    const copyText =\r\n      \"Привет, я использую Memssenger для общения с друзьями. Присоединяйся по ссылке: https://ozcnii.github.io/memssenger\";\r\n    try {\r\n      await navigator.clipboard.writeText(copyText);\r\n      const alertText = \"Пригласительное сообщение скопировано в буфер обмена\";\r\n      setAlertText(alertText);\r\n      setAlert(true);\r\n    } catch (e) {\r\n      const alertText =\r\n        \"Произошла ошибка во время копирования пригласительного сообщения\";\r\n      setAlertText(alertText);\r\n      setAlert(true);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      {editNameModal && <EditName setModal={setEditNameModal} />}\r\n\r\n      {editAvatarModal && <EditAvatar setModal={setEditAvatarModal} />}\r\n      {showAlert && <Alert message={alertText} closeAlert={setAlert} />}\r\n\r\n      <BodyComponent>\r\n        {user ? (\r\n          <>\r\n            <div className={s.main}>\r\n              <div className={s.top}>\r\n                <div className={s.avatar}>\r\n                  {user?.avatar && <img src={user.avatar} alt=\"\" />}\r\n                </div>\r\n\r\n                <div className={s.info}>\r\n                  <div className={`${s.userName} text-mw-100`}>\r\n                    {user.name}{\" \"}\r\n                  </div>\r\n                  <div className=\"text-mw-100\">{user.email}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className={s.settings}>\r\n              <div className={s.edit} onClick={showEditAvatarModal}>\r\n                <div className={s.icon}>\r\n                  <svg\r\n                    aria-hidden=\"true\"\r\n                    focusable=\"false\"\r\n                    data-prefix=\"fas\"\r\n                    data-icon=\"user-astronaut\"\r\n                    role=\"img\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 448 512\"\r\n                  >\r\n                    <path\r\n                      fill=\"currentColor\"\r\n                      d=\"M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z\"\r\n                    ></path>\r\n                  </svg>\r\n                </div>\r\n                <span>Изменить аватар </span>\r\n              </div>\r\n\r\n              <div className={s.edit} onClick={showEditNameModal}>\r\n                <div className={s.icon}>\r\n                  <svg\r\n                    aria-hidden=\"true\"\r\n                    focusable=\"false\"\r\n                    data-prefix=\"far\"\r\n                    data-icon=\"edit\"\r\n                    role=\"img\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 576 512\"\r\n                  >\r\n                    <path\r\n                      fill=\"currentColor\"\r\n                      d=\"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z\"\r\n                    ></path>\r\n                  </svg>\r\n                </div>\r\n                <span>Изменить имя</span>\r\n              </div>\r\n\r\n              <a\r\n                href=\"https://github.com/ttenapp/memssenger\"\r\n                target=\"blank\"\r\n                className={s.edit}\r\n              >\r\n                <div className={s.icon}>\r\n                  <svg\r\n                    aria-hidden=\"true\"\r\n                    focusable=\"false\"\r\n                    data-prefix=\"fas\"\r\n                    data-icon=\"question\"\r\n                    role=\"img\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 384 512\"\r\n                  >\r\n                    <path\r\n                      fill=\"currentColor\"\r\n                      d=\"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z\"\r\n                    ></path>\r\n                  </svg>\r\n                </div>\r\n                <span>Информация</span>\r\n              </a>\r\n\r\n              <div className={s.edit} onClick={saveToBuffer}>\r\n                <div className={s.icon}>\r\n                  <svg\r\n                    aria-hidden=\"true\"\r\n                    focusable=\"false\"\r\n                    data-prefix=\"fas\"\r\n                    data-icon=\"user-friends\"\r\n                    role=\"img\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 640 512\"\r\n                  >\r\n                    <path\r\n                      fill=\"currentColor\"\r\n                      d=\"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z\"\r\n                    ></path>\r\n                  </svg>\r\n                </div>\r\n                <span>Пригласить друзей</span>\r\n              </div>\r\n\r\n              <div className={s.edit + \" \" + s.last} onClick={logout}>\r\n                <div className={s.icon}>\r\n                  <svg\r\n                    aria-hidden=\"true\"\r\n                    focusable=\"false\"\r\n                    data-prefix=\"fas\"\r\n                    data-icon=\"sign-out-alt\"\r\n                    role=\"img\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 512 512\"\r\n                  >\r\n                    <path\r\n                      fill=\"currentColor\"\r\n                      d=\"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z\"\r\n                    ></path>\r\n                  </svg>\r\n                </div>\r\n                <span>Выход</span>\r\n              </div>\r\n            </div>\r\n          </>\r\n        ) : null}\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default SettingsContainer;\r\n","import Header from \"./Header/Header\";\r\nimport SettingsContainer from \"./SettingsContainer/SettingContainer\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\n\r\nexport default function SettingsPage() {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <motion.div\r\n        initial={{ x: \"-100%\" }}\r\n        animate={{ x: \"0%\" }}\r\n        transition={{ easeInOut: 2 }}\r\n      >\r\n        <SettingsContainer />\r\n      </motion.div>\r\n    </>\r\n  );\r\n}\r\n","import s from \"./LoginPage.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../routes/routes\";\r\nimport { useRef, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Alert from \"../../components/Alert/Alert\";\r\nimport { userStore } from \"../../store/user.store\";\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nconst LoginPage = observer(() => {\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [alertText, setAlertText] = useState(null);\r\n\r\n  const history = useHistory();\r\n  const email = useRef(null);\r\n  const password = useRef(null);\r\n\r\n  const login = async (event) => {\r\n    event.preventDefault();\r\n    const myEmail = email.current.value.trim();\r\n    const myPassword = password.current.value.trim();\r\n\r\n    if (myEmail && myPassword) {\r\n      try {\r\n        const newUser = await userStore.login(myEmail, myPassword);\r\n        if (newUser !== undefined) {\r\n          localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n        }\r\n        history.push(routes.dialogs);\r\n      } catch (error) {\r\n        setAlertText(error.message);\r\n        setShowAlert(true);\r\n      }\r\n    } else {\r\n      const text = \"Все поля должны быыть заполнены\";\r\n      setAlertText(text);\r\n      setShowAlert(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    if (user) {\r\n      userStore.setUser(user);\r\n      history.push(routes.dialogs);\r\n    }\r\n  }, [history]);\r\n\r\n  return (\r\n    <>\r\n      {showAlert && <Alert message={alertText} closeAlert={setShowAlert} />}\r\n\r\n      <div className={s.container}>\r\n        <div className={s.title}>Вход</div>\r\n\r\n        <form onSubmit={login} className={s.form}>\r\n          <input\r\n            ref={email}\r\n            type=\"text\"\r\n            placeholder=\"Эл. адрес\"\r\n            className={s.login}\r\n          />\r\n\r\n          <input\r\n            ref={password}\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            className={s.password}\r\n          />\r\n\r\n          <button type=\"submit\" className={s.submit}>\r\n            {userStore.loading ? \"Загрузка...\" : \"Войти\"}\r\n          </button>\r\n\r\n          <div>\r\n            <NavLink to={routes.registr} className={s.registr}>\r\n              Регистрация\r\n            </NavLink>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default LoginPage;\r\n","import s from \"../LoginPage.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useRef, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Alert from \"../../../components/Alert/Alert\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nconst RegistrationPage = observer(({ setUser }) => {\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [alertText, setAlertText] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const email = useRef(null);\r\n  const password = useRef(null);\r\n  const confirmPassword = useRef(null);\r\n  const userName = useRef(null);\r\n\r\n  const register = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const myEmail = email.current.value.trim();\r\n    const myPassword = password.current.value.trim();\r\n    const myConfirmPassword = confirmPassword.current.value.trim();\r\n    const myName = userName.current.value.trim();\r\n\r\n    if (\r\n      myEmail &&\r\n      myPassword &&\r\n      myName &&\r\n      myConfirmPassword &&\r\n      myPassword === myConfirmPassword\r\n    ) {\r\n      try {\r\n        const newUser = await userStore.register(myEmail, myPassword, myName);\r\n        if (newUser !== undefined) {\r\n          localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n        }\r\n\r\n        history.push(\"/chat\");\r\n      } catch (error) {\r\n        const text = error.message;\r\n        setAlertText(text);\r\n        setShowAlert(true);\r\n      }\r\n    } else if (myPassword !== myConfirmPassword) {\r\n      const text = \"Пароли не совпадают\";\r\n      setAlertText(text);\r\n      setShowAlert(true);\r\n    } else {\r\n      const text = \"Все поля должны быыть заполнены\";\r\n      setAlertText(text);\r\n      setShowAlert(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    if (user) {\r\n      setUser(user);\r\n      history.push(routes.dialogs);\r\n    }\r\n  }, [history, setUser]);\r\n\r\n  return (\r\n    <>\r\n      {showAlert && <Alert message={alertText} closeAlert={setShowAlert} />}\r\n\r\n      <div className={s.container}>\r\n        <div className={s.title}>Регистрация</div>\r\n\r\n        <form onSubmit={register} className={s.form}>\r\n          <input\r\n            type=\"text\"\r\n            ref={email}\r\n            placeholder=\"Эл. адрес\"\r\n            className={s.login}\r\n          />\r\n\r\n          <input\r\n            type=\"text\"\r\n            ref={password}\r\n            placeholder=\"Пароль\"\r\n            className={s.password}\r\n          />\r\n\r\n          <input\r\n            type=\"text\"\r\n            ref={confirmPassword}\r\n            placeholder=\"Подтвердите пароль\"\r\n            className={s.passwordConfirm}\r\n          />\r\n\r\n          <input\r\n            type=\"text\"\r\n            ref={userName}\r\n            placeholder=\"Введите ваше имя\"\r\n            className={s.passwordConfirm}\r\n          />\r\n\r\n          <button type=\"submit\" className={s.submit}>\r\n            {userStore.loading ? \"Загрузка...\" : \"Регистрация\"}\r\n          </button>\r\n\r\n          <div>\r\n            <NavLink to={routes.login} className={s.logIn}>\r\n              Войти\r\n            </NavLink>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default RegistrationPage;\r\n","import { Route, Switch, Redirect, HashRouter } from \"react-router-dom\";\r\nimport routes from \"./routes/routes\";\r\nimport DialogsPage from \"./pages/DialogsPage\";\r\nimport Messages from \"./pages/MessagePage\";\r\nimport SearchPage from \"./pages/SearchPage\";\r\nimport SettingsPage from \"./pages/SettingsPage\";\r\nimport LoginPage from \"./pages/LoginPage\";\r\nimport RegistrationPage from \"./pages/LoginPage/RegistrationPage/RegistrationPage\";\r\n\r\nfunction App() {\r\n  return (\r\n    <HashRouter>\r\n      <div className=\"header-background\"></div>\r\n\r\n      <Switch>\r\n        <Route exact path=\"/\" render={() => <Redirect to={routes.login} />} />\r\n        <Route path={routes.dialogs} render={() => <DialogsPage />} />\r\n\r\n        <Route path={routes.messages + \"/:id\"} render={() => <Messages />} />\r\n        <Route path={routes.settings} render={() => <SettingsPage />} />\r\n        <Route path={routes.search} render={() => <SearchPage />} />\r\n\r\n        <Route path={routes.login} render={() => <LoginPage />} />\r\n        <Route path={routes.registr} render={() => <RegistrationPage />} />\r\n\r\n        <Route path=\"*\" render={() => <Redirect to={routes.dialogs} />} />\r\n      </Switch>\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { StrictMode } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n    <StrictMode>\r\n        <App />\r\n    </StrictMode>,\r\n    rootElement\r\n);\r\n"],"sourceRoot":""}