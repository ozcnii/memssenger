{"version":3,"sources":["pages/LoginPage/LoginPage.module.css","pages/SettingsPage/SettingsContainer/SettingsContainer.module.css","pages/MessagePage/Messages.module.css","components/Modals/EditName/EditName.module.css","pages/DialogsPage/Dialog/Dialog.module.css","pages/SearchPage/LastList/LastItem/LastItem.module.css","components/Alert/Alert.module.css","pages/DialogsPage/Header/Header.module.css","components/Layout/Header/HeaderComponent.module.css","pages/MessagePage/Header/Header.module.css","pages/SearchPage/Header/Header.module.css","pages/SettingsPage/Header/Header.module.css","components/Layout/Body/BodyComponent.module.css","routes/routes.js","firebase.js","store/user.store.js","utils/get_date.js","utils/getLastMessage.js","store/chat.store.js","store/dialog.store.js","pages/DialogsPage/Dialog/Dialog.jsx","components/Preloader/Preloader.jsx","pages/DialogsPage/Dialogs/Dialogs.jsx","components/Layout/Header/HeaderComponent.jsx","pages/DialogsPage/Header/Header.jsx","components/Layout/Body/BodyComponent.jsx","pages/DialogsPage/index.jsx","pages/MessagePage/Header/Header.jsx","pages/MessagePage/FormMessage/FormMessage.jsx","pages/MessagePage/Message/Message.jsx","pages/MessagePage/MessagesWrapper/MessagesWrapper.jsx","hooks/useInnerHeight.js","pages/MessagePage/index.jsx","pages/SearchPage/Header/Header.jsx","pages/SearchPage/LastList/LastItem/LastItem.jsx","pages/SearchPage/LastList/LastList.jsx","pages/SearchPage/index.jsx","pages/SettingsPage/Header/Header.jsx","components/Modals/EditName/EditName.jsx","components/Modals/EditAvatar/EditAvatar.jsx","components/Alert/Alert.jsx","pages/SettingsPage/SettingsContainer/SettingContainer.jsx","pages/SettingsPage/index.jsx","pages/LoginPage/index.jsx","pages/LoginPage/RegistrationPage/RegistrationPage.jsx","App.jsx","index.jsx"],"names":["module","exports","routes","dialogs","messages","settings","search","login","registr","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","auth","getAuth","userStore","user","loading","error","makeAutoObservable","this","name","a","userId","userRef","collection","q","query","where","uid","getDocs","forEach","doc","id","nameRef","updateDoc","setUser","avatarUrl","docID","avatarRef","avatar","setLoading","myEmail","myPassword","signInWithEmailAndPassword","responseFromAuth","myName","myAvatar","data","email","createUserWithEmailAndPassword","addDoc","getDate","date","thisDate","Date","seconds","hours","getHours","minutes","getMinutes","chatStore","users","activeDialog","searchedUsers","querySnapshop","filteredUsers","docs","map","filter","serUsers","getDialogs","allMessages","authUserDialogs","message","dialog_id","includes","push","s","sort","b","aLastIndex","length","setDialogs","toLowerCase","dialogStore","dialogId","dialogRef","getDoc","docSnap","exists","docData","setDoc","myDialogId","setDialogId","dialog","Message","observer","authUser","useState","lastMessage","setLastMessage","useMemo","useLayoutEffect","time","getLastMessage","to","className","styles","messageContainer","onClick","setActiveDialog","src","alt","info","top","userName","Preloader","Dialogs","history","useHistory","useEffect","JSON","parse","localStorage","getItem","getChats","Dialog","HeaderComponent","children","wrapper","container","Header","menuButton","xmlns","height","viewBox","width","fill","d","searchButton","BodyComponent","DialogsPage","div","initial","opacity","scale","y","animate","backButton","userAvatar","FormMessage","newMessage","setNewMessage","emojiPopover","setEmojiPopover","sendMessage","event","preventDefault","trim","myMessage","formWrapper","form","onSubmit","value","onChange","e","target","input","type","placeholder","stopPropagation","pickerStyle","boxShadow","onEmojiClick","emojiObject","emoji","send","userUid","messageDate","initialPosition","x","style","justifyContent","textAlign","messageText","MessagesWrapper","innerHeight","window","setInnerHeight","interval","setInterval","clearInterval","useInnerHeight","layout","messagesWrapper","i","Messages","createDialogId","unsub","onSnapshot","currentData","setMessages","setAll","searchUsers","searchRef","useRef","ref","LastItem","title","LastList","SearchPage","searchInput","current","EditName","setModal","ReactDOM","createPortal","Modal","document","body","newName","onClickHandler","editUserName","undefined","newUser","setItem","stringify","onClose","dataset","close","modal","data-close","modalContent","autoFocus","EditAvatar","isLoading","setIsLoading","file","files","getAvatarUrl","size","alert","console","log","avatarName","storage","getStorage","storageRef","uploadBytes","then","getDownloadURL","url","editUserAvatar","catch","labelAvatar","htmlFor","inputAvatar","Alert","closeAlert","isClosed","setIsClosed","showTimeout","setTimeout","closeTimeout","clearTimeout","SettingsContainer","editNameModal","setEditNameModal","editAvatarModal","setEditAvatarModal","showAlert","setAlert","alertText","setAlertText","saveToBuffer","navigator","clipboard","writeText","main","edit","icon","aria-hidden","focusable","data-prefix","data-icon","role","href","last","SettingsPage","LoginPage","setShowAlert","password","submit","RegistrationPage","confirmPassword","register","myConfirmPassword","text","passwordConfirm","logIn","App","exact","path","render","rootElement","getElementById"],"mappings":"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","file":"static/js/main.ffe48259.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LoginPage_container__1_7A_\",\"title\":\"LoginPage_title__36gIY\",\"form\":\"LoginPage_form__2tDt-\",\"login\":\"LoginPage_login__ukfLg\",\"password\":\"LoginPage_password__2VEXY\",\"passwordConfirm\":\"LoginPage_passwordConfirm__ZV9we\",\"submit\":\"LoginPage_submit__3pefJ\",\"google\":\"LoginPage_google__3MWI1\",\"facebook\":\"LoginPage_facebook__1ruEM\",\"registr\":\"LoginPage_registr__q3Vfb\",\"logIn\":\"LoginPage_logIn__23L1w\",\"googleIcon\":\"LoginPage_googleIcon__2Yu9T\",\"fbIcon\":\"LoginPage_fbIcon__2KwK4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"SettingsContainer_header__1SpYu\",\"top\":\"SettingsContainer_top__1PV1F\",\"avatar\":\"SettingsContainer_avatar__3HayJ\",\"info\":\"SettingsContainer_info__3d2FW\",\"userName\":\"SettingsContainer_userName___kndz\",\"edit\":\"SettingsContainer_edit__9j_1Y\",\"icon\":\"SettingsContainer_icon__3RiIu\",\"last\":\"SettingsContainer_last__7mO_O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Messages_wrapper__1gvJC\",\"formWrapper\":\"Messages_formWrapper__hpS5f\",\"messages\":\"Messages_messages__1YLcP\",\"form\":\"Messages_form__1qD7o\",\"input\":\"Messages_input__2GqLB\",\"send\":\"Messages_send__8YIaL\",\"messagesWrapper\":\"Messages_messagesWrapper__1Hqdq\",\"messageContainer\":\"Messages_messageContainer__3TvVx\",\"message\":\"Messages_message__3weM9\",\"messageDate\":\"Messages_messageDate__3BD3V\",\"noMessages\":\"Messages_noMessages__2BWgq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"EditName_modal__2LJka\",\"modalContent\":\"EditName_modalContent__3htUp\",\"form\":\"EditName_form__37cQl\",\"close\":\"EditName_close__pchS3\",\"inputAvatar\":\"EditName_inputAvatar__3lZIC\",\"labelAvatar\":\"EditName_labelAvatar__OMG1k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageContainer\":\"Dialog_messageContainer__2Ev8r\",\"avatar\":\"Dialog_avatar__1_os3\",\"info\":\"Dialog_info__1GD89\",\"top\":\"Dialog_top__2uXh2\",\"date\":\"Dialog_date__bxesN\",\"userName\":\"Dialog_userName__1-CQ1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LastItem_container__2-nyf\",\"avatar\":\"LastItem_avatar__2asVG\",\"info\":\"LastItem_info__OLwhu\",\"date\":\"LastItem_date__2exj-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"Alert_alert__1rkHi\",\"show\":\"Alert_show__1Z3JK\",\"wrapper\":\"Alert_wrapper__1KEZd\",\"container\":\"Alert_container__3N0Do\",\"close\":\"Alert_close__JOcz2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuButton\":\"Header_menuButton__359Sw\",\"searchButton\":\"Header_searchButton__8uA4v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HeaderComponent_container__3IQED\",\"wrapper\":\"HeaderComponent_wrapper__2MVFD\",\"App-header\":\"HeaderComponent_App-header__3CfwK\",\"App-link\":\"HeaderComponent_App-link__34TTV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backButton\":\"Header_backButton__dAJoJ\",\"userAvatar\":\"Header_userAvatar__rWy97\",\"container\":\"Header_container__3k8dW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backButton\":\"Header_backButton__26Q1B\",\"container\":\"Header_container__enFS8\",\"input\":\"Header_input__10jd2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3FHhu\",\"backButton\":\"Header_backButton__1WwS9\",\"searchButton\":\"Header_searchButton__3FcrP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BodyComponent_container__1DXJL\"};","const routes = {\r\n    dialogs: \"/dialogs\",\r\n    messages: \"/im\",\r\n    settings: \"/settings\",\r\n    search: \"/search\",\r\n    login: \"/login\",\r\n    registr: \"/register\",\r\n};\r\n\r\nexport default routes;\r\n","// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAtz3-Jp3MsxNLBujPPCLcwUJm6YpPyGQg\",\r\n    authDomain: \"memssenger-c0d86.firebaseapp.com\",\r\n    projectId: \"memssenger-c0d86\",\r\n    storageBucket: \"memssenger-c0d86.appspot.com\",\r\n    messagingSenderId: \"271283967966\",\r\n    appId: \"1:271283967966:web:0b4e1a68a6aa42d5ebef4f\",\r\n    measurementId: \"G-YLB9Z3H722\",\r\n};\r\n\r\n// Initialize Firebase\r\ninitializeApp(firebaseConfig);\r\n\r\nconst db = getFirestore();\r\nconst auth = getAuth();\r\n\r\nexport { db, auth };\r\n","import {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n} from \"firebase/auth\";\nimport {\n  addDoc,\n  collection,\n  doc,\n  getDocs,\n  query,\n  updateDoc,\n  where,\n} from \"firebase/firestore\";\nimport { makeAutoObservable } from \"mobx\";\nimport { auth, db } from \"../firebase\";\n\nclass UserStore {\n  user = null;\n  loading = false;\n  error = false;\n\n  constructor() {\n    makeAutoObservable(this);\n  }\n\n  checkUser() {\n    // На dialogsPage\n    // this.setLoading(true);\n  }\n\n  async editUserName(name) {\n    let userId = null;\n\n    const userRef = collection(db, \"users\");\n    const q = query(userRef, where(\"uid\", \"==\", this.user.uid));\n\n    const querySnapshot = await getDocs(q);\n    querySnapshot.forEach((doc) => {\n      userId = doc.id;\n    });\n\n    const nameRef = doc(db, \"users\", userId);\n    await updateDoc(nameRef, {\n      name,\n    });\n\n    const user = { ...this.user, name };\n\n    this.setUser(user);\n\n    return user;\n  }\n\n  async editUserAvatar(avatarUrl) {\n    let docID = \"\";\n\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", this.user.uid));\n    const querySnapshot = await getDocs(q);\n    querySnapshot.forEach((doc) => {\n      docID = doc.id;\n    });\n\n    const avatarRef = doc(db, \"users\", docID);\n\n    updateDoc(avatarRef, {\n      avatar: avatarUrl,\n    });\n\n    const user = { ...this.user, avatar: avatarUrl };\n    this.setUser(user);\n\n    if (user) {\n      this.setLoading(false);\n    }\n\n    this.setLoading(false);\n  }\n\n  async login(myEmail, myPassword) {\n    this.setLoading(true);\n\n    const responseFromAuth = await signInWithEmailAndPassword(\n      auth,\n      myEmail,\n      myPassword\n    );\n\n    let myName = null;\n    let myAvatar = null;\n    const userId = responseFromAuth.user.uid;\n\n    const userRef = collection(db, \"users\");\n    const q = query(userRef, where(\"email\", \"==\", myEmail));\n\n    const querySnapshot = await getDocs(q);\n    querySnapshot.forEach((doc) => {\n      myName = doc.data().name;\n      myAvatar = doc.data().avatar;\n    });\n\n    const user = {\n      email: myEmail,\n      uid: userId,\n      name: myName,\n      avatar: myAvatar,\n    };\n\n    if (user) {\n      this.setLoading(false);\n    }\n\n    this.setUser(user);\n    return user;\n  }\n\n  async register(myEmail, myPassword, myName) {\n    this.setLoading(true);\n    const responseFromAuth = await createUserWithEmailAndPassword(\n      auth,\n      myEmail,\n      myPassword\n    );\n\n    const userId = responseFromAuth.user.uid;\n\n    await addDoc(collection(db, \"users\"), {\n      email: myEmail,\n      uid: userId,\n      name: myName,\n    });\n\n    const user = {\n      email: myEmail,\n      uid: userId,\n      name: myName,\n    };\n\n    if (user) {\n      this.setLoading(false);\n    }\n\n    this.setUser(user);\n    return user;\n  }\n\n  setLoading(loading) {\n    this.loading = loading;\n  }\n\n  setError(error) {\n    this.error = error;\n  }\n\n  setUser(user) {\n    this.user = user;\n  }\n}\n\nexport const userStore = new UserStore();\n","export default function getDate(date) {\r\n    if (date) {\r\n        const thisDate = new Date(date.seconds * 1000);\r\n\r\n        let hours = thisDate.getHours();\r\n        if (hours < 10) {\r\n            hours = \"0\" + hours;\r\n        }\r\n\r\n        let minutes = thisDate.getMinutes();\r\n        if (minutes < 10) {\r\n            minutes = \"0\" + minutes;\r\n        }\r\n\r\n        const messageDate = `${hours}:${minutes}`;\r\n\r\n        return messageDate;\r\n    }\r\n}\r\n","import getDate from \"./get_date\";\n\nexport const getLastMessage = (dialog) => {\n  const lastMessageIndex = dialog.length - 1;\n  let lastMessage = dialog[lastMessageIndex];\n\n  if (lastMessage.length !== 0) {\n    const time = getDate(lastMessage.date);\n    const newLastMessage = {\n      ...lastMessage,\n      time,\n    };\n    lastMessage = newLastMessage;\n  }\n\n  return lastMessage;\n};\n","import { collection, getDocs } from \"firebase/firestore\";\nimport { makeAutoObservable } from \"mobx\";\nimport { db } from \"../firebase\";\nimport { userStore } from \"./user.store\";\n\nclass ChatStore {\n  users = [];\n  loading = true;\n  error = false;\n  dialogs = [];\n  activeDialog = null;\n  searchedUsers = [];\n\n  constructor() {\n    makeAutoObservable(this);\n  }\n\n  async getChats() {\n    const querySnapshop = await getDocs(collection(db, \"users\"));\n    const filteredUsers = querySnapshop.docs\n      .map((doc) => doc.data())\n      .filter((doc) => doc.uid !== userStore.user.uid);\n\n    this.serUsers(filteredUsers);\n    if (filteredUsers) {\n      this.getDialogs();\n    }\n  }\n\n  async getDialogs() {\n    const querySnapshop = await getDocs(collection(db, \"dialogs\"));\n    const allMessages = querySnapshop.docs.map((doc) => doc.data());\n    const authUserDialogs = [];\n\n    allMessages.forEach((message) => {\n      if (\n        message.messages[0] &&\n        message.messages[0]?.dialog_id.includes(userStore.user?.uid)\n      ) {\n        authUserDialogs.push(message.messages);\n      }\n    });\n\n    const s = authUserDialogs.sort((a, b) => {\n      const aLastIndex = a.length - 1;\n      const bLastIndex = b.length - 1;\n      return b[bLastIndex].date.seconds - a[aLastIndex].date.seconds;\n    });\n\n    this.setDialogs(s);\n    if (allMessages) {\n      this.setLoading(false);\n    }\n  }\n\n  searchUsers(name) {\n    this.searchedUsers = this.users.filter((user) =>\n      user.name.toLowerCase().includes(name.toLowerCase())\n    );\n  }\n\n  setLoading(loading) {\n    this.loading = loading;\n  }\n\n  setError(error) {\n    this.error = error;\n  }\n\n  serUsers(users) {\n    this.searchedUsers = users;\n    this.users = users;\n  }\n  setDialogs(dialogs) {\n    this.dialogs = dialogs;\n  }\n}\n\nexport const chatStore = new ChatStore();\n","import { doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\";\nimport { makeAutoObservable } from \"mobx\";\nimport { db } from \"../firebase\";\nimport { userStore } from \"./user.store\";\n\nclass DialogStore {\n  activeDialog = null;\n  messages = [];\n  dialogId = null;\n  loading = false;\n\n  constructor() {\n    makeAutoObservable(this);\n  }\n\n  async sendMessage(message) {\n    const dialogRef = doc(db, \"dialogs\", this.dialogId);\n    const docSnap = await getDoc(dialogRef);\n\n    if (docSnap.exists()) {\n      const docData = docSnap.data();\n      await updateDoc(dialogRef, {\n        messages: [...docData.messages, message],\n      });\n    } else {\n      await setDoc(doc(db, \"dialogs\", this.dialogId), {\n        messages: [message],\n      });\n    }\n  }\n\n  createDialogId() {\n    const user = userStore.user;\n    if (!this.activeDialog || !user) return;\n\n    let myDialogId = null;\n\n    if (this.activeDialog.uid > user.uid) {\n      myDialogId = this.activeDialog.uid + user.uid;\n    } else {\n      myDialogId = user.uid + this.activeDialog.uid;\n    }\n\n    this.setDialogId(myDialogId);\n    this.setLoading(false);\n  }\n\n  setActiveDialog(dialog) {\n    this.activeDialog = dialog;\n  }\n\n  setMessages(messages) {\n    this.messages = messages;\n  }\n\n  setDialogId(dialogId) {\n    this.dialogId = dialogId;\n  }\n\n  setLoading(loading) {\n    this.loading = loading;\n  }\n\n  setAll() {\n    this.dialogId = null;\n    this.activeDialog = null;\n    this.messages = [];\n  }\n}\n\nexport const dialogStore = new DialogStore();\n","import styles from \"./Dialog.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useLayoutEffect, useMemo, useState } from \"react\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { getLastMessage } from \"../../../utils/getLastMessage\";\r\nimport { chatStore } from \"../../../store/chat.store\";\r\nimport { dialogStore } from \"../../../store/dialog.store\";\r\n\r\nconst Message = observer(({ dialog }) => {\r\n  const authUser = userStore.user;\r\n  const [lastMessage, setLastMessage] = useState(\"\");\r\n  const [user, setUser] = useState(\"\");\r\n\r\n  useMemo(() => {\r\n    const dialogId = dialog[0].dialog_id;\r\n\r\n    chatStore.users.forEach((user) => {\r\n      if (dialogId.includes(user.uid)) {\r\n        setUser(user);\r\n      }\r\n    });\r\n  }, [dialog]);\r\n\r\n  const { name, uid, email, avatar } = user;\r\n\r\n  useLayoutEffect(() => {\r\n    const lastMessage = getLastMessage(dialog);\r\n    setLastMessage(lastMessage);\r\n    chatStore.setLoading(false);\r\n  }, [dialog]);\r\n\r\n  return (\r\n    <>\r\n      {lastMessage && lastMessage.length !== 0 ? (\r\n        <NavLink\r\n          to={routes.messages + `/${uid}`}\r\n          className={styles.messageContainer}\r\n          onClick={() =>\r\n            dialogStore.setActiveDialog({ email, uid, name, avatar })\r\n          }\r\n        >\r\n          <div className={styles.avatar}>\r\n            {user?.avatar && <img src={user.avatar} alt=\"\" />}\r\n          </div>\r\n\r\n          <div className={styles.info}>\r\n            <div className={styles.top}>\r\n              <div className={`${styles.userName} text-mw`}>{name}</div>\r\n              <div className={styles.time}>\r\n                {chatStore.loading\r\n                  ? null\r\n                  : lastMessage.length === 0\r\n                  ? null\r\n                  : lastMessage?.time}\r\n              </div>\r\n            </div>\r\n            <div className=\"text-mw\">\r\n              {chatStore.loading\r\n                ? \"Загрузка...\"\r\n                : lastMessage.length !== 0\r\n                ? lastMessage.uid === authUser.uid\r\n                  ? `Вы: ${lastMessage.message}`\r\n                  : lastMessage.message\r\n                : \"Сообщений не найдено\"}\r\n            </div>\r\n          </div>\r\n        </NavLink>\r\n      ) : null}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Message;\r\n","import \"./preloader.css\";\r\n\r\nexport default function Preloader() {\r\n    return (\r\n        <div className=\"preloader-wrapper\">\r\n            <div className=\"loadingio-spinner-spinner-sczevsac37c\">\r\n                <div className=\"ldio-cg0exsdxg3p\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import Dialog from \"../Dialog/Dialog\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useEffect, useLayoutEffect } from \"react\";\r\nimport Preloader from \"../../../components/Preloader/Preloader\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { chatStore } from \"../../../store/chat.store\";\r\nimport { userStore } from \"../../../store/user.store\";\r\n\r\nconst Dialogs = observer(() => {\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    if (user) {\r\n      userStore.setUser(user);\r\n    } else {\r\n      history.push(\"/\");\r\n    }\r\n  }, [history]);\r\n\r\n  useLayoutEffect(() => {\r\n    chatStore.getChats();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {chatStore.loading ? (\r\n        <Preloader />\r\n      ) : chatStore.dialogs.length !== 0 && chatStore.users.length !== 0 ? (\r\n        <>\r\n          {chatStore.dialogs.map((dialog) => (\r\n            <Dialog key={dialog[0].dialog_id} dialog={dialog} />\r\n          ))}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className=\"not-dialogs\">Сообщений не найдено</div>\r\n          <div className=\"to-search\">\r\n            <NavLink to={\"search\"}> К списку пользователей </NavLink>\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Dialogs;\r\n","import styles from \"./HeaderComponent.module.css\";\r\n\r\nexport default function HeaderComponent({ children }) {\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <div className={styles.container}>{children}</div>\r\n        </div>\r\n    );\r\n}\r\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./Header.module.css\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\n\r\nfunction Header() {\r\n    return (\r\n        <>\r\n            <HeaderComponent>\r\n                <NavLink to={routes.settings} className={styles.menuButton}>\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24px\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        width=\"24px\"\r\n                        fill=\"#000000\"\r\n                    >\r\n                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                        <path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\" />\r\n                    </svg>\r\n                </NavLink>\r\n\r\n                <div className=\"appTitle\">Memssenger</div>\r\n\r\n                <NavLink to={routes.search} className={styles.searchButton}>\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24px\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        width=\"24px\"\r\n                        fill=\"#000000\"\r\n                    >\r\n                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                        <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\r\n                    </svg>\r\n                </NavLink>\r\n            </HeaderComponent>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import s from \"./BodyComponent.module.css\";\r\n\r\nexport default function BodyComponent({ children }) {\r\n  return <div className={s.container}>{children}</div>;\r\n}\r\n","import Dialogs from \"./Dialogs/Dialogs\";\r\nimport Header from \"./Header/Header\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\nimport BodyComponent from \"../../components/Layout/Body/BodyComponent\";\r\n\r\nexport default function DialogsPage() {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <BodyComponent>\r\n        <motion.div\r\n          initial={{ opacity: 0.2, scale: 0.7, y: \"-20%\" }}\r\n          animate={{ opacity: 1, scale: 1, y: 0 }}\r\n          // transition={{ easeInOut: 2 }}\r\n        >\r\n          <Dialogs />\r\n        </motion.div>\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n}\r\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./Header.module.css\";\r\n\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useHistory } from \"react-router\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { dialogStore } from \"../../../store/dialog.store\";\r\n\r\nconst Header = observer(() => {\r\n  const history = useHistory();\r\n  const dialog = dialogStore.activeDialog;\r\n  if (!dialog) {\r\n    history.push(routes.dialogs);\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <HeaderComponent>\r\n        <NavLink to={routes.dialogs} className={styles.backButton}>\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            height=\"24px\"\r\n            viewBox=\"0 0 24 24\"\r\n            width=\"24px\"\r\n            fill=\"#000000\"\r\n          >\r\n            <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n            <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n          </svg>\r\n        </NavLink>\r\n\r\n        <div className=\"appTitle text-mw\">{dialog.name}</div>\r\n\r\n        <div className={styles.userAvatar}>\r\n          <img src={dialog?.avatar} alt=\"\" />\r\n        </div>\r\n      </HeaderComponent>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Header;\r\n","import React, { useState } from \"react\";\r\nimport s from \"../Messages.module.css\";\r\nimport Picker from \"emoji-picker-react\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { dialogStore } from \"../../../store/dialog.store\";\r\n\r\nconst FormMessage = observer(() => {\r\n  const user = userStore.user;\r\n  const dialogId = dialogStore.dialogId;\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [emojiPopover, setEmojiPopover] = useState(false);\r\n\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    setNewMessage((e) => `${e} ${emojiObject.emoji}`);\r\n  };\r\n\r\n  const sendMessage = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const message = newMessage;\r\n    if (message?.trim().length) {\r\n      const myMessage = {\r\n        message: message,\r\n        uid: user.uid,\r\n        date: new Date(),\r\n        dialog_id: dialogId,\r\n        name: user.name,\r\n      };\r\n\r\n      setNewMessage(\"\");\r\n      dialogStore.sendMessage(myMessage);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.wrapper}>\r\n      <div className={s.formWrapper}>\r\n        <form\r\n          className={s.form}\r\n          onSubmit={(event) => {\r\n            sendMessage(event);\r\n            setEmojiPopover(false);\r\n          }}\r\n        >\r\n          <input\r\n            value={newMessage}\r\n            onChange={(e) => setNewMessage(e.target.value)}\r\n            className={s.input}\r\n            type=\"text\"\r\n            placeholder=\"Сообщение\"\r\n          />\r\n\r\n          <div\r\n            onClick={() => setEmojiPopover(!emojiPopover)}\r\n            className=\"emoji-button\"\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              height=\"24px\"\r\n              viewBox=\"0 0 24 24\"\r\n              width=\"24px\"\r\n              fill=\"#383838\"\r\n            >\r\n              <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n              <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z\" />\r\n            </svg>\r\n\r\n            {emojiPopover ? (\r\n              <div\r\n                onClick={(e) => e.stopPropagation()}\r\n                className=\"emoji-popover\"\r\n              >\r\n                <Picker\r\n                  pickerStyle={{\r\n                    boxShadow: \"none\",\r\n                  }}\r\n                  onEmojiClick={onEmojiClick}\r\n                />\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n\r\n          <button className={s.send}>\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 24 24\"\r\n              width=\"24px\"\r\n              fill=\"#000000\"\r\n            >\r\n              <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n              <path d=\"M4.01 6.03l7.51 3.22-7.52-1 .01-2.22m7.5 8.72L4 17.97v-2.22l7.51-1M2.01 3L2 10l15 2-15 2 .01 7L23 12 2.01 3z\" />\r\n            </svg>\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default FormMessage;\r\n","import s from \"../Messages.module.css\";\r\nimport getDate from \"../../../utils/get_date\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\n\r\nexport default function Message({ message, uid, userUid, date }) {\r\n  const messageDate = getDate(date);\r\n\r\n  const initialPosition = uid === userUid ? \"100%\" : \"-100%\";\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ x: initialPosition }}\r\n      animate={{ x: \"0%\" }}\r\n      className={s.messageContainer}\r\n      style={{\r\n        justifyContent: uid === userUid && \"flex-end\",\r\n        textAlign: uid === userUid && \"right\",\r\n      }}\r\n    >\r\n      <div className={s.message}>\r\n        <span className={s.messageText}>{message}</span>\r\n        {date ? <span className={s.messageDate}> {messageDate} </span> : null}\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport s from \"../Messages.module.css\";\r\nimport Message from \"../Message/Message\";\r\nimport ScrollableFeed from \"react-scrollable-feed\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { dialogStore } from \"../../../store/dialog.store\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport useInnerHeight from \"../../../hooks/useInnerHeight\";\r\n\r\nconst MessagesWrapper = observer(() => {\r\n  const user = userStore.user;\r\n  const headerHeight = 168;\r\n  const innerHeight = useInnerHeight();\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        layout\r\n        className={s.messagesWrapper}\r\n        style={{ height: innerHeight - headerHeight + \"px\" }}\r\n      >\r\n        <ScrollableFeed className=\"x-hidden\">\r\n          {dialogStore.messages.map(({ message, uid, date }, i) => (\r\n            <Message\r\n              key={`message_key_${i}`}\r\n              message={message}\r\n              userUid={user.uid}\r\n              uid={uid}\r\n              date={date}\r\n            ></Message>\r\n          ))}\r\n        </ScrollableFeed>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default MessagesWrapper;\r\n","import { useLayoutEffect, useState } from \"react\";\r\n\r\nexport default function useInnerHeight() {\r\n  const [innerHeight, setInnerHeight] = useState(window.innerHeight);\r\n\r\n  useLayoutEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setInnerHeight(window.innerHeight);\r\n    }, 500);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return innerHeight;\r\n}\r\n","import Header from \"./Header/Header\";\r\nimport BodyComponent from \"../../components/Layout/Body/BodyComponent\";\r\nimport FormMessage from \"./FormMessage/FormMessage\";\r\nimport MessagesWrapper from \"./MessagesWrapper/MessagesWrapper\";\r\nimport { useEffect } from \"react\";\r\nimport { db } from \"../../firebase\";\r\nimport { doc, onSnapshot } from \"@firebase/firestore\";\r\nimport Preloader from \"../../components/Preloader/Preloader\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { dialogStore } from \"../../store/dialog.store\";\r\n\r\nconst Messages = observer(() => {\r\n  useEffect(() => {\r\n    dialogStore.createDialogId();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!dialogStore.dialogId) return;\r\n\r\n    const unsub = onSnapshot(\r\n      doc(db, \"dialogs\", dialogStore.dialogId),\r\n      (doc) => {\r\n        const currentData = doc.data();\r\n\r\n        if (currentData) {\r\n          if (currentData.messages.length > 0) {\r\n            dialogStore.setMessages(currentData.messages);\r\n          }\r\n        } else {\r\n          dialogStore.setMessages([]);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      unsub();\r\n      dialogStore.setAll();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n\r\n      <BodyComponent>\r\n        {dialogStore.loading ? <Preloader /> : <MessagesWrapper />}\r\n\r\n        <FormMessage />\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n});\r\nexport default Messages;\r\n","import styles from \"./Header.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useRef } from \"react\";\r\n\r\nfunction Header({ searchUsers }) {\r\n    const searchRef = useRef();\r\n\r\n    const onChange = () => {\r\n        searchUsers(searchRef);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <HeaderComponent>\r\n                <NavLink to={routes.dialogs} className={styles.backButton}>\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24px\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        width=\"24px\"\r\n                        fill=\"#000000\"\r\n                    >\r\n                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                        <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n                    </svg>\r\n                </NavLink>\r\n\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Поиск\"\r\n                    className={styles.input}\r\n                    onChange={onChange}\r\n                    ref={searchRef}\r\n                />\r\n            </HeaderComponent>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../../routes/routes\";\r\nimport { dialogStore } from \"../../../../store/dialog.store\";\r\nimport styles from \"./LastItem.module.css\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\n\r\nfunction LastItem({ user }) {\r\n  const { name, uid, email, avatar } = user;\r\n\r\n  return (\r\n    <motion.div layout>\r\n      <NavLink\r\n        to={routes.messages + `/${user.uid}`}\r\n        onClick={() =>\r\n          dialogStore.setActiveDialog({ email, uid, name, avatar })\r\n        }\r\n      >\r\n        <div className={styles.container}>\r\n          <div className={styles.avatar}>\r\n            <img src={user.avatar ? user.avatar : null} alt=\"\" />\r\n          </div>\r\n          <div className={styles.info}>\r\n            <div className={`${styles.title} text-mw`}> {user.name} </div>\r\n            <div className={`${styles.date} text-mw`}> {user.email} </div>\r\n          </div>\r\n        </div>\r\n      </NavLink>\r\n    </motion.div>\r\n  );\r\n}\r\nexport default LastItem;\r\n","import LastItem from \"./LastItem/LastItem\";\r\n\r\nfunction LastList({ users }) {\r\n  return (\r\n    <>\r\n      {users.length !== 0 ? (\r\n        users.map((user) => <LastItem key={user.uid} user={user} />)\r\n      ) : (\r\n        <div className=\"not-dialogs\">Пользователей не найдено</div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\nexport default LastList;\r\n","import { observer } from \"mobx-react-lite\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { chatStore } from \"../../store/chat.store\";\r\nimport Header from \"./Header/Header\";\r\nimport LastList from \"./LastList/LastList\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\nimport BodyComponent from \"../../components/Layout/Body/BodyComponent\";\r\n\r\nconst SearchPage = observer(() => {\r\n  const history = useHistory();\r\n\r\n  if (!localStorage.getItem(\"user\") || chatStore.users.length === 0) {\r\n    history.push(\"/\");\r\n  }\r\n\r\n  const searchUsers = async (searchRef) => {\r\n    const searchInput = searchRef.current.value;\r\n    chatStore.searchUsers(searchInput);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header searchUsers={searchUsers} />\r\n      <BodyComponent>\r\n        <motion.div\r\n          initial={{ x: \"100%\" }}\r\n          animate={{ x: \"0%\" }}\r\n          // transition={{ easeInOut: 1 }}\r\n        >\r\n          <LastList users={chatStore.searchedUsers} />\r\n        </motion.div>\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default SearchPage;\r\n","import styles from \"./Header.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\n\r\nexport default function Header() {\r\n    return (\r\n        <HeaderComponent>\r\n            <NavLink to=\"/im\" className={styles.backButton}>\r\n                <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    height=\"24px\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    width=\"24px\"\r\n                    fill=\"#000000\"\r\n                >\r\n                    <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                    <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n                </svg>\r\n            </NavLink>\r\n\r\n            <div>Настройки</div>\r\n\r\n            <NavLink to=\"/search\" className={styles.searchButton}>\r\n                <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    height=\"24px\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    width=\"24px\"\r\n                    fill=\"#000000\"\r\n                >\r\n                    <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                    <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\r\n                </svg>\r\n            </NavLink>\r\n        </HeaderComponent>\r\n    );\r\n}\r\n","import s from \"./EditName.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useRef } from \"react\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\nexport default function EditName({ setModal }) {\r\n  return ReactDOM.createPortal(<Modal setModal={setModal} />, document.body);\r\n}\r\n\r\nfunction Modal({ setModal }) {\r\n  const newName = useRef(null);\r\n\r\n  const onClickHandler = async (event) => {\r\n    const myName = newName.current.value.trim();\r\n\r\n    if (myName.length > 0) {\r\n      const newUser = await userStore.editUserName(myName);\r\n      if (newUser !== undefined) {\r\n        localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n      }\r\n    }\r\n    setModal(false);\r\n  };\r\n\r\n  const onClose = (event) => {\r\n    event.stopPropagation();\r\n\r\n    if (event.target.dataset.close === \"close\") {\r\n      setModal(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.modal} data-close=\"close\" onClick={onClose}>\r\n      <motion.div initial={{ y: \"100%\" }} animate={{ y: \"0%\" }}>\r\n        <div className={s.modalContent}>\r\n          <div className={s.form}>\r\n            <input\r\n              autoFocus\r\n              ref={newName}\r\n              placeholder=\"Введите имя\"\r\n              type=\"text\"\r\n            />\r\n            <button onClick={onClickHandler}>Сохранить</button>\r\n          </div>\r\n\r\n          <button onClick={onClose} data-close=\"close\" className={s.close}>\r\n            Отменить\r\n          </button>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n","import s from \"./../EditName/EditName.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport { useState } from \"react\";\r\nimport { userStore } from \"../../../store/user.store\";\r\n\r\nexport default function EditAvatar({ setModal }) {\r\n  return ReactDOM.createPortal(<Modal setModal={setModal} />, document.body);\r\n}\r\n\r\nfunction Modal({ setModal }) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const user = userStore.user;\r\n\r\n  const onChange = async (event) => {\r\n    setIsLoading(true);\r\n    event.preventDefault();\r\n\r\n    const file = event.target.files[0];\r\n    await getAvatarUrl(file);\r\n  };\r\n\r\n  const getAvatarUrl = async (file) => {\r\n    if (file.size > 1024 * 1024 * 10) {\r\n      alert(\"Размер изображения слишком большой\");\r\n      setModal(false);\r\n    } else if (\r\n      file.type !== \"image/png\" &&\r\n      file.type !== \"image/jpg\" &&\r\n      file.type !== \"image/jpeg\"\r\n    ) {\r\n      console.log(file.type !== \"image/png\");\r\n      alert(\"Можно загружать только изображения (png/jpg/jpeg)\");\r\n      setModal(false);\r\n    } else {\r\n      const avatarName = user.uid + \"_avatar\";\r\n      const storage = getStorage();\r\n      const storageRef = ref(storage, avatarName);\r\n\r\n      await uploadBytes(storageRef, file).then(() => {\r\n        getDownloadURL(ref(storage, avatarName))\r\n          .then(async (url) => {\r\n            const avatarUrl = url;\r\n\r\n            const newUser = await userStore.editUserAvatar(avatarUrl);\r\n\r\n            if (newUser !== undefined) {\r\n              localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n            }\r\n            setModal(false);\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n      });\r\n    }\r\n  };\r\n\r\n  const onClose = (event) => {\r\n    event.stopPropagation();\r\n    if (event.target.dataset.close === \"close\") {\r\n      setModal(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.modal} data-close=\"close\" onClick={onClose}>\r\n      <motion.div initial={{ y: \"100%\" }} animate={{ y: \"0%\" }}>\r\n        <div className={s.modalContent}>\r\n          <form onChange={onChange} className={s.form}>\r\n            {!isLoading && (\r\n              <>\r\n                <label className={s.labelAvatar} htmlFor=\"avatar\">\r\n                  Выберите файл\r\n                </label>\r\n\r\n                <input className={s.inputAvatar} type=\"file\" id=\"avatar\" />\r\n              </>\r\n            )}\r\n\r\n            {isLoading && <div className={s.labelAvatar}>loading...</div>}\r\n          </form>\r\n\r\n          {!isLoading && (\r\n            <button onClick={onClose} data-close=\"close\" className={s.close}>\r\n              Отменить\r\n            </button>\r\n          )}\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n","import s from \"./Alert.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\nexport default function Alert({ message, closeAlert }) {\r\n  return ReactDOM.createPortal(\r\n    <Modal message={message} closeAlert={closeAlert} />,\r\n    document.body\r\n  );\r\n}\r\n\r\nfunction Modal({ message, closeAlert }) {\r\n  const [isClosed, setIsClosed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const showTimeout = setTimeout(() => {\r\n      setIsClosed(true);\r\n    }, 4000);\r\n    const closeTimeout = closeAlert\r\n      ? setTimeout(() => {\r\n          closeAlert(false);\r\n        }, 4300)\r\n      : 0;\r\n\r\n    return () => {\r\n      clearTimeout(showTimeout);\r\n      clearTimeout(closeTimeout);\r\n    };\r\n  }, [closeAlert]);\r\n\r\n  return (\r\n    <div className={s.wrapper}>\r\n      <motion.div initial={{ x: \"100%\" }} animate={{ x: \"0%\" }}>\r\n        <div className={isClosed ? s.alert + \" \" + s.close : s.alert}>\r\n          <div className={s.container}>{message}</div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n","import { useHistory } from \"react-router\";\r\nimport s from \"./SettingsContainer.module.css\";\r\nimport { useEffect } from \"react\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useState } from \"react\";\r\nimport EditName from \"../../../components/Modals/EditName/EditName\";\r\nimport EditAvatar from \"../../../components/Modals/EditAvatar/EditAvatar\";\r\nimport Alert from \"../../../components/Alert/Alert\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nconst SettingsContainer = observer(() => {\r\n  const user = userStore.user;\r\n\r\n  const [editNameModal, setEditNameModal] = useState(false);\r\n  const [editAvatarModal, setEditAvatarModal] = useState(false);\r\n  const [showAlert, setAlert] = useState(false);\r\n  const [alertText, setAlertText] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const logout = () => {\r\n    localStorage.setItem(\"user\", null);\r\n    userStore.setUser(null);\r\n    history.push(routes.login);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    if (user) {\r\n      userStore.setUser(user);\r\n    }\r\n  }, []);\r\n\r\n  const showEditNameModal = () => {\r\n    setEditNameModal(true);\r\n  };\r\n\r\n  const showEditAvatarModal = () => {\r\n    setEditAvatarModal(true);\r\n  };\r\n\r\n  const saveToBuffer = async () => {\r\n    const copyText =\r\n      \"Привет, я использую Memssenger для общения с друзьями. Присоединяйся по ссылке: https://ozcnii.github.io/memssenger\";\r\n    try {\r\n      await navigator.clipboard.writeText(copyText);\r\n      const alertText = \"Пригласительное сообщение скопировано в буфер обмена\";\r\n      setAlertText(alertText);\r\n      setAlert(true);\r\n    } catch (e) {\r\n      const alertText =\r\n        \"Произошла ошибка во время копирования пригласительного сообщения\";\r\n      setAlertText(alertText);\r\n      setAlert(true);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      {editNameModal && <EditName setModal={setEditNameModal} />}\r\n\r\n      {editAvatarModal && <EditAvatar setModal={setEditAvatarModal} />}\r\n      {showAlert && <Alert message={alertText} closeAlert={setAlert} />}\r\n\r\n      {user ? (\r\n        <>\r\n          <div className={s.main}>\r\n            <div className={s.top}>\r\n              <div className={s.avatar}>\r\n                {user?.avatar && <img src={user.avatar} alt=\"\" />}\r\n              </div>\r\n\r\n              <div className={s.info}>\r\n                <div className={`${s.userName} text-mw-100`}>{user.name} </div>\r\n                <div className=\"text-mw-100\">{user.email}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className={s.settings}>\r\n            <div className={s.edit} onClick={showEditAvatarModal}>\r\n              <div className={s.icon}>\r\n                <svg\r\n                  aria-hidden=\"true\"\r\n                  focusable=\"false\"\r\n                  data-prefix=\"fas\"\r\n                  data-icon=\"user-astronaut\"\r\n                  role=\"img\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 448 512\"\r\n                >\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z\"\r\n                  ></path>\r\n                </svg>\r\n              </div>\r\n              <span>Изменить аватар </span>\r\n            </div>\r\n\r\n            <div className={s.edit} onClick={showEditNameModal}>\r\n              <div className={s.icon}>\r\n                <svg\r\n                  aria-hidden=\"true\"\r\n                  focusable=\"false\"\r\n                  data-prefix=\"far\"\r\n                  data-icon=\"edit\"\r\n                  role=\"img\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 576 512\"\r\n                >\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z\"\r\n                  ></path>\r\n                </svg>\r\n              </div>\r\n              <span>Изменить имя</span>\r\n            </div>\r\n\r\n            <a\r\n              href=\"https://github.com/ttenapp/memssenger\"\r\n              target=\"blank\"\r\n              className={s.edit}\r\n            >\r\n              <div className={s.icon}>\r\n                <svg\r\n                  aria-hidden=\"true\"\r\n                  focusable=\"false\"\r\n                  data-prefix=\"fas\"\r\n                  data-icon=\"question\"\r\n                  role=\"img\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 384 512\"\r\n                >\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z\"\r\n                  ></path>\r\n                </svg>\r\n              </div>\r\n              <span>Информация</span>\r\n            </a>\r\n\r\n            <div className={s.edit} onClick={saveToBuffer}>\r\n              <div className={s.icon}>\r\n                <svg\r\n                  aria-hidden=\"true\"\r\n                  focusable=\"false\"\r\n                  data-prefix=\"fas\"\r\n                  data-icon=\"user-friends\"\r\n                  role=\"img\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 640 512\"\r\n                >\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z\"\r\n                  ></path>\r\n                </svg>\r\n              </div>\r\n              <span>Пригласить друзей</span>\r\n            </div>\r\n\r\n            <div className={s.edit + \" \" + s.last} onClick={logout}>\r\n              <div className={s.icon}>\r\n                <svg\r\n                  aria-hidden=\"true\"\r\n                  focusable=\"false\"\r\n                  data-prefix=\"fas\"\r\n                  data-icon=\"sign-out-alt\"\r\n                  role=\"img\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 512 512\"\r\n                >\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z\"\r\n                  ></path>\r\n                </svg>\r\n              </div>\r\n              <span>Выход</span>\r\n            </div>\r\n          </div>\r\n        </>\r\n      ) : null}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default SettingsContainer;\r\n","import Header from \"./Header/Header\";\r\nimport SettingsContainer from \"./SettingsContainer/SettingContainer\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\nimport BodyComponent from \"../../components/Layout/Body/BodyComponent\";\r\n\r\nexport default function SettingsPage() {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <BodyComponent>\r\n        <motion.div initial={{ x: \"-100%\" }} animate={{ x: \"0%\" }}>\r\n          <SettingsContainer />\r\n        </motion.div>\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n}\r\n","import s from \"./LoginPage.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../routes/routes\";\r\nimport { useRef, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Alert from \"../../components/Alert/Alert\";\r\nimport { userStore } from \"../../store/user.store\";\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nconst LoginPage = observer(() => {\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [alertText, setAlertText] = useState(null);\r\n\r\n  const history = useHistory();\r\n  const email = useRef(null);\r\n  const password = useRef(null);\r\n\r\n  const login = async (event) => {\r\n    event.preventDefault();\r\n    const myEmail = email.current.value.trim();\r\n    const myPassword = password.current.value.trim();\r\n\r\n    if (myEmail && myPassword) {\r\n      try {\r\n        const newUser = await userStore.login(myEmail, myPassword);\r\n        if (newUser !== undefined) {\r\n          localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n        }\r\n        history.push(routes.dialogs);\r\n      } catch (error) {\r\n        setAlertText(error.message);\r\n        setShowAlert(true);\r\n      }\r\n    } else {\r\n      const text = \"Все поля должны быыть заполнены\";\r\n      setAlertText(text);\r\n      setShowAlert(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    if (user) {\r\n      userStore.setUser(user);\r\n      history.push(routes.dialogs);\r\n    }\r\n  }, [history]);\r\n\r\n  return (\r\n    <>\r\n      {showAlert && <Alert message={alertText} closeAlert={setShowAlert} />}\r\n\r\n      <div className={s.container}>\r\n        <div className={s.title}>Вход</div>\r\n\r\n        <form onSubmit={login} className={s.form}>\r\n          <input\r\n            ref={email}\r\n            type=\"text\"\r\n            placeholder=\"Эл. адрес\"\r\n            className={s.login}\r\n          />\r\n\r\n          <input\r\n            ref={password}\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            className={s.password}\r\n          />\r\n\r\n          <button type=\"submit\" className={s.submit}>\r\n            {userStore.loading ? \"Загрузка...\" : \"Войти\"}\r\n          </button>\r\n\r\n          <div>\r\n            <NavLink to={routes.registr} className={s.registr}>\r\n              Регистрация\r\n            </NavLink>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default LoginPage;\r\n","import s from \"../LoginPage.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useRef, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Alert from \"../../../components/Alert/Alert\";\r\nimport { userStore } from \"../../../store/user.store\";\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nconst RegistrationPage = observer(({ setUser }) => {\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [alertText, setAlertText] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const email = useRef(null);\r\n  const password = useRef(null);\r\n  const confirmPassword = useRef(null);\r\n  const userName = useRef(null);\r\n\r\n  const register = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const myEmail = email.current.value.trim();\r\n    const myPassword = password.current.value.trim();\r\n    const myConfirmPassword = confirmPassword.current.value.trim();\r\n    const myName = userName.current.value.trim();\r\n\r\n    if (\r\n      myEmail &&\r\n      myPassword &&\r\n      myName &&\r\n      myConfirmPassword &&\r\n      myPassword === myConfirmPassword\r\n    ) {\r\n      try {\r\n        const newUser = await userStore.register(myEmail, myPassword, myName);\r\n        if (newUser !== undefined) {\r\n          localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n        }\r\n\r\n        history.push(\"/chat\");\r\n      } catch (error) {\r\n        const text = error.message;\r\n        setAlertText(text);\r\n        setShowAlert(true);\r\n      }\r\n    } else if (myPassword !== myConfirmPassword) {\r\n      const text = \"Пароли не совпадают\";\r\n      setAlertText(text);\r\n      setShowAlert(true);\r\n    } else {\r\n      const text = \"Все поля должны быыть заполнены\";\r\n      setAlertText(text);\r\n      setShowAlert(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    if (user) {\r\n      setUser(user);\r\n      history.push(routes.dialogs);\r\n    }\r\n  }, [history, setUser]);\r\n\r\n  return (\r\n    <>\r\n      {showAlert && <Alert message={alertText} closeAlert={setShowAlert} />}\r\n\r\n      <div className={s.container}>\r\n        <div className={s.title}>Регистрация</div>\r\n\r\n        <form onSubmit={register} className={s.form}>\r\n          <input\r\n            type=\"text\"\r\n            ref={email}\r\n            placeholder=\"Эл. адрес\"\r\n            className={s.login}\r\n          />\r\n\r\n          <input\r\n            type=\"text\"\r\n            ref={password}\r\n            placeholder=\"Пароль\"\r\n            className={s.password}\r\n          />\r\n\r\n          <input\r\n            type=\"text\"\r\n            ref={confirmPassword}\r\n            placeholder=\"Подтвердите пароль\"\r\n            className={s.passwordConfirm}\r\n          />\r\n\r\n          <input\r\n            type=\"text\"\r\n            ref={userName}\r\n            placeholder=\"Введите ваше имя\"\r\n            className={s.passwordConfirm}\r\n          />\r\n\r\n          <button type=\"submit\" className={s.submit}>\r\n            {userStore.loading ? \"Загрузка...\" : \"Регистрация\"}\r\n          </button>\r\n\r\n          <div>\r\n            <NavLink to={routes.login} className={s.logIn}>\r\n              Войти\r\n            </NavLink>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default RegistrationPage;\r\n","import { Route, Switch, Redirect, HashRouter } from \"react-router-dom\";\nimport routes from \"./routes/routes\";\nimport DialogsPage from \"./pages/DialogsPage\";\nimport Messages from \"./pages/MessagePage\";\nimport SearchPage from \"./pages/SearchPage\";\nimport SettingsPage from \"./pages/SettingsPage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport RegistrationPage from \"./pages/LoginPage/RegistrationPage/RegistrationPage\";\n\nfunction App() {\n  return (\n    <HashRouter>\n      <div className=\"header-background\"></div>\n\n      <Switch>\n        <Route exact path=\"/\" render={() => <Redirect to={routes.login} />} />\n        <Route path={routes.dialogs} render={() => <DialogsPage />} />\n\n        <Route path={routes.messages + \"/:id\"} render={() => <Messages />} />\n        <Route path={routes.settings} render={() => <SettingsPage />} />\n        <Route path={routes.search} render={() => <SearchPage />} />\n\n        <Route path={routes.login} render={() => <LoginPage />} />\n        <Route path={routes.registr} render={() => <RegistrationPage />} />\n\n        <Route path=\"*\" render={() => <Redirect to={routes.dialogs} />} />\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import { StrictMode } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n    <StrictMode>\r\n        <App />\r\n    </StrictMode>,\r\n    rootElement\r\n);\r\n"],"sourceRoot":""}