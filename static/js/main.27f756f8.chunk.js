(this["webpackJsonpreact-mess-main"]=this["webpackJsonpreact-mess-main"]||[]).push([[0],{21:function(e,t,a){e.exports={container:"LoginPage_container__srci2",title:"LoginPage_title__3Gi8p",form:"LoginPage_form__2bfUG",login:"LoginPage_login__PZPVh",password:"LoginPage_password__2-lKB",passwordConfirm:"LoginPage_passwordConfirm__9F2XE",submit:"LoginPage_submit__2DZ5A",google:"LoginPage_google__3RZ3D",facebook:"LoginPage_facebook__1w0MS",registr:"LoginPage_registr__2MQ6Z",logIn:"LoginPage_logIn__tQRfg",googleIcon:"LoginPage_googleIcon__169R2",fbIcon:"LoginPage_fbIcon__2Drt8"}},22:function(e,t,a){e.exports={header:"SettingsContainer_header__2X059",top:"SettingsContainer_top__34tuA",avatar:"SettingsContainer_avatar__9vR60",info:"SettingsContainer_info__1E4bV",userName:"SettingsContainer_userName__2ehyD",edit:"SettingsContainer_edit__KT2c6",icon:"SettingsContainer_icon__2WsL7",last:"SettingsContainer_last__FK87T"}},30:function(e,t,a){e.exports={wrapper:"Messages_wrapper__1iEmf",formWrapper:"Messages_formWrapper__1z0ve",messages:"Messages_messages__xZ1-t",form:"Messages_form__2c05A",input:"Messages_input__1N5U6",send:"Messages_send__2xs5h",messagesWrapper:"Messages_messagesWrapper__3E0DO",messageContainer:"Messages_messageContainer__2SG-2",message:"Messages_message__30rWY",messageDate:"Messages_messageDate__1O3P-",noMessages:"Messages_noMessages__3VsK0"}},32:function(e,t,a){e.exports={modal:"EditName_modal__3rI5O",modalContent:"EditName_modalContent__3teMy",form:"EditName_form__r0iJV",close:"EditName_close__3cRjP",inputAvatar:"EditName_inputAvatar__1DQaC",labelAvatar:"EditName_labelAvatar__1JJML"}},37:function(e,t,a){e.exports={messageContainer:"Dialog_messageContainer__eb4mD",avatar:"Dialog_avatar__FNfG9",info:"Dialog_info__2bLB2",top:"Dialog_top__3BHmZ",date:"Dialog_date__1n7Cq",userName:"Dialog_userName__1-k8D"}},41:function(e,t,a){e.exports={container:"LastItem_container__1Fq8Y",avatar:"LastItem_avatar__3PBZz",info:"LastItem_info__sM9X5",date:"LastItem_date__3g1xy"}},51:function(e,t,a){e.exports={alert:"Alert_alert__1Wp_A",wrapper:"Alert_wrapper__3heKY",container:"Alert_container__1uYpb"}},55:function(e,t,a){e.exports={menuButton:"Header_menuButton__1JlfH",searchButton:"Header_searchButton__3AdbQ"}},56:function(e,t,a){e.exports={container:"HeaderComponent_container__2SlVa",wrapper:"HeaderComponent_wrapper__3wu5K","App-header":"HeaderComponent_App-header__1w9xj","App-link":"HeaderComponent_App-link__3uQ6h"}},57:function(e,t,a){e.exports={backButton:"Header_backButton__22AOg",userAvatar:"Header_userAvatar__272zd",container:"Header_container__3_COy"}},58:function(e,t,a){e.exports={backButton:"Header_backButton__3r5J4",container:"Header_container__3tnxR",input:"Header_input__3rffH"}},59:function(e,t,a){e.exports={header:"Header_header__3I0KL",backButton:"Header_backButton__HI7r2",searchButton:"Header_searchButton__35jPq"}},66:function(e,t,a){e.exports={container:"BodyComponent_container__2O-R-"}},73:function(e,t,a){},81:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var s=a(7),n=a(33),c=a.n(n),r=(a(73),a(0)),i=a.n(r),o=a(2),l=a(11),u=a(15),j={dialogs:"/dialogs",messages:"/im",settings:"/settings",search:"/search",login:"/login",registr:"/register"},d=a(37),b=a.n(d),h=a(14),O=a(35),m=a(3),f=a(4),v=a(47),g=a(12),x=a(18),p=a(63);Object(p.a)({apiKey:"AIzaSyAtz3-Jp3MsxNLBujPPCLcwUJm6YpPyGQg",authDomain:"memssenger-c0d86.firebaseapp.com",projectId:"memssenger-c0d86",storageBucket:"memssenger-c0d86.appspot.com",messagingSenderId:"271283967966",appId:"1:271283967966:web:0b4e1a68a6aa42d5ebef4f",measurementId:"G-YLB9Z3H722"});var _=Object(g.f)(),w=Object(v.b)(),N=new(function(){function e(){Object(m.a)(this,e),this.user=null,Object(x.d)(this)}return Object(f.a)(e,[{key:"getMe",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var a,s,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(g.b)(_,"users"),s=Object(g.g)(a,Object(g.j)("uid","==",t)),e.next=4,Object(g.e)(s);case 4:e.sent.forEach((function(e){n.setUser(e.data())}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"editUserName",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var a,s,n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,s=Object(g.b)(_,"users"),n=Object(g.g)(s,Object(g.j)("uid","==",this.user.uid)),e.next=5,Object(g.e)(n);case 5:return e.sent.forEach((function(e){a=e.id})),c=Object(g.c)(_,"users",a),e.next=10,Object(g.i)(c,{name:t});case 10:return r=Object(O.a)(Object(O.a)({},this.user),{},{name:t}),this.setUser(r),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editUserAvatar",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var a,s,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s=Object(g.g)(Object(g.b)(_,"users"),Object(g.j)("uid","==",this.user.uid)),e.next=4,Object(g.e)(s);case 4:e.sent.forEach((function(e){a=e.id})),n=Object(g.c)(_,"users",a),Object(g.i)(n,{avatar:t}),c=Object(O.a)(Object(O.a)({},this.user),{},{avatar:t}),this.setUser(c);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(o.a)(i.a.mark((function e(t,a){var s,n,c,r,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.c)(w,t,a);case 2:return s=e.sent,n=null,c=null,r=s.user.uid,o=Object(g.b)(_,"users"),l=Object(g.g)(o,Object(g.j)("email","==",t)),e.next=10,Object(g.e)(l);case 10:return e.sent.forEach((function(e){n=e.data().name,c=e.data().avatar})),u={email:t,uid:r,name:n,avatar:c},this.setUser(u),e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(o.a)(i.a.mark((function e(t,a,s){var n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(w,t,a);case 2:return n=e.sent,c=n.user.uid,e.next=6,Object(g.a)(Object(g.b)(_,"users"),{email:t,uid:c,name:s});case 6:return r={email:t,uid:c,name:s},e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}()},{key:"setUser",value:function(e){this.user=e}}]),e}()),k=a(17);function y(e){if(e){var t=new Date(1e3*e.seconds),a=t.getHours();a<10&&(a="0"+a);var s=t.getMinutes();return s<10&&(s="0"+s),"".concat(a,":").concat(s)}}var C=new(function(){function e(){Object(m.a)(this,e),this.users=[],this.loading=!0,this.error=!1,this.dialogs=[],this.activeDialog=null,this.searchedUsers=[],Object(x.d)(this)}return Object(f.a)(e,[{key:"getChats",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.e)(Object(g.b)(_,"users"));case 2:t=e.sent,a=t.docs.map((function(e){return e.data()})).filter((function(e){var t;return(null===e||void 0===e?void 0:e.uid)!==(null===(t=N.user)||void 0===t?void 0:t.uid)})),this.serUsers(a),a&&this.getDialogs();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDialogs",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,s,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.e)(Object(g.b)(_,"dialogs"));case 2:t=e.sent,a=t.docs.map((function(e){return e.data()})),s=[],a.forEach((function(e){var t,a;e.messages[0]&&(null===(t=e.messages[0])||void 0===t?void 0:t.dialog_id.includes(null===(a=N.user)||void 0===a?void 0:a.uid))&&s.push(e.messages)})),n=s.sort((function(e,t){var a=e.length-1;return t[t.length-1].date.seconds-e[a].date.seconds})),this.setDialogs(n),a&&this.setLoading(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchUsers",value:function(e){this.searchedUsers=this.users.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))}},{key:"setLoading",value:function(e){this.loading=e}},{key:"setError",value:function(e){this.error=e}},{key:"serUsers",value:function(e){this.searchedUsers=e,this.users=e}},{key:"setDialogs",value:function(e){this.dialogs=e}}]),e}()),M=a(20),S=new(function(){function e(){Object(m.a)(this,e),this.activeDialog=null,this.messages=[],this.dialogId=null,this.loading=!1,Object(x.d)(this)}return Object(f.a)(e,[{key:"sendMessage",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var a,s,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(g.c)(_,"dialogs",this.dialogId),e.next=3,Object(g.d)(a);case 3:if(!(s=e.sent).exists()){e.next=10;break}return n=s.data(),e.next=8,Object(g.i)(a,{messages:[].concat(Object(M.a)(n.messages),[t])});case 8:e.next=12;break;case 10:return e.next=12,Object(g.h)(Object(g.c)(_,"dialogs",this.dialogId),{messages:[t]});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDialogId",value:function(){var e=N.user;if(this.activeDialog&&e){var t=null;t=this.activeDialog.uid>e.uid?this.activeDialog.uid+e.uid:e.uid+this.activeDialog.uid,this.setDialogId(t),this.setLoading(!1)}}},{key:"setActiveDialog",value:function(e){this.activeDialog=e}},{key:"setMessages",value:function(e){this.messages=e}},{key:"setDialogId",value:function(e){this.dialogId=e}},{key:"setLoading",value:function(e){this.loading=e}},{key:"setAll",value:function(){this.dialogId=null,this.activeDialog=null,this.messages=[]}}]),e}()),L=a(1),z=Object(k.a)((function(e){var t=e.dialog,a=N.user,n=Object(s.useState)(""),c=Object(l.a)(n,2),r=c[0],i=c[1],o=Object(s.useState)(""),u=Object(l.a)(o,2),d=u[0],m=u[1];Object(s.useMemo)((function(){var e=t[0].dialog_id;C.users.forEach((function(t){e.includes(t.uid)&&m(t)}))}),[t]);var f=d.name,v=d.uid,g=d.email,x=d.avatar;return Object(s.useLayoutEffect)((function(){var e=function(e){var t=e[e.length-1];if(0!==t.length){var a=y(t.date);t=Object(O.a)(Object(O.a)({},t),{},{time:a})}return t}(t);i(e),C.setLoading(!1)}),[t]),Object(L.jsx)(L.Fragment,{children:r&&0!==r.length&&Object(L.jsxs)(h.b,{to:j.messages+"/".concat(v),className:b.a.messageContainer,onClick:function(){return S.setActiveDialog({email:g,uid:v,name:f,avatar:x})},children:[Object(L.jsx)("div",{className:b.a.avatar,children:(null===d||void 0===d?void 0:d.avatar)&&Object(L.jsx)("img",{src:d.avatar,alt:""})}),Object(L.jsxs)("div",{className:b.a.info,children:[Object(L.jsxs)("div",{className:b.a.top,children:[Object(L.jsx)("div",{className:"".concat(b.a.userName," text-mw"),children:f}),Object(L.jsx)("div",{className:b.a.time,children:C.loading||0===r.length?null:null===r||void 0===r?void 0:r.time})]}),Object(L.jsx)("div",{className:"text-mw",children:C.loading?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":0!==r.length?r.uid===a.uid?"\u0412\u044b: ".concat(r.message):r.message:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})]})})}));a(81);function D(){return Object(L.jsx)("div",{className:"preloader-wrapper",children:Object(L.jsx)("div",{className:"loadingio-spinner-spinner-sczevsac37c",children:Object(L.jsxs)("div",{className:"ldio-cg0exsdxg3p",children:[Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{})]})})})}var H=Object(k.a)((function(){return Object(L.jsx)(L.Fragment,{children:C.loading?Object(L.jsx)(D,{}):0!==C.dialogs.length&&0!==C.users.length?Object(L.jsx)(L.Fragment,{children:C.dialogs.map((function(e){return Object(L.jsx)(z,{dialog:e},e[0].dialog_id)}))}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:"not-dialogs",children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),Object(L.jsx)("div",{className:"to-search",children:Object(L.jsx)(h.b,{to:"search",children:" \u041a \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 "})})]})})})),A=a(55),B=a.n(A),I=a(56),E=a.n(I);function P(e){var t=e.children;return Object(L.jsx)("div",{className:E.a.wrapper,children:Object(L.jsx)("div",{className:E.a.container,children:t})})}var F=function(){return Object(L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(L.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(L.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})]})},U=function(){return Object(L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(L.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(L.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})};var V=function(){return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(P,{children:[Object(L.jsx)(h.b,{to:j.settings,className:B.a.menuButton,children:Object(L.jsx)(U,{})}),Object(L.jsx)("div",{className:"appTitle",children:"Memssenger"}),Object(L.jsx)(h.b,{to:j.search,className:B.a.searchButton,children:Object(L.jsx)(F,{})})]})})},R=a(66),J=a.n(R);function q(e){var t=e.children;return Object(L.jsx)("div",{className:J.a.container,children:t})}function W(){return Object(s.useEffect)((function(){C.getChats()}),[]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(V,{}),Object(L.jsx)(q,{children:Object(L.jsx)(H,{})})]})}var K=a(57),T=a.n(K),Z=function(){return Object(L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(L.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(L.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})]})},G=Object(k.a)((function(){var e=Object(u.g)(),t=S.activeDialog;return t?Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(P,{children:[Object(L.jsx)(h.b,{to:j.dialogs,className:T.a.backButton,children:Object(L.jsx)(Z,{})}),Object(L.jsx)("div",{className:"appTitle text-mw",children:t.name}),Object(L.jsx)("div",{className:T.a.userAvatar,children:Object(L.jsx)("img",{src:null===t||void 0===t?void 0:t.avatar,alt:""})})]})}):(e.push(j.dialogs),null)})),Q=a(30),Y=a.n(Q),X=a(67),$=a.n(X),ee=function(){return Object(L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#383838",children:[Object(L.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(L.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"})]})},te=function(){return Object(L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(L.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(L.jsx)("path",{d:"M4.01 6.03l7.51 3.22-7.52-1 .01-2.22m7.5 8.72L4 17.97v-2.22l7.51-1M2.01 3L2 10l15 2-15 2 .01 7L23 12 2.01 3z"})]})},ae=Object(k.a)((function(){var e=N.user,t=S.dialogId,a=Object(s.useState)(""),n=Object(l.a)(a,2),c=n[0],r=n[1],u=Object(s.useState)(!1),j=Object(l.a)(u,2),d=j[0],b=j[1],h=function(){var a=Object(o.a)(i.a.mark((function a(s){var n,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s.preventDefault(),(null===(n=c)||void 0===n?void 0:n.trim().length)&&(o={message:n,uid:e.uid,date:new Date,dialog_id:t,name:e.name},r(""),S.sendMessage(o));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(L.jsx)("div",{className:Y.a.wrapper,children:Object(L.jsx)("div",{className:Y.a.formWrapper,children:Object(L.jsxs)("form",{className:Y.a.form,onSubmit:function(e){h(e),b(!1)},children:[Object(L.jsx)("input",{value:c,onChange:function(e){return r(e.target.value)},className:Y.a.input,type:"text",placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),Object(L.jsxs)("div",{onClick:function(){return b(!d)},className:"emoji-button",children:[Object(L.jsx)(ee,{}),d?Object(L.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:"emoji-popover",children:Object(L.jsx)($.a,{pickerStyle:{boxShadow:"none"},onEmojiClick:function(e,t){r((function(e){return"".concat(e," ").concat(t.emoji)}))}})}):null]}),Object(L.jsx)("button",{className:Y.a.send,children:Object(L.jsx)(te,{})})]})})})}));function se(e){var t=e.message,a=e.uid,s=e.userUid,n=e.date,c=y(n);return Object(L.jsx)("div",{className:Y.a.messageContainer,style:{justifyContent:a===s&&"flex-end",textAlign:a===s&&"right"},children:Object(L.jsxs)("div",{className:Y.a.message,children:[Object(L.jsx)("span",{className:Y.a.messageText,children:t}),n?Object(L.jsxs)("span",{className:Y.a.messageDate,children:[" ",c," "]}):null]})})}var ne=a(68);var ce=Object(k.a)((function(){var e=N.user,t=function(){var e=Object(s.useState)(window.innerHeight),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(s.useLayoutEffect)((function(){var e=function(e){n(e.target.innerHeight)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),{innerHeight:a}}().innerHeight;return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{layout:!0,className:Y.a.messagesWrapper,style:{height:t-168+"px"},children:Object(L.jsx)(ne.a,{className:"x-hidden",children:S.messages.map((function(t,a){var s=t.message,n=t.uid,c=t.date;return Object(L.jsx)(se,{message:s,userUid:e.uid,uid:n,date:c},"message_key_".concat(a))}))})})})})),re=a(44),ie=Object(k.a)((function(){return Object(s.useEffect)((function(){S.createDialogId()}),[]),Object(s.useEffect)((function(){if(S.dialogId){var e=Object(re.g)(Object(re.c)(_,"dialogs",S.dialogId),(function(e){var t=e.data();t?t.messages.length>0&&S.setMessages(t.messages):S.setMessages([])}));return function(){e(),S.setAll()}}}),[]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(G,{}),Object(L.jsxs)(q,{children:[S.loading?Object(L.jsx)(D,{}):Object(L.jsx)(ce,{}),Object(L.jsx)(ae,{})]})]})})),oe=a(58),le=a.n(oe);var ue=function(e){var t=e.searchUsers,a=Object(s.useRef)();return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(P,{children:[Object(L.jsx)(h.b,{to:j.dialogs,className:le.a.backButton,children:Object(L.jsx)(Z,{})}),Object(L.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",className:le.a.input,onChange:function(){t(a)},ref:a})]})})},je=a(41),de=a.n(je);var be=function(e){var t=e.user,a=t.name,s=t.uid,n=t.email,c=t.avatar;return Object(L.jsx)(h.b,{to:j.messages+"/".concat(t.uid),onClick:function(){return S.setActiveDialog({email:n,uid:s,name:a,avatar:c})},children:Object(L.jsxs)("div",{className:de.a.container,children:[Object(L.jsx)("div",{className:de.a.avatar,children:Object(L.jsx)("img",{src:t.avatar?t.avatar:null,alt:""})}),Object(L.jsxs)("div",{className:de.a.info,children:[Object(L.jsxs)("div",{className:"".concat(de.a.title," text-mw"),children:[" ",t.name," "]}),Object(L.jsxs)("div",{className:"".concat(de.a.date," text-mw"),children:[" ",t.email," "]})]})]})})};var he=function(e){var t=e.users;return Object(L.jsx)(L.Fragment,{children:0!==t.length?t.map((function(e){return Object(L.jsx)(be,{user:e},e.uid)})):Object(L.jsx)("div",{className:"not-dialogs",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})})},Oe=Object(k.a)((function(){var e=Object(u.g)();N.user&&0!==C.users.length||e.push("/");var t=Object(s.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.current.value,C.searchUsers(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ue,{searchUsers:t}),Object(L.jsx)(q,{children:Object(L.jsx)(he,{users:C.searchedUsers})})]})})),me=a(59),fe=a.n(me);function ve(){return Object(L.jsxs)(P,{children:[Object(L.jsx)(h.b,{to:"/im",className:fe.a.backButton,children:Object(L.jsx)(Z,{})}),Object(L.jsx)("div",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(L.jsx)(h.b,{to:"/search",className:fe.a.searchButton,children:Object(L.jsx)(F,{})})]})}var ge=a(22),xe=a.n(ge),pe=a(32),_e=a.n(pe),we=a(40);function Ne(e){var t=e.setModal;return c.a.createPortal(Object(L.jsx)(ke,{setModal:t}),document.body)}function ke(e){var t=e.setModal,a=Object(s.useState)(!1),n=Object(l.a)(a,2),c=n[0],r=n[1],u=Object(s.useRef)(null),j=function(){var e=Object(o.a)(i.a.mark((function e(a){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),r(!0),!((s=u.current.value.trim()).length>0)){e.next=6;break}return e.next=6,N.editUserName(s);case 6:r(!1),t(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e){e.stopPropagation(),"close"!==e.target.dataset.close||c||t(!1)};return Object(L.jsx)("div",{className:_e.a.modal,"data-close":"close",onClick:d,children:Object(L.jsx)(we.motion.div,{initial:{y:"100%"},animate:{y:"0%"},children:Object(L.jsxs)("div",{className:_e.a.modalContent,children:[Object(L.jsxs)("form",{onSubmit:j,className:_e.a.form,children:[Object(L.jsx)("input",{autoFocus:!0,ref:u,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",type:"text"}),Object(L.jsx)("button",{disabled:c,children:c?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(L.jsx)("button",{onClick:d,"data-close":"close",className:_e.a.close,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})})})}var ye=a(42);function Ce(e){var t=e.setModal;return c.a.createPortal(Object(L.jsx)(Me,{setModal:t}),document.body)}function Me(e){var t=e.setModal,a=Object(s.useState)(!1),n=Object(l.a)(a,2),c=n[0],r=n[1],u=N.user,j=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b(t.target.files[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){r(!1),t(!1)},b=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,s,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(!0),!(t.size>10485760)){e.next=6;break}alert("\u0420\u0430\u0437\u043c\u0435\u0440 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439"),d(),e.next=16;break;case 6:if("image/png"===t.type||"image/jpg"===t.type||"image/jpeg"===t.type){e.next=11;break}alert("\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f (png/jpg/jpeg)"),d(),e.next=16;break;case 11:return a=u.uid+"_avatar",s=Object(ye.b)(),n=Object(ye.c)(s,a),e.next=16,Object(ye.d)(n,t).then((function(){Object(ye.a)(Object(ye.c)(s,a)).then(function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,e.next=3,N.editUserAvatar(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430. "+e.message)})).finally((function(){d()}))}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){e.stopPropagation(),"close"!==e.target.dataset.close||c||t(!1)};return Object(L.jsx)("div",{className:_e.a.modal,"data-close":"close",onClick:h,children:Object(L.jsx)(we.motion.div,{initial:{y:"100%"},animate:{y:"0%"},children:Object(L.jsxs)("div",{className:_e.a.modalContent,children:[Object(L.jsxs)("form",{onChange:j,className:_e.a.form,children:[!c&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("label",{className:_e.a.labelAvatar,htmlFor:"avatar",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"}),Object(L.jsx)("input",{className:_e.a.inputAvatar,type:"file",id:"avatar"})]}),c&&Object(L.jsx)("div",{className:_e.a.labelAvatar,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]}),!c&&Object(L.jsx)("button",{onClick:h,"data-close":"close",className:_e.a.close,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})})})}var Se=a(51),Le=a.n(Se);function ze(e){return c.a.createPortal(Object(L.jsx)(De,Object(O.a)({},e)),document.body)}function De(e){var t=e.message,a=e.closeAlert,n=Object(s.useState)(!1),c=Object(l.a)(n,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){var e=setTimeout((function(){i(!0)}),4e3);return function(){return clearTimeout(e)}}),[a]),Object(L.jsx)("div",{className:Le.a.wrapper,children:Object(L.jsx)(we.motion.div,{initial:{opacity:0},animate:r?"":{opacity:1},transition:{duration:.2},children:Object(L.jsx)("div",{className:Le.a.alert,children:Object(L.jsx)("span",{className:Le.a.container,children:t})})})})}var He=function(){return Object(L.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"user-astronaut",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:Object(L.jsx)("path",{fill:"currentColor",d:"M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z"})})},Ae=function(){return Object(L.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"edit",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:Object(L.jsx)("path",{fill:"currentColor",d:"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"})})},Be=function(){return Object(L.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"user-friends",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",children:Object(L.jsx)("path",{fill:"currentColor",d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"})})},Ie=function(){return Object(L.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"sign-out-alt",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(L.jsx)("path",{fill:"currentColor",d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"})})},Ee=function(){return Object(L.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"question",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",children:Object(L.jsx)("path",{fill:"currentColor",d:"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"})})},Pe=Object(k.a)((function(){var e=Object(u.g)(),t=N.user;Object(s.useEffect)((function(){t||e.replace("/")}),[e,t]);var a=Object(s.useState)(!1),n=Object(l.a)(a,2),c=n[0],r=n[1],d=Object(s.useState)(!1),b=Object(l.a)(d,2),h=b[0],O=b[1],m=Object(s.useState)(!1),f=Object(l.a)(m,2),v=f[0],g=f[1],x=Object(s.useState)(null),p=Object(l.a)(x,2),_=p[0],w=p[1],k=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\u041f\u0440\u0438\u0432\u0435\u0442, \u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e Memssenger \u0434\u043b\u044f \u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438. \u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0441\u044f \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435: https://ozcnii.github.io/memssenger",e.prev=1,e.next=4,navigator.clipboard.writeText("\u041f\u0440\u0438\u0432\u0435\u0442, \u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e Memssenger \u0434\u043b\u044f \u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438. \u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0441\u044f \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435: https://ozcnii.github.io/memssenger");case 4:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430",w("\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430"),g(!0),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",w("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),g(!0);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(L.jsxs)(L.Fragment,{children:[c&&Object(L.jsx)(Ne,{setModal:r}),h&&Object(L.jsx)(Ce,{setModal:O}),v&&Object(L.jsx)(ze,{message:_,closeAlert:g}),t?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:xe.a.main,children:Object(L.jsxs)("div",{className:xe.a.top,children:[Object(L.jsx)("div",{className:xe.a.avatar,children:(null===t||void 0===t?void 0:t.avatar)&&Object(L.jsx)("img",{src:t.avatar,alt:""})}),Object(L.jsxs)("div",{className:xe.a.info,children:[Object(L.jsxs)("div",{className:"".concat(xe.a.userName," text-mw-100"),children:[t.name," "]}),Object(L.jsx)("div",{className:"text-mw-100",children:t.email})]})]})}),Object(L.jsxs)("div",{className:xe.a.settings,children:[Object(L.jsxs)("div",{className:xe.a.edit,onClick:function(){O(!0)},children:[Object(L.jsx)("div",{className:xe.a.icon,children:Object(L.jsx)(He,{})}),Object(L.jsx)("span",{children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440 "})]}),Object(L.jsxs)("div",{className:xe.a.edit,onClick:function(){r(!0)},children:[Object(L.jsx)("div",{className:xe.a.icon,children:Object(L.jsx)(Ae,{})}),Object(L.jsx)("span",{children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u043c\u044f"})]}),Object(L.jsxs)("a",{href:"https://github.com/ttenapp/memssenger",target:"blank",className:xe.a.edit,children:[Object(L.jsx)("div",{className:xe.a.icon,children:Object(L.jsx)(Ee,{})}),Object(L.jsx)("span",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"})]}),Object(L.jsxs)("div",{className:xe.a.edit,onClick:k,children:[Object(L.jsx)("div",{className:xe.a.icon,children:Object(L.jsx)(Be,{})}),Object(L.jsx)("span",{children:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"})]}),Object(L.jsxs)("div",{className:xe.a.edit+" "+xe.a.last,onClick:function(){localStorage.setItem("user",null),N.setUser(null),e.push(j.login)},children:[Object(L.jsx)("div",{className:xe.a.icon,children:Object(L.jsx)(Ie,{})}),Object(L.jsx)("span",{children:"\u0412\u044b\u0445\u043e\u0434"})]})]})]}):null]})}));function Fe(){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ve,{}),Object(L.jsx)(q,{children:Object(L.jsx)(Pe,{})})]})}var Ue=a(21),Ve=a.n(Ue),Re=Object(k.a)((function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!1),r=Object(l.a)(c,2),d=r[0],b=r[1],O=Object(s.useState)(null),m=Object(l.a)(O,2),f=m[0],v=m[1],g=Object(u.g)(),x=Object(s.useRef)(null),p=Object(s.useRef)(null),_=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=x.current.value.trim(),s=p.current.value.trim(),!a||!s){e.next=22;break}return n(!0),e.prev=5,e.next=8,N.login(a,s);case 8:c=e.sent,localStorage.setItem("user",JSON.stringify(c)),g.push(j.dialogs),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),v(e.t0.message),b(!0);case 17:return e.prev=17,n(!1),e.finish(17);case 20:e.next=24;break;case 22:v("\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"),b(!0);case 24:case"end":return e.stop()}}),e,null,[[5,13,17,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){N.user&&g.push(j.dialogs)}),[g]),Object(L.jsxs)(L.Fragment,{children:[d&&Object(L.jsx)(ze,{message:f,closeAlert:b}),Object(L.jsxs)("div",{className:Ve.a.container,children:[Object(L.jsx)("div",{className:Ve.a.title,children:"\u0412\u0445\u043e\u0434"}),Object(L.jsxs)("form",{onSubmit:_,className:Ve.a.form,children:[Object(L.jsx)("input",{ref:x,type:"email",placeholder:"\u042d\u043b. \u0430\u0434\u0440\u0435\u0441",className:Ve.a.login,required:!0}),Object(L.jsx)("input",{ref:p,type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:Ve.a.password,required:!0}),Object(L.jsx)("button",{type:"submit",className:Ve.a.submit,children:a?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u0412\u043e\u0439\u0442\u0438"}),Object(L.jsx)("div",{children:Object(L.jsx)(h.b,{to:j.registr,className:Ve.a.registr,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})]})]})})),Je=Object(k.a)((function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!1),r=Object(l.a)(c,2),d=r[0],b=r[1],O=Object(s.useState)(null),m=Object(l.a)(O,2),f=m[0],v=m[1],g=Object(u.g)(),x=Object(s.useRef)(null),p=Object(s.useRef)(null),_=Object(s.useRef)(null),w=Object(s.useRef)(null),k=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,s,c,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=x.current.value.trim(),s=p.current.value.trim(),c=_.current.value.trim(),r=w.current.value.trim(),!(a&&s&&r&&c&&s===c)){e.next=24;break}return e.prev=6,n(!0),e.next=10,N.register(a,s,r);case 10:(o=e.sent)&&localStorage.setItem("user",JSON.stringify(o)),g.push("/chat"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),v(e.t0.message),b(!0);case 19:return e.prev=19,n(!1),e.finish(19);case 22:e.next=25;break;case 24:s!==c?(v("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"),b(!0)):(v("\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"),b(!0));case 25:case"end":return e.stop()}}),e,null,[[6,15,19,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){N.user&&g.push(j.dialogs)}),[g]),Object(L.jsxs)(L.Fragment,{children:[d&&Object(L.jsx)(ze,{message:f,closeAlert:b}),Object(L.jsxs)("div",{className:Ve.a.container,children:[Object(L.jsx)("div",{className:Ve.a.title,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(L.jsxs)("form",{onSubmit:k,className:Ve.a.form,children:[Object(L.jsx)("input",{type:"email",ref:x,placeholder:"\u042d\u043b. \u0430\u0434\u0440\u0435\u0441",className:Ve.a.login,required:!0}),Object(L.jsx)("input",{type:"text",ref:p,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:Ve.a.password,required:!0}),Object(L.jsx)("input",{type:"text",ref:_,placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",className:Ve.a.passwordConfirm,required:!0}),Object(L.jsx)("input",{type:"text",ref:w,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f",className:Ve.a.passwordConfirm,required:!0}),Object(L.jsx)("button",{type:"submit",className:Ve.a.submit,children:a?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(L.jsx)("div",{children:Object(L.jsx)(h.b,{to:j.login,className:Ve.a.logIn,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})]})})),qe=Object(k.a)((function(){var e=Object(s.useState)(!0),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(u.g)();return Object(s.useEffect)((function(){Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=JSON.parse(localStorage.getItem("user")))||!t.uid){e.next=6;break}return e.next=4,N.getMe(null===t||void 0===t?void 0:t.uid);case 4:e.next=7;break;case 6:c.push("/");case 7:n(!1);case 8:case"end":return e.stop()}}),e)})))()}),[c]),a?Object(L.jsx)(D,{}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:"header-background"}),Object(L.jsxs)(u.d,{children:[Object(L.jsx)(u.b,{exact:!0,path:"/",render:function(){return Object(L.jsx)(u.a,{to:j.login})}}),Object(L.jsx)(u.b,{path:j.dialogs,render:function(){return Object(L.jsx)(W,{})}}),Object(L.jsx)(u.b,{path:j.messages+"/:id",render:function(){return Object(L.jsx)(ie,{})}}),Object(L.jsx)(u.b,{path:j.settings,render:function(){return Object(L.jsx)(Fe,{})}}),Object(L.jsx)(u.b,{path:j.search,render:function(){return Object(L.jsx)(Oe,{})}}),Object(L.jsx)(u.b,{path:j.login,render:function(){return Object(L.jsx)(Re,{})}}),Object(L.jsx)(u.b,{path:j.registr,render:function(){return Object(L.jsx)(Je,{})}}),Object(L.jsx)(u.b,{path:"*",render:function(){return Object(L.jsx)(u.a,{to:j.dialogs})}})]})]})})),We=document.getElementById("root");c.a.render(Object(L.jsx)(s.StrictMode,{children:Object(L.jsx)(h.a,{children:Object(L.jsx)(qe,{})})}),We)}},[[91,1,2]]]);
//# sourceMappingURL=main.27f756f8.chunk.js.map