{"version":3,"sources":["pages/LoginPage/LoginPage.module.css","pages/SettingsPage/SettingsContainer/SettingsContainer.module.css","pages/MessagePage/Messages.module.css","components/Modals/EditName/EditName.module.css","pages/DialogsPage/Dialog/Dialog.module.css","pages/SearchPage/LastList/LastItem/LastItem.module.css","components/Alert/Alert.module.css","pages/DialogsPage/Header/Header.module.css","components/Layout/Header/HeaderComponent.module.css","pages/MessagePage/Header/Header.module.css","pages/SearchPage/Header/Header.module.css","pages/SettingsPage/Header/Header.module.css","components/Layout/Body/BodyComponent.module.css","routes/routes.js","utils/get_date.js","pages/DialogsPage/Dialog/Dialog.jsx","components/Layout/Body/BodyComponent.jsx","firebase.js","components/Preloader/Preloader.jsx","pages/DialogsPage/Dialogs/Dialogs.jsx","components/Layout/Header/HeaderComponent.jsx","pages/DialogsPage/Header/Header.jsx","pages/DialogsPage/index.jsx","pages/MessagePage/Header/Header.jsx","pages/MessagePage/FormMessage/FormMessage.jsx","pages/MessagePage/Message/Message.jsx","pages/MessagePage/MessagesWrapper/MessagesWrapper.jsx","pages/MessagePage/index.jsx","pages/SearchPage/Header/Header.jsx","pages/SearchPage/LastList/LastItem/LastItem.jsx","pages/SearchPage/LastList/LastList.jsx","pages/SearchPage/index.jsx","pages/SettingsPage/Header/Header.jsx","components/Modals/EditName/EditName.jsx","components/Modals/EditAvatar/EditAvatar.jsx","components/Alert/Alert.jsx","pages/SettingsPage/SettingsContainer/SettingContainer.jsx","pages/SettingsPage/index.jsx","pages/LoginPage/index.jsx","pages/LoginPage/RegistrationPage/RegistrationPage.jsx","App.jsx","index.jsx"],"names":["module","exports","routes","dialogs","messages","settings","search","login","registr","getDate","date","thisDate","Date","seconds","hours","getHours","minutes","getMinutes","Message","user","setDialog","authUser","useState","lastMessage","setLastMessage","isLoading","setIsLoading","name","uid","email","avatar","useEffect","getLastMessage","forEach","dialog","dialog_id","includes","lastIndex","length","newLastMessage","to","className","styles","messageContainer","onClick","src","alt","info","top","userName","message","BodyComponent","children","s","container","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","auth","getAuth","Preloader","Dialogs","setUser","chats","setChats","history","useHistory","setDialogs","JSON","parse","localStorage","getItem","push","a","getDocs","collection","querySnapshop","filteredUsers","docs","map","doc","data","filter","getAuthUserDialogs","authUserDialogs","allMessages","chat","Dialog","HeaderComponent","wrapper","Header","menuButton","xmlns","height","viewBox","width","fill","d","searchButton","DialogsPage","backButton","userAvatar","FormMessage","onSubmit","setNewMessage","newMessage","emojiPopover","setEmojiPopover","formWrapper","form","event","value","onChange","e","target","input","type","placeholder","stopPropagation","pickerStyle","boxShadow","onEmojiClick","emojiObject","emoji","send","userUid","messageDate","style","justifyContent","textAlign","messageText","innerHeight","window","MessagesWrapper","messagesWrapper","i","Messages","setMessages","dialogId","setDialogId","sendMessage","preventDefault","trim","myMessage","dialogRef","getDoc","docSnap","exists","docData","updateDoc","setDoc","myConvId","onSnapshot","currentData","goToDialogs","keyCode","code","goBack","document","addEventListener","removeEventListener","searchUsers","searchRef","useRef","ref","LastItem","title","LastList","users","SearchPage","setUsers","getUsers","localUser","searchInput","current","EditName","setModal","ReactDOM","createPortal","Modal","body","newName","myName","userId","citiesRef","q","query","where","id","nameRef","newUser","setItem","stringify","onClose","dataset","close","modal","data-close","modalContent","autoFocus","file","files","getAvatarUrl","size","alert","avatarName","storage","getStorage","storageRef","uploadBytes","then","getDownloadURL","url","updateAvatar","catch","error","console","log","avatarUrl","docID","avatarRef","labelAvatar","htmlFor","inputAvatar","Alert","closeAlert","isClosed","setIsClosed","setTimeout","SettingsContainer","editNameModal","setEditNameModal","editAvatarModal","setEditAvatarModal","showAlert","setAlert","alertText","setAlertText","saveToBuffer","navigator","clipboard","writeText","main","edit","icon","aria-hidden","focusable","data-prefix","data-icon","role","href","last","SettingsPage","LoginPage","setShowAlert","password","myEmail","myPassword","signInWithEmailAndPassword","responseFromAuth","myAvatar","text","submit","RegistrationPage","confirmPassword","register","myConfirmPassword","createUserWithEmailAndPassword","addDoc","passwordConfirm","logIn","App","exact","path","render","rootElement","getElementById"],"mappings":"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","file":"static/js/main.c586131f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LoginPage_container__1RIQA\",\"title\":\"LoginPage_title__1vt9e\",\"form\":\"LoginPage_form__3H2UY\",\"login\":\"LoginPage_login__35KoP\",\"password\":\"LoginPage_password__44Akj\",\"passwordConfirm\":\"LoginPage_passwordConfirm__b0D4h\",\"submit\":\"LoginPage_submit__3MH80\",\"google\":\"LoginPage_google__314qS\",\"facebook\":\"LoginPage_facebook__2AGgj\",\"registr\":\"LoginPage_registr__24fhz\",\"logIn\":\"LoginPage_logIn__3BlGN\",\"googleIcon\":\"LoginPage_googleIcon__DZ0pe\",\"fbIcon\":\"LoginPage_fbIcon__3kwIy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"SettingsContainer_header__1SXVC\",\"top\":\"SettingsContainer_top__-xMDE\",\"avatar\":\"SettingsContainer_avatar__esP34\",\"info\":\"SettingsContainer_info__17IZ_\",\"userName\":\"SettingsContainer_userName__2_VdF\",\"edit\":\"SettingsContainer_edit__38IdM\",\"icon\":\"SettingsContainer_icon__28bIC\",\"last\":\"SettingsContainer_last__8gblu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Messages_wrapper__3ECC9\",\"formWrapper\":\"Messages_formWrapper__1W4zS\",\"messages\":\"Messages_messages__3rkfT\",\"form\":\"Messages_form__3GhiH\",\"input\":\"Messages_input__6NnRE\",\"send\":\"Messages_send__2kr13\",\"messagesWrapper\":\"Messages_messagesWrapper__bjyzV\",\"messageContainer\":\"Messages_messageContainer__37r4z\",\"message\":\"Messages_message__D0aAb\",\"messageDate\":\"Messages_messageDate__315P7\",\"noMessages\":\"Messages_noMessages__3hNF9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"EditName_modal__2VIbH\",\"modalContent\":\"EditName_modalContent__1BVm6\",\"form\":\"EditName_form__2ZxRj\",\"close\":\"EditName_close__27CfM\",\"inputAvatar\":\"EditName_inputAvatar__2nBoS\",\"labelAvatar\":\"EditName_labelAvatar__7nV3G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageContainer\":\"Dialog_messageContainer__c7Zl6\",\"avatar\":\"Dialog_avatar__1zUBO\",\"info\":\"Dialog_info__29FDB\",\"top\":\"Dialog_top__1OKsB\",\"date\":\"Dialog_date__327nK\",\"userName\":\"Dialog_userName__6s1EX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LastItem_container__TEnTp\",\"avatar\":\"LastItem_avatar__3sysp\",\"info\":\"LastItem_info__1WWVx\",\"date\":\"LastItem_date__lGbg3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"Alert_alert__cGDqi\",\"show\":\"Alert_show__3aKWc\",\"container\":\"Alert_container__OvbIo\",\"close\":\"Alert_close__4UO1z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuButton\":\"Header_menuButton__3-UdR\",\"searchButton\":\"Header_searchButton__cJU5n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HeaderComponent_container__1pRFb\",\"wrapper\":\"HeaderComponent_wrapper__39GmX\",\"App-header\":\"HeaderComponent_App-header__3YPkh\",\"App-link\":\"HeaderComponent_App-link__OmSec\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backButton\":\"Header_backButton__1c1V4\",\"userAvatar\":\"Header_userAvatar__2xoo4\",\"container\":\"Header_container__2UVIn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backButton\":\"Header_backButton__3NynG\",\"container\":\"Header_container__f8qQ9\",\"input\":\"Header_input__18w18\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1j4OA\",\"backButton\":\"Header_backButton__6Y5fU\",\"searchButton\":\"Header_searchButton__2o6el\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BodyComponent_container__aEJsO\"};","const routes = {\r\n    dialogs: \"/dialogs\",\r\n    messages: \"/im\",\r\n    settings: \"/settings\",\r\n    search: \"/search\",\r\n    login: \"/login\",\r\n    registr: \"/register\",\r\n};\r\n\r\nexport default routes;\r\n","export default function getDate(date) {\r\n    if (date) {\r\n        const thisDate = new Date(date.seconds * 1000);\r\n\r\n        let hours = thisDate.getHours();\r\n        if (hours < 10) {\r\n            hours = \"0\" + hours;\r\n        }\r\n\r\n        let minutes = thisDate.getMinutes();\r\n        if (minutes < 10) {\r\n            minutes = \"0\" + minutes;\r\n        }\r\n\r\n        const messageDate = `${hours}:${minutes}`;\r\n\r\n        return messageDate;\r\n    }\r\n}\r\n","import styles from \"./Dialog.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useEffect, useState } from \"react\";\r\nimport getDate from \"../../../utils/get_date\";\r\n\r\nfunction Message({ user, setDialog, authUser, dialogs }) {\r\n    const [lastMessage, setLastMessage] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const { name, uid, email, avatar } = user;\r\n\r\n    useEffect(() => {\r\n        const lastMessage = getLastMessage(dialogs, user);\r\n        setLastMessage(lastMessage);\r\n        setIsLoading(false);\r\n    }, [dialogs, user]);\r\n\r\n    const getLastMessage = (dialogs, user) => {\r\n        let lastMessage = [];\r\n\r\n        dialogs.forEach((dialog) => {\r\n            if (dialog[0].dialog_id.includes(user.uid)) {\r\n                const lastIndex = dialog.length - 1;\r\n                lastMessage = dialog[lastIndex];\r\n            }\r\n        });\r\n\r\n        if (lastMessage.length !== 0) {\r\n            const date = getDate(lastMessage.date);\r\n            const newLastMessage = {\r\n                ...lastMessage,\r\n                date,\r\n            };\r\n            lastMessage = newLastMessage;\r\n        }\r\n\r\n        return lastMessage;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {lastMessage && lastMessage.length !== 0 ? (\r\n                <NavLink\r\n                    to={routes.messages + `/${uid}`}\r\n                    className={styles.messageContainer}\r\n                    onClick={() => setDialog({ email, uid, name, avatar })}\r\n                >\r\n                    <div className={styles.avatar}>\r\n                        {user?.avatar && <img src={user.avatar} alt=\"\" />}\r\n                    </div>\r\n\r\n                    <div className={styles.info}>\r\n                        <div className={styles.top}>\r\n                            <div className={`${styles.userName} text-mw`}>\r\n                                {name}\r\n                            </div>\r\n                            <div className={styles.date}>\r\n                                {isLoading\r\n                                    ? null\r\n                                    : lastMessage.length === 0\r\n                                    ? null\r\n                                    : lastMessage?.date}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"text-mw\">\r\n                            {isLoading\r\n                                ? \"Загрузка...\"\r\n                                : lastMessage.length !== 0\r\n                                ? lastMessage.uid === authUser.uid\r\n                                    ? `Вы: ${lastMessage.message}`\r\n                                    : lastMessage.message\r\n                                : \"Сообщений не найдено\"}\r\n                        </div>\r\n                    </div>\r\n                </NavLink>\r\n            ) : null}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Message;\r\n","import s from \"./BodyComponent.module.css\";\r\n\r\nexport default function BodyComponent({ children }) {\r\n    return <div className={s.container}>{children}</div>;\r\n}\r\n","// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAtz3-Jp3MsxNLBujPPCLcwUJm6YpPyGQg\",\r\n    authDomain: \"memssenger-c0d86.firebaseapp.com\",\r\n    projectId: \"memssenger-c0d86\",\r\n    storageBucket: \"memssenger-c0d86.appspot.com\",\r\n    messagingSenderId: \"271283967966\",\r\n    appId: \"1:271283967966:web:0b4e1a68a6aa42d5ebef4f\",\r\n    measurementId: \"G-YLB9Z3H722\",\r\n};\r\n\r\n// Initialize Firebase\r\ninitializeApp(firebaseConfig);\r\n\r\nconst db = getFirestore();\r\nconst auth = getAuth();\r\n\r\nexport { db, auth };\r\n","import \"./preloader.css\";\r\n\r\nexport default function Preloader() {\r\n    return (\r\n        <div className=\"preloader-wrapper\">\r\n            <div className=\"loadingio-spinner-spinner-sczevsac37c\">\r\n                <div className=\"ldio-cg0exsdxg3p\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import Dialog from \"../Dialog/Dialog\";\r\nimport BodyComponent from \"../../../components/Layout/Body/BodyComponent\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { collection, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"../../../firebase\";\r\nimport Preloader from \"../../../components/Preloader/Preloader\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nfunction Dialogs({ user, setUser, chats, setChats, setDialog }) {\r\n    const history = useHistory();\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [dialogs, setDialogs] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n        if (user) {\r\n            setUser(user);\r\n        } else {\r\n            history.push(\"/\");\r\n        }\r\n    }, [history, setUser]);\r\n\r\n    useEffect(() => {\r\n        if (!user) return;\r\n\r\n        (async () => {\r\n            const querySnapshop = await getDocs(collection(db, \"users\"));\r\n            const filteredUsers = querySnapshop.docs\r\n                .map((doc) => doc.data())\r\n                .filter((doc) => doc.uid !== user.uid);\r\n\r\n            setChats(filteredUsers);\r\n            setIsLoading(false);\r\n        })();\r\n    }, [user, setChats]);\r\n\r\n    useEffect(() => {\r\n        const authUser = user;\r\n\r\n        (async () => {\r\n            const authUserDialogs = await getAuthUserDialogs(authUser);\r\n            setDialogs(authUserDialogs);\r\n        })();\r\n    }, [user]);\r\n\r\n    const getAuthUserDialogs = async (authUser) => {\r\n        const querySnapshop = await getDocs(collection(db, \"dialogs\"));\r\n        const allMessages = querySnapshop.docs.map((doc) => doc.data());\r\n\r\n        const authUserDialogs = [];\r\n\r\n        allMessages.forEach((message) => {\r\n            if (message.messages[0].dialog_id.includes(authUser?.uid)) {\r\n                authUserDialogs.push(message.messages);\r\n            }\r\n        });\r\n\r\n        return authUserDialogs;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <BodyComponent>\r\n                {isLoading ? (\r\n                    <Preloader />\r\n                ) : dialogs.length !== 0 ? (\r\n                    <>\r\n                        {chats.map((chat) => (\r\n                            <Dialog\r\n                                key={chat.uid}\r\n                                user={chat}\r\n                                setDialog={setDialog}\r\n                                authUser={user}\r\n                                dialogs={dialogs}\r\n                            />\r\n                        ))}\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <div className=\"not-dialogs\">Сообщений не найдено</div>\r\n                        <div className=\"to-search\">\r\n                            <NavLink to={\"search\"}>\r\n                                {\" \"}\r\n                                К списку пользователей{\" \"}\r\n                            </NavLink>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </BodyComponent>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Dialogs;\r\n","import styles from \"./HeaderComponent.module.css\";\r\n\r\nexport default function HeaderComponent({ children }) {\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <div className={styles.container}>{children}</div>\r\n        </div>\r\n    );\r\n}\r\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./Header.module.css\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\n\r\nfunction Header() {\r\n    return (\r\n        <>\r\n            <HeaderComponent>\r\n                <NavLink to={routes.settings} className={styles.menuButton}>\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24px\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        width=\"24px\"\r\n                        fill=\"#000000\"\r\n                    >\r\n                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                        <path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\" />\r\n                    </svg>\r\n                </NavLink>\r\n\r\n                <div className=\"appTitle\">Memssenger</div>\r\n\r\n                <NavLink to={routes.search} className={styles.searchButton}>\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24px\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        width=\"24px\"\r\n                        fill=\"#000000\"\r\n                    >\r\n                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                        <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\r\n                    </svg>\r\n                </NavLink>\r\n            </HeaderComponent>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import Dialogs from \"./Dialogs/Dialogs\";\r\nimport Header from \"./Header/Header\";\r\n\r\nexport default function DialogsPage({\r\n    user,\r\n    setUser,\r\n    chats,\r\n    setChats,\r\n    setDialog,\r\n}) {\r\n    return (\r\n        <>\r\n            <Header />\r\n            <Dialogs\r\n                user={user}\r\n                setUser={setUser}\r\n                chats={chats}\r\n                setChats={setChats}\r\n                setDialog={setDialog}\r\n            />\r\n        </>\r\n    );\r\n}\r\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./Header.module.css\";\r\n\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nfunction Header({ dialog }) {\r\n    const history = useHistory();\r\n\r\n    if (!dialog) {\r\n        history.push(routes.dialogs);\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <HeaderComponent>\r\n                <NavLink to={routes.dialogs} className={styles.backButton}>\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24px\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        width=\"24px\"\r\n                        fill=\"#000000\"\r\n                    >\r\n                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                        <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n                    </svg>\r\n                </NavLink>\r\n\r\n                <div className=\"appTitle text-mw\">{dialog.name}</div>\r\n\r\n                <div className={styles.userAvatar}>\r\n                    <img src={dialog?.avatar} alt=\"\" />\r\n                </div>\r\n            </HeaderComponent>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import React, { useState } from \"react\";\r\nimport s from \"../Messages.module.css\";\r\nimport Picker from \"emoji-picker-react\";\r\n\r\nexport default function FormMessage({ onSubmit, setNewMessage, newMessage }) {\r\n    const [emojiPopover, setEmojiPopover] = useState(false);\r\n\r\n    const onEmojiClick = (event, emojiObject) => {\r\n        setNewMessage((e) => `${e} ${emojiObject.emoji}`);\r\n    };\r\n\r\n    return (\r\n        <div className={s.wrapper}>\r\n            <div className={s.formWrapper}>\r\n                <form\r\n                    className={s.form}\r\n                    onSubmit={(event) => {\r\n                        onSubmit(event);\r\n                        setEmojiPopover(false);\r\n                    }}\r\n                >\r\n                    <input\r\n                        value={newMessage}\r\n                        onChange={(e) => setNewMessage(e.target.value)}\r\n                        className={s.input}\r\n                        type=\"text\"\r\n                        placeholder=\"Сообщение\"\r\n                    />\r\n\r\n                    {/* picker  */}\r\n                    <div\r\n                        onClick={() => setEmojiPopover(!emojiPopover)}\r\n                        className=\"emoji-button\"\r\n                    >\r\n                        <svg\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            height=\"24px\"\r\n                            viewBox=\"0 0 24 24\"\r\n                            width=\"24px\"\r\n                            fill=\"#383838\"\r\n                        >\r\n                            <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                            <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z\" />\r\n                        </svg>\r\n                        {/* ass */}\r\n                        {emojiPopover ? (\r\n                            <div\r\n                                onClick={(e) => e.stopPropagation()}\r\n                                className=\"emoji-popover\"\r\n                            >\r\n                                <Picker\r\n                                    pickerStyle={{\r\n                                        boxShadow: \"none\",\r\n                                    }}\r\n                                    onEmojiClick={onEmojiClick}\r\n                                />\r\n                            </div>\r\n                        ) : null}\r\n                    </div>\r\n\r\n                    <button className={s.send}>\r\n                        <svg\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            viewBox=\"0 0 24 24\"\r\n                            width=\"24px\"\r\n                            fill=\"#000000\"\r\n                        >\r\n                            <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                            <path d=\"M4.01 6.03l7.51 3.22-7.52-1 .01-2.22m7.5 8.72L4 17.97v-2.22l7.51-1M2.01 3L2 10l15 2-15 2 .01 7L23 12 2.01 3z\" />\r\n                        </svg>\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import s from \"../Messages.module.css\";\r\nimport getDate from \"../../../utils/get_date\";\r\n\r\nexport default function Message({ message, uid, userUid, date }) {\r\n    const messageDate = getDate(date);\r\n\r\n    return (\r\n        <div\r\n            className={s.messageContainer}\r\n            style={{\r\n                justifyContent: uid === userUid && \"flex-end\",\r\n                textAlign: uid === userUid && \"right\",\r\n            }}\r\n        >\r\n            <div className={s.message}>\r\n                <span className={s.messageText}>{message}</span>\r\n                {date ? (\r\n                    <span className={s.messageDate}> {messageDate} </span>\r\n                ) : null}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport s from \"../Messages.module.css\";\r\nimport Message from \"../Message/Message\";\r\nimport ScrollableFeed from \"react-scrollable-feed\";\r\n\r\nconst innerHeight = window.innerHeight;\r\n\r\nexport default function MessagesWrapper({ messages, user }) {\r\n    return (\r\n        <>\r\n            <div\r\n                className={s.messagesWrapper}\r\n                style={{ height: innerHeight - 168 + \"px\" }}\r\n            >\r\n                <ScrollableFeed>\r\n                    {messages.map(({ message, uid, date }, i) => (\r\n                        <Message\r\n                            key={`message_key_${i}`}\r\n                            message={message}\r\n                            userUid={user.uid}\r\n                            uid={uid}\r\n                            date={date}\r\n                        ></Message>\r\n                    ))}\r\n                </ScrollableFeed>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import Header from \"./Header/Header\";\r\nimport BodyComponent from \"../../components/Layout/Body/BodyComponent\";\r\nimport FormMessage from \"./FormMessage/FormMessage\";\r\nimport MessagesWrapper from \"./MessagesWrapper/MessagesWrapper\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { db } from \"../../firebase\";\r\nimport {\r\n    doc,\r\n    getDoc,\r\n    onSnapshot,\r\n    setDoc,\r\n    updateDoc,\r\n} from \"@firebase/firestore\";\r\nimport Preloader from \"../../components/Preloader/Preloader\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst Messages = ({ user, dialog }) => {\r\n    const history = useHistory();\r\n\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState(\"\");\r\n    const [dialogId, setDialogId] = useState(null);\r\n\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    const sendMessage = async (event) => {\r\n        event.preventDefault();\r\n\r\n        const message = newMessage;\r\n\r\n        if (message?.trim().length) {\r\n            const myMessage = {\r\n                message: message,\r\n                uid: user.uid,\r\n                date: new Date(),\r\n                dialog_id: dialogId,\r\n                name: user.name,\r\n            };\r\n\r\n            setNewMessage(\"\");\r\n\r\n            // add and save message to firestore\r\n            const dialogRef = doc(db, \"dialogs\", dialogId);\r\n            const docSnap = await getDoc(dialogRef);\r\n\r\n            // append message to existing dialogs\r\n            if (docSnap.exists()) {\r\n                const docData = docSnap.data();\r\n                await updateDoc(dialogRef, {\r\n                    messages: [...docData.messages, myMessage],\r\n                });\r\n            } else {\r\n                // create a new dialogs\r\n                await setDoc(doc(db, \"dialogs\", dialogId), {\r\n                    messages: [myMessage],\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!dialog || !user) return;\r\n\r\n        let myConvId = null;\r\n\r\n        if (dialog.uid > user.uid) {\r\n            myConvId = dialog.uid + user.uid;\r\n        } else {\r\n            myConvId = user.uid + dialog.uid;\r\n        }\r\n\r\n        setDialogId(myConvId);\r\n        setIsLoading(false);\r\n    }, [dialog, user]);\r\n\r\n    useEffect(() => {\r\n        if (!dialogId) return;\r\n\r\n        const unsub = onSnapshot(doc(db, \"dialogs\", dialogId), (doc) => {\r\n            const currentData = doc.data();\r\n\r\n            if (currentData) {\r\n                if (currentData.messages.length > 0) {\r\n                    setMessages(currentData.messages);\r\n                }\r\n            } else {\r\n                setMessages([]);\r\n            }\r\n        });\r\n\r\n        return unsub;\r\n    }, [dialogId]);\r\n\r\n    useEffect(() => {\r\n        function goToDialogs(event) {\r\n            if (event.keyCode === 27 || event.code === \"Escape\") {\r\n                history.goBack();\r\n            }\r\n        }\r\n\r\n        document.addEventListener(\"keydown\", (event) => goToDialogs(event));\r\n        return () => {\r\n            document.removeEventListener(\"keydown\", (event) =>\r\n                goToDialogs(event)\r\n            );\r\n        };\r\n    }, [history]);\r\n\r\n    return (\r\n        <>\r\n            <Header dialog={dialog} />\r\n\r\n            <BodyComponent>\r\n                {isLoading ? (\r\n                    <Preloader />\r\n                ) : (\r\n                    <MessagesWrapper messages={messages} user={user} />\r\n                )}\r\n\r\n                <FormMessage\r\n                    onSubmit={sendMessage}\r\n                    setNewMessage={setNewMessage}\r\n                    newMessage={newMessage}\r\n                />\r\n            </BodyComponent>\r\n        </>\r\n    );\r\n};\r\nexport default Messages;\r\n","import styles from \"./Header.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useRef } from \"react\";\r\n\r\nfunction Header({ searchUsers }) {\r\n    const searchRef = useRef();\r\n\r\n    const onChange = () => {\r\n        searchUsers(searchRef);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <HeaderComponent>\r\n                <NavLink to={routes.dialogs} className={styles.backButton}>\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24px\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        width=\"24px\"\r\n                        fill=\"#000000\"\r\n                    >\r\n                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                        <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n                    </svg>\r\n                </NavLink>\r\n\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Поиск\"\r\n                    className={styles.input}\r\n                    onChange={onChange}\r\n                    ref={searchRef}\r\n                />\r\n            </HeaderComponent>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../../routes/routes\";\r\nimport styles from \"./LastItem.module.css\";\r\n\r\nfunction LastItem({ user, setDialog }) {\r\n    const { name, uid, email, avatar } = user;\r\n\r\n    return (\r\n        <NavLink\r\n            to={routes.messages + `/${user.uid}`}\r\n            onClick={() => setDialog({ email, uid, name, avatar })}\r\n        >\r\n            <div className={styles.container}>\r\n                <div className={styles.avatar}>\r\n                    <img src={user.avatar ? user.avatar : null} alt=\"\" />\r\n                </div>\r\n\r\n                <div className={styles.info}>\r\n                    <div className={`${styles.title} text-mw`}>\r\n                        {\" \"}\r\n                        {user.name}{\" \"}\r\n                    </div>\r\n                    <div className={`${styles.date} text-mw`}>\r\n                        {\" \"}\r\n                        {user.email}{\" \"}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </NavLink>\r\n    );\r\n}\r\nexport default LastItem;\r\n","import Preloader from \"../../../components/Preloader/Preloader\";\r\nimport BodyComponent from \"../../../components/Layout/Body/BodyComponent\";\r\nimport LastItem from \"./LastItem/LastItem\";\r\n\r\nfunction LastList({ users, isLoading, setDialog }) {\r\n    return (\r\n        <BodyComponent>\r\n            {isLoading ? (\r\n                <Preloader />\r\n            ) : users.length !== 0 ? (\r\n                users.map((user) => (\r\n                    <LastItem\r\n                        key={user.uid}\r\n                        user={user}\r\n                        setDialog={setDialog}\r\n                    />\r\n                ))\r\n            ) : (\r\n                <div className=\"not-dialogs\">Пользователей не найдено</div>\r\n            )}\r\n        </BodyComponent>\r\n    );\r\n}\r\nexport default LastList;\r\n","import { useState, useEffect } from \"react\";\r\nimport Header from \"./Header/Header\";\r\nimport LastList from \"./LastList/LastList\";\r\nimport { collection, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"../../firebase\";\r\n\r\nfunction SearchPage({ user, setDialog }) {\r\n    const [users, setUsers] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    const getUsers = async (user) => {\r\n        let localUser = user;\r\n\r\n        if (!user) {\r\n            localUser = JSON.parse(localStorage.getItem(\"user\"));\r\n        }\r\n\r\n        (async () => {\r\n            const querySnapshop = await getDocs(collection(db, \"users\"));\r\n            const filteredUsers = querySnapshop.docs\r\n                .map((doc) => doc.data())\r\n                .filter((doc) => doc.uid !== localUser.uid);\r\n\r\n            setUsers(filteredUsers);\r\n            setIsLoading(false);\r\n            return filteredUsers;\r\n        })();\r\n    };\r\n\r\n    useEffect(() => {\r\n        getUsers(user);\r\n    }, [user]);\r\n\r\n    const searchUsers = async (searchRef) => {\r\n        const searchInput = searchRef.current.value;\r\n        const localUser = user;\r\n\r\n        if (searchInput.trim()) {\r\n            const filteredUsers = users.filter((user) =>\r\n                user.name.includes(searchInput)\r\n            );\r\n\r\n            setUsers(filteredUsers);\r\n        } else {\r\n            getUsers(localUser);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Header searchUsers={searchUsers} />\r\n            <LastList\r\n                users={users}\r\n                isLoading={isLoading}\r\n                setDialog={setDialog}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default SearchPage;\r\n","import styles from \"./Header.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\n\r\nexport default function Header() {\r\n    return (\r\n        <HeaderComponent>\r\n            <NavLink to=\"/im\" className={styles.backButton}>\r\n                <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    height=\"24px\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    width=\"24px\"\r\n                    fill=\"#000000\"\r\n                >\r\n                    <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                    <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n                </svg>\r\n            </NavLink>\r\n\r\n            <div>Настройки</div>\r\n\r\n            <NavLink to=\"/search\" className={styles.searchButton}>\r\n                <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    height=\"24px\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    width=\"24px\"\r\n                    fill=\"#000000\"\r\n                >\r\n                    <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n                    <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\r\n                </svg>\r\n            </NavLink>\r\n        </HeaderComponent>\r\n    );\r\n}\r\n","import s from \"./EditName.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useRef } from \"react\";\r\nimport { doc, updateDoc } from \"firebase/firestore\";\r\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\r\n\r\nimport { db } from \"./../../../firebase\";\r\n\r\nexport default function EditName({ setModal, user, setUser }) {\r\n    return ReactDOM.createPortal(\r\n        <Modal setModal={setModal} user={user} setUser={setUser} />,\r\n        document.body\r\n    );\r\n}\r\n\r\nfunction Modal({ setModal, user, setUser }) {\r\n    const newName = useRef(null);\r\n\r\n    const onSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        const myName = newName.current.value.trim();\r\n\r\n        if (myName.length > 0) {\r\n            newName.current.value = \"\";\r\n\r\n            let userId = null;\r\n\r\n            const citiesRef = collection(db, \"users\");\r\n            const q = query(citiesRef, where(\"uid\", \"==\", user.uid));\r\n\r\n            const querySnapshot = await getDocs(q);\r\n            querySnapshot.forEach((doc) => {\r\n                userId = doc.id;\r\n            });\r\n\r\n            const nameRef = doc(db, \"users\", userId);\r\n            await updateDoc(nameRef, {\r\n                name: myName,\r\n            });\r\n\r\n            const newUser = { ...user, name: myName };\r\n            setUser(newUser);\r\n            localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n            setModal(false);\r\n        }\r\n    };\r\n\r\n    const onClose = (event) => {\r\n        event.stopPropagation();\r\n\r\n        if (event.target.dataset.close === \"close\") {\r\n            setModal(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={s.modal} data-close=\"close\" onClick={onClose}>\r\n            <div className={s.modalContent}>\r\n                <form onSubmit={onSubmit} className={s.form}>\r\n                    <input\r\n                        autoFocus\r\n                        ref={newName}\r\n                        placeholder=\"Введите имя\"\r\n                        type=\"text\"\r\n                    />\r\n                    <button type=\"submit\">Сохранить</button>\r\n                </form>\r\n\r\n                <button\r\n                    onClick={onClose}\r\n                    data-close=\"close\"\r\n                    className={s.close}\r\n                >\r\n                    Отменить\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import s from \"./../EditName/EditName.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {\r\n    collection,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    doc,\r\n    updateDoc,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"./../../../firebase\";\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function EditName({ setModal, user, setUser }) {\r\n    return ReactDOM.createPortal(\r\n        <Modal setModal={setModal} user={user} setUser={setUser} />,\r\n        document.body\r\n    );\r\n}\r\n\r\nfunction Modal({ setModal, user, setUser }) {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const onChange = async (event) => {\r\n        setIsLoading(true);\r\n        event.preventDefault();\r\n\r\n        const file = event.target.files[0];\r\n        await getAvatarUrl(file);\r\n    };\r\n\r\n    const getAvatarUrl = async (file) => {\r\n        if (file.size > 1024 * 1024 * 10) {\r\n            alert(\"Размер изображения слишком большой\");\r\n        } else {\r\n            const avatarName = user.uid + \"_avatar\";\r\n            const storage = getStorage();\r\n            const storageRef = ref(storage, avatarName);\r\n\r\n            await uploadBytes(storageRef, file).then(() => {\r\n                getDownloadURL(ref(storage, avatarName))\r\n                    .then((url) => {\r\n                        const avatarUrl = url;\r\n\r\n                        updateAvatar(avatarUrl);\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error);\r\n                    });\r\n            });\r\n        }\r\n    };\r\n\r\n    const updateAvatar = async (avatarUrl) => {\r\n        let docID = \"\";\r\n\r\n        const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\r\n        const querySnapshot = await getDocs(q);\r\n        querySnapshot.forEach((doc) => {\r\n            docID = doc.id;\r\n        });\r\n\r\n        const avatarRef = doc(db, \"users\", docID);\r\n\r\n        updateDoc(avatarRef, {\r\n            avatar: avatarUrl,\r\n        });\r\n\r\n        const newUser = { ...user, avatar: avatarUrl };\r\n        setUser(newUser);\r\n\r\n        localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n\r\n        setIsLoading(false);\r\n        setModal(false);\r\n    };\r\n\r\n    const onClose = (event) => {\r\n        event.stopPropagation();\r\n\r\n        if (event.target.dataset.close === \"close\") {\r\n            setModal(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={s.modal} data-close=\"close\" onClick={onClose}>\r\n            <div className={s.modalContent}>\r\n                <form onChange={onChange} className={s.form}>\r\n                    {!isLoading && (\r\n                        <>\r\n                            <label className={s.labelAvatar} htmlFor=\"avatar\">\r\n                                Выберите файл\r\n                            </label>\r\n\r\n                            <input\r\n                                className={s.inputAvatar}\r\n                                type=\"file\"\r\n                                id=\"avatar\"\r\n                            />\r\n                        </>\r\n                    )}\r\n\r\n                    {isLoading && (\r\n                        <div className={s.labelAvatar}>loading...</div>\r\n                    )}\r\n                </form>\r\n\r\n                {!isLoading && (\r\n                    <button\r\n                        onClick={onClose}\r\n                        data-close=\"close\"\r\n                        className={s.close}\r\n                    >\r\n                        Отменить\r\n                    </button>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import s from \"./Alert.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function Alert({ message, closeAlert }) {\r\n    return ReactDOM.createPortal(\r\n        <Modal message={message} closeAlert={closeAlert} />,\r\n        document.body\r\n    );\r\n}\r\n\r\nfunction Modal({ message, closeAlert }) {\r\n    const [isClosed, setIsClosed] = useState(false);\r\n\r\n    setTimeout(() => {\r\n        setIsClosed(true);\r\n    }, 4000);\r\n\r\n    if (closeAlert) {\r\n        setTimeout(() => {\r\n            closeAlert(false);\r\n        }, 4300);\r\n    }\r\n\r\n    return (\r\n        <div className={isClosed ? s.alert + \" \" + s.close : s.alert}>\r\n            <div className={s.container}>{message}</div>\r\n        </div>\r\n    );\r\n}\r\n","import { useHistory } from \"react-router\";\r\nimport BodyComponent from \"../../../components/Layout/Body/BodyComponent\";\r\nimport s from \"./SettingsContainer.module.css\";\r\nimport { useEffect } from \"react\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useState } from \"react\";\r\nimport EditName from \"../../../components/Modals/EditName/EditName\";\r\nimport EditAvatar from \"../../../components/Modals/EditAvatar/EditAvatar\";\r\nimport Alert from \"../../../components/Alert/Alert\";\r\n\r\nexport default function SettingsContainer({ user, setUser }) {\r\n    const [editNameModal, setEditNameModal] = useState(false);\r\n    const [editAvatarModal, setEditAvatarModal] = useState(false);\r\n    const [showAlert, setAlert] = useState(false);\r\n    const [alertText, setAlertText] = useState(null);\r\n\r\n    const history = useHistory();\r\n\r\n    const logout = () => {\r\n        localStorage.setItem(\"user\", null);\r\n        setUser(null);\r\n        history.push(routes.login);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n        if (user) {\r\n            setUser(user);\r\n        }\r\n    }, [setUser]);\r\n\r\n    const showEditNameModal = () => {\r\n        setEditNameModal(true);\r\n    };\r\n\r\n    const showEditAvatarModal = () => {\r\n        setEditAvatarModal(true);\r\n    };\r\n\r\n    const saveToBuffer = async () => {\r\n        const copyText =\r\n            \"Привет, я использую Memssenger для общения с друзьями. Присоединяйся по ссылке: https://ozcnii.github.io/memssenger\";\r\n        try {\r\n            await navigator.clipboard.writeText(copyText);\r\n            const alertText =\r\n                \"Пригласительное сообщение скопировано в буфер обмена\";\r\n            setAlertText(alertText);\r\n            setAlert(true);\r\n        } catch (e) {\r\n            const alertText =\r\n                \"Произошла ошибка во время копирования пригласительного сообщения\";\r\n            setAlertText(alertText);\r\n            setAlert(true);\r\n        }\r\n    };\r\n    return (\r\n        <>\r\n            {editNameModal && (\r\n                <EditName\r\n                    user={user}\r\n                    setUser={setUser}\r\n                    setModal={setEditNameModal}\r\n                />\r\n            )}\r\n\r\n            {editAvatarModal && (\r\n                <EditAvatar\r\n                    user={user}\r\n                    setModal={setEditAvatarModal}\r\n                    setUser={setUser}\r\n                />\r\n            )}\r\n            {showAlert && <Alert message={alertText} closeAlert={setAlert} />}\r\n\r\n            <BodyComponent>\r\n                {user ? (\r\n                    <>\r\n                        <div className={s.main}>\r\n                            <div className={s.top}>\r\n                                <div className={s.avatar}>\r\n                                    {user?.avatar && (\r\n                                        <img src={user.avatar} alt=\"\" />\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className={s.info}>\r\n                                    <div className={`${s.userName} text-mw`}>\r\n                                        {\" \"}\r\n                                        {user.name}{\" \"}\r\n                                    </div>\r\n                                    <div className=\"text-mw\">{user.email}</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className={s.settings}>\r\n                            <div\r\n                                className={s.edit}\r\n                                onClick={showEditAvatarModal}\r\n                            >\r\n                                <div className={s.icon}>\r\n                                    <svg\r\n                                        aria-hidden=\"true\"\r\n                                        focusable=\"false\"\r\n                                        data-prefix=\"fas\"\r\n                                        data-icon=\"user-astronaut\"\r\n                                        role=\"img\"\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        viewBox=\"0 0 448 512\"\r\n                                    >\r\n                                        <path\r\n                                            fill=\"currentColor\"\r\n                                            d=\"M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z\"\r\n                                        ></path>\r\n                                    </svg>\r\n                                </div>\r\n                                <span>Изменить аватар </span>\r\n                            </div>\r\n\r\n                            <div className={s.edit} onClick={showEditNameModal}>\r\n                                <div className={s.icon}>\r\n                                    <svg\r\n                                        aria-hidden=\"true\"\r\n                                        focusable=\"false\"\r\n                                        data-prefix=\"far\"\r\n                                        data-icon=\"edit\"\r\n                                        role=\"img\"\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        viewBox=\"0 0 576 512\"\r\n                                    >\r\n                                        <path\r\n                                            fill=\"currentColor\"\r\n                                            d=\"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z\"\r\n                                        ></path>\r\n                                    </svg>\r\n                                </div>\r\n                                <span>Изменить имя</span>\r\n                            </div>\r\n\r\n                            <a\r\n                                href=\"https://github.com/ttenapp/memssenger\"\r\n                                target=\"blank\"\r\n                                className={s.edit}\r\n                            >\r\n                                <div className={s.icon}>\r\n                                    <svg\r\n                                        aria-hidden=\"true\"\r\n                                        focusable=\"false\"\r\n                                        data-prefix=\"fas\"\r\n                                        data-icon=\"question\"\r\n                                        role=\"img\"\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        viewBox=\"0 0 384 512\"\r\n                                    >\r\n                                        <path\r\n                                            fill=\"currentColor\"\r\n                                            d=\"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z\"\r\n                                        ></path>\r\n                                    </svg>\r\n                                </div>\r\n                                <span>Информация</span>\r\n                            </a>\r\n\r\n                            <div className={s.edit} onClick={saveToBuffer}>\r\n                                <div className={s.icon}>\r\n                                    <svg\r\n                                        aria-hidden=\"true\"\r\n                                        focusable=\"false\"\r\n                                        data-prefix=\"fas\"\r\n                                        data-icon=\"user-friends\"\r\n                                        role=\"img\"\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        viewBox=\"0 0 640 512\"\r\n                                    >\r\n                                        <path\r\n                                            fill=\"currentColor\"\r\n                                            d=\"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z\"\r\n                                        ></path>\r\n                                    </svg>\r\n                                </div>\r\n                                <span>Пригласить друзей</span>\r\n                            </div>\r\n\r\n                            <div\r\n                                className={s.edit + \" \" + s.last}\r\n                                onClick={logout}\r\n                            >\r\n                                <div className={s.icon}>\r\n                                    <svg\r\n                                        aria-hidden=\"true\"\r\n                                        focusable=\"false\"\r\n                                        data-prefix=\"fas\"\r\n                                        data-icon=\"sign-out-alt\"\r\n                                        role=\"img\"\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        viewBox=\"0 0 512 512\"\r\n                                    >\r\n                                        <path\r\n                                            fill=\"currentColor\"\r\n                                            d=\"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z\"\r\n                                        ></path>\r\n                                    </svg>\r\n                                </div>\r\n                                <span>Выход</span>\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                ) : null}\r\n            </BodyComponent>\r\n        </>\r\n    );\r\n}\r\n","import Header from \"./Header/Header\";\r\nimport SettingsContainer from \"./SettingsContainer/SettingContainer\";\r\n\r\nexport default function SettingsPage({ setUser, user }) {\r\n    return (\r\n        <>\r\n            <Header />\r\n            <SettingsContainer setUser={setUser} user={user} />\r\n        </>\r\n    );\r\n}\r\n","import s from \"./LoginPage.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../routes/routes\";\r\nimport { useRef, useEffect, useState } from \"react\";\r\nimport { auth } from \"../../firebase\";\r\nimport { signInWithEmailAndPassword } from \"@firebase/auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"../../firebase\";\r\nimport Alert from \"../../components/Alert/Alert\";\r\n\r\nexport default function LoginPage({ setUser }) {\r\n    const [showAlert, setShowAlert] = useState(false);\r\n    const [alertText, setAlertText] = useState(null);\r\n\r\n    const history = useHistory();\r\n\r\n    const email = useRef(null);\r\n    const password = useRef(null);\r\n\r\n    const login = async (event) => {\r\n        event.preventDefault();\r\n        const myEmail = email.current.value.trim();\r\n        const myPassword = password.current.value.trim();\r\n\r\n        if (myEmail && myPassword) {\r\n            try {\r\n                const responseFromAuth = await signInWithEmailAndPassword(\r\n                    auth,\r\n                    myEmail,\r\n                    myPassword\r\n                );\r\n\r\n                let myName = null;\r\n                let myAvatar = null;\r\n                const userId = responseFromAuth.user.uid;\r\n\r\n                const citiesRef = collection(db, \"users\");\r\n                const q = query(citiesRef, where(\"email\", \"==\", myEmail));\r\n\r\n                const querySnapshot = await getDocs(q);\r\n                querySnapshot.forEach((doc) => {\r\n                    myName = doc.data().name;\r\n                    myAvatar = doc.data().avatar;\r\n                });\r\n\r\n                // save user to localStorage;\r\n                localStorage.setItem(\r\n                    \"user\",\r\n                    JSON.stringify({\r\n                        email: myEmail,\r\n                        uid: userId,\r\n                        name: myName,\r\n                        avatar: myAvatar,\r\n                    })\r\n                );\r\n\r\n                // set user an active in app;\r\n                setUser({\r\n                    email: myEmail,\r\n                    uid: userId,\r\n                    name: myName,\r\n                    avatar: myAvatar,\r\n                });\r\n\r\n                history.push(routes.dialogs);\r\n            } catch (error) {\r\n                const text = error.message;\r\n                setAlertText(text);\r\n                setShowAlert(true);\r\n            }\r\n        } else {\r\n            const text = \"Все поля должны быыть заполнены\";\r\n            setAlertText(text);\r\n            setShowAlert(true);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n        if (user) {\r\n            setUser(user);\r\n            history.push(routes.dialogs);\r\n        }\r\n    }, [history, setUser]);\r\n\r\n    return (\r\n        <>\r\n            {showAlert && (\r\n                <Alert message={alertText} closeAlert={setShowAlert} />\r\n            )}\r\n\r\n            <div className={s.container}>\r\n                <div className={s.title}>Вход</div>\r\n\r\n                <form onSubmit={login} className={s.form}>\r\n                    <input\r\n                        ref={email}\r\n                        type=\"text\"\r\n                        placeholder=\"Эл. адрес\"\r\n                        className={s.login}\r\n                    />\r\n\r\n                    <input\r\n                        ref={password}\r\n                        type=\"password\"\r\n                        placeholder=\"Пароль\"\r\n                        className={s.password}\r\n                    />\r\n\r\n                    <button type=\"submit\" className={s.submit}>\r\n                        Войти\r\n                    </button>\r\n\r\n                    <div>\r\n                        <NavLink to={routes.registr} className={s.registr}>\r\n                            Регистрация\r\n                        </NavLink>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import s from \"../LoginPage.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useRef, useEffect, useState } from \"react\";\r\nimport { auth, db } from \"../../../firebase\";\r\nimport { createUserWithEmailAndPassword } from \"@firebase/auth\";\r\nimport { addDoc, collection } from \"@firebase/firestore\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Alert from \"../../../components/Alert/Alert\";\r\n\r\nexport default function RegistrationPage({ setUser }) {\r\n    const [showAlert, setShowAlert] = useState(false);\r\n    const [alertText, setAlertText] = useState(null);\r\n\r\n    const history = useHistory();\r\n\r\n    const email = useRef(null);\r\n    const password = useRef(null);\r\n    const confirmPassword = useRef(null);\r\n    const userName = useRef(null);\r\n\r\n    const register = async (event) => {\r\n        event.preventDefault();\r\n\r\n        const myEmail = email.current.value.trim();\r\n        const myPassword = password.current.value.trim();\r\n        const myConfirmPassword = confirmPassword.current.value.trim();\r\n        const myName = userName.current.value.trim();\r\n\r\n        if (\r\n            myEmail &&\r\n            myPassword &&\r\n            myName &&\r\n            myConfirmPassword &&\r\n            myPassword === myConfirmPassword\r\n        ) {\r\n            try {\r\n                const responseFromAuth = await createUserWithEmailAndPassword(\r\n                    auth,\r\n                    myEmail,\r\n                    myPassword\r\n                );\r\n\r\n                const userId = responseFromAuth.user.uid;\r\n\r\n                // saving to firebase;\r\n                await addDoc(collection(db, \"users\"), {\r\n                    email: myEmail,\r\n                    uid: userId,\r\n                    name: myName,\r\n                });\r\n\r\n                // save user to localStorage;\r\n                localStorage.setItem(\r\n                    \"user\",\r\n                    JSON.stringify({\r\n                        email: myEmail,\r\n                        uid: userId,\r\n                        name: myName,\r\n                    })\r\n                );\r\n\r\n                // set user an active in app;\r\n                setUser({\r\n                    email: myEmail,\r\n                    uid: userId,\r\n                    name: myName,\r\n                });\r\n\r\n                history.push(\"/chat\");\r\n            } catch (error) {\r\n                const text = error.message;\r\n                setAlertText(text);\r\n                setShowAlert(true);\r\n            }\r\n        } else if (myPassword !== myConfirmPassword) {\r\n            const text = \"Пароли не совпадают\";\r\n            setAlertText(text);\r\n            setShowAlert(true);\r\n        } else {\r\n            const text = \"Все поля должны быыть заполнены\";\r\n            setAlertText(text);\r\n            setShowAlert(true);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n        if (user) {\r\n            setUser(user);\r\n            history.push(routes.dialogs);\r\n        }\r\n    }, [history, setUser]);\r\n\r\n    return (\r\n        <>\r\n            {showAlert && (\r\n                <Alert message={alertText} closeAlert={setShowAlert} />\r\n            )}\r\n\r\n            <div className={s.container}>\r\n                <div className={s.title}>Регистрация</div>\r\n\r\n                <form onSubmit={register} className={s.form}>\r\n                    <input\r\n                        type=\"text\"\r\n                        ref={email}\r\n                        placeholder=\"Эл. адрес\"\r\n                        className={s.login}\r\n                    />\r\n\r\n                    <input\r\n                        type=\"text\"\r\n                        ref={password}\r\n                        placeholder=\"Пароль\"\r\n                        className={s.password}\r\n                    />\r\n\r\n                    <input\r\n                        type=\"text\"\r\n                        ref={confirmPassword}\r\n                        placeholder=\"Подтвердите пароль\"\r\n                        className={s.passwordConfirm}\r\n                    />\r\n\r\n                    <input\r\n                        type=\"text\"\r\n                        ref={userName}\r\n                        placeholder=\"Введите ваше имя\"\r\n                        className={s.passwordConfirm}\r\n                    />\r\n\r\n                    <button type=\"submit\" className={s.submit}>\r\n                        Регистрация\r\n                    </button>\r\n\r\n                    <div>\r\n                        <NavLink to={routes.login} className={s.logIn}>\r\n                            Войти\r\n                        </NavLink>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import { Route, Switch, Redirect, HashRouter } from \"react-router-dom\";\r\nimport routes from \"./routes/routes\";\r\nimport DialogsPage from \"./pages/DialogsPage\";\r\nimport Messages from \"./pages/MessagePage\";\r\nimport SearchPage from \"./pages/SearchPage\";\r\nimport SettingsPage from \"./pages/SettingsPage\";\r\nimport LoginPage from \"./pages/LoginPage\";\r\nimport RegistrationPage from \"./pages/LoginPage/RegistrationPage/RegistrationPage\";\r\nimport { useState } from \"react\";\r\n\r\nfunction App() {\r\n    const [user, setUser] = useState(null);\r\n\r\n    const [chats, setChats] = useState([]);\r\n    const [dialog, setDialog] = useState(null);\r\n\r\n    return (\r\n        <HashRouter>\r\n            <div className=\"header-background\"></div>\r\n\r\n            <Switch>\r\n                <Route\r\n                    exact\r\n                    path=\"/\"\r\n                    render={() => <Redirect to={routes.login} />}\r\n                />\r\n\r\n                <Route\r\n                    path={routes.dialogs}\r\n                    render={() => (\r\n                        <DialogsPage\r\n                            user={user}\r\n                            setUser={setUser}\r\n                            chats={chats}\r\n                            setChats={setChats}\r\n                            setDialog={setDialog}\r\n                        />\r\n                    )}\r\n                />\r\n\r\n                <Route\r\n                    path={routes.messages + \"/:id\"}\r\n                    render={() => <Messages dialog={dialog} user={user} />}\r\n                />\r\n                <Route\r\n                    path={routes.settings}\r\n                    render={() => (\r\n                        <SettingsPage setUser={setUser} user={user} />\r\n                    )}\r\n                />\r\n                <Route\r\n                    path={routes.search}\r\n                    render={() => (\r\n                        <SearchPage user={user} setDialog={setDialog} />\r\n                    )}\r\n                />\r\n\r\n                <Route\r\n                    path={routes.login}\r\n                    render={() => <LoginPage user={user} setUser={setUser} />}\r\n                />\r\n                <Route\r\n                    path={routes.registr}\r\n                    render={() => (\r\n                        <RegistrationPage user={user} setUser={setUser} />\r\n                    )}\r\n                />\r\n\r\n                <Route\r\n                    path=\"*\"\r\n                    render={() => <Redirect to={routes.dialogs} />}\r\n                />\r\n            </Switch>\r\n        </HashRouter>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import { StrictMode } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n    <StrictMode>\r\n        <App />\r\n    </StrictMode>,\r\n    rootElement\r\n);\r\n"],"sourceRoot":""}