{"version":3,"sources":["pages/LoginPage/LoginPage.module.css","pages/SettingsPage/SettingsContainer/SettingsContainer.module.css","pages/MessagePage/Messages.module.css","components/Modals/EditName/EditName.module.css","pages/DialogsPage/Dialog/Dialog.module.css","pages/SearchPage/LastList/LastItem/LastItem.module.css","components/Alert/Alert.module.css","pages/DialogsPage/Header/Header.module.css","components/Layout/Header/HeaderComponent.module.css","pages/MessagePage/Header/Header.module.css","pages/SearchPage/Header/Header.module.css","pages/SettingsPage/Header/Header.module.css","components/Layout/Body/BodyComponent.module.css","routes/routes.js","firebase.js","store/user.js","utils/getDate.js","utils/getLastMessage.js","store/chat.js","store/dialog.js","pages/DialogsPage/Dialog/Dialog.jsx","components/Preloader/Preloader.jsx","pages/DialogsPage/Dialogs/Dialogs.jsx","components/Layout/Header/HeaderComponent.jsx","components/Icons/SearchIcon/SearchIcon.jsx","components/Icons/MenuIcon/MenuIcon.jsx","pages/DialogsPage/Header/Header.jsx","components/Layout/Body/BodyComponent.jsx","pages/DialogsPage/index.jsx","components/Icons/BackIcon/BackIcon.jsx","pages/MessagePage/Header/Header.jsx","components/Icons/EmojiIcon/EmojiIcon.jsx","components/Icons/SendMessageIcon/SendMessageIcon.jsx","pages/MessagePage/FormMessage/FormMessage.jsx","pages/MessagePage/Message/Message.jsx","pages/MessagePage/MessagesWrapper/MessagesWrapper.jsx","hooks/useInnerHeight.js","pages/MessagePage/index.jsx","pages/SearchPage/Header/Header.jsx","pages/SearchPage/LastList/LastItem/LastItem.jsx","pages/SearchPage/LastList/LastList.jsx","pages/SearchPage/index.jsx","pages/SettingsPage/Header/Header.jsx","components/Modals/EditName/EditName.jsx","components/Modals/EditAvatar/EditAvatar.jsx","components/Alert/Alert.jsx","components/Icons/AvatarIcon/AvatarIcon.jsx","components/Icons/EditNameIcon/EditNameIcon.jsx","components/Icons/InviteIcon/InviteIcon.jsx","components/Icons/LogoutIcon/LogoutIcon.jsx","components/Icons/InformationIcon/InformationIcon.jsx","pages/SettingsPage/SettingsContainer/SettingsContainer.jsx","pages/SettingsPage/index.jsx","pages/LoginPage/index.jsx","pages/LoginPage/RegistrationPage/RegistrationPage.jsx","App.jsx","index.jsx"],"names":["module","exports","routes","dialogs","messages","settings","search","login","registr","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","auth","getAuth","userStore","user","makeAutoObservable","this","uid","a","userRef","collection","q","query","where","getDocs","forEach","doc","setUser","data","name","userId","id","nameRef","updateDoc","avatarUrl","docID","avatarRef","avatar","myEmail","myPassword","signInWithEmailAndPassword","responseFromAuth","myName","myAvatar","email","createUserWithEmailAndPassword","addDoc","getDate","date","thisDate","Date","seconds","hours","getHours","minutes","getMinutes","chatStore","users","loading","error","activeDialog","searchedUsers","querySnapshop","filteredUsers","docs","map","filter","serUsers","getDialogs","allMessages","authUserDialogs","message","dialog_id","includes","push","s","sort","b","aLastIndex","length","setDialogs","setLoading","toLowerCase","dialogStore","dialogId","dialogRef","getDoc","docSnap","exists","docData","setDoc","myDialogId","setDialogId","dialog","Message","observer","authUser","useState","lastMessage","setLastMessage","useMemo","useLayoutEffect","time","getLastMessage","to","className","styles","messageContainer","onClick","setActiveDialog","src","alt","info","top","userName","Preloader","Dialogs","Dialog","HeaderComponent","children","wrapper","container","SearchIcon","xmlns","height","viewBox","width","fill","d","MenuIcon","Header","menuButton","searchButton","BodyComponent","DialogsPage","useEffect","getChats","BackIcon","history","useHistory","backButton","userAvatar","EmojiIcon","SendMessageIcon","FormMessage","newMessage","setNewMessage","emojiPopover","setEmojiPopover","sendMessage","event","preventDefault","trim","myMessage","formWrapper","form","onSubmit","value","onChange","e","target","input","type","placeholder","stopPropagation","pickerStyle","boxShadow","onEmojiClick","emojiObject","emoji","send","userUid","messageDate","style","justifyContent","textAlign","messageText","MessagesWrapper","innerHeight","window","setInnerHeight","listener","addEventListener","removeEventListener","useInnerHeight","layout","messagesWrapper","i","Messages","createDialogId","unsub","onSnapshot","currentData","setMessages","setAll","searchUsers","searchRef","useRef","ref","LastItem","title","LastList","SearchPage","useCallback","searchInput","current","EditName","setModal","ReactDOM","createPortal","Modal","document","body","isLoading","setIsLoading","newName","editUserName","onClose","dataset","close","modal","data-close","div","initial","y","animate","modalContent","autoFocus","disabled","EditAvatar","getAvatarUrl","files","closeModalAndDisableLoading","file","size","alert","avatarName","storage","getStorage","storageRef","uploadBytes","then","getDownloadURL","url","editUserAvatar","catch","finally","labelAvatar","htmlFor","inputAvatar","Alert","props","AlertComponent","closeAlert","isClosed","setIsClosed","showTimeout","setTimeout","clearTimeout","opacity","transition","duration","AvatarIcon","aria-hidden","focusable","data-prefix","data-icon","role","EditNameIcon","InviteIcon","LogoutIcon","InformationIcon","SettingsContainer","replace","editNameModal","setEditNameModal","editAvatarModal","setEditAvatarModal","showAlert","setAlert","alertText","setAlertText","saveToBuffer","navigator","clipboard","writeText","main","edit","icon","href","last","localStorage","setItem","SettingsPage","LoginPage","setShowAlert","password","JSON","stringify","required","submit","RegistrationPage","confirmPassword","register","myConfirmPassword","newUser","passwordConfirm","logIn","App","parse","getItem","getMe","exact","path","render","rootElement","getElementById"],"mappings":"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","file":"static/js/main.27f756f8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LoginPage_container__srci2\",\"title\":\"LoginPage_title__3Gi8p\",\"form\":\"LoginPage_form__2bfUG\",\"login\":\"LoginPage_login__PZPVh\",\"password\":\"LoginPage_password__2-lKB\",\"passwordConfirm\":\"LoginPage_passwordConfirm__9F2XE\",\"submit\":\"LoginPage_submit__2DZ5A\",\"google\":\"LoginPage_google__3RZ3D\",\"facebook\":\"LoginPage_facebook__1w0MS\",\"registr\":\"LoginPage_registr__2MQ6Z\",\"logIn\":\"LoginPage_logIn__tQRfg\",\"googleIcon\":\"LoginPage_googleIcon__169R2\",\"fbIcon\":\"LoginPage_fbIcon__2Drt8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"SettingsContainer_header__2X059\",\"top\":\"SettingsContainer_top__34tuA\",\"avatar\":\"SettingsContainer_avatar__9vR60\",\"info\":\"SettingsContainer_info__1E4bV\",\"userName\":\"SettingsContainer_userName__2ehyD\",\"edit\":\"SettingsContainer_edit__KT2c6\",\"icon\":\"SettingsContainer_icon__2WsL7\",\"last\":\"SettingsContainer_last__FK87T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Messages_wrapper__1iEmf\",\"formWrapper\":\"Messages_formWrapper__1z0ve\",\"messages\":\"Messages_messages__xZ1-t\",\"form\":\"Messages_form__2c05A\",\"input\":\"Messages_input__1N5U6\",\"send\":\"Messages_send__2xs5h\",\"messagesWrapper\":\"Messages_messagesWrapper__3E0DO\",\"messageContainer\":\"Messages_messageContainer__2SG-2\",\"message\":\"Messages_message__30rWY\",\"messageDate\":\"Messages_messageDate__1O3P-\",\"noMessages\":\"Messages_noMessages__3VsK0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"EditName_modal__3rI5O\",\"modalContent\":\"EditName_modalContent__3teMy\",\"form\":\"EditName_form__r0iJV\",\"close\":\"EditName_close__3cRjP\",\"inputAvatar\":\"EditName_inputAvatar__1DQaC\",\"labelAvatar\":\"EditName_labelAvatar__1JJML\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageContainer\":\"Dialog_messageContainer__eb4mD\",\"avatar\":\"Dialog_avatar__FNfG9\",\"info\":\"Dialog_info__2bLB2\",\"top\":\"Dialog_top__3BHmZ\",\"date\":\"Dialog_date__1n7Cq\",\"userName\":\"Dialog_userName__1-k8D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LastItem_container__1Fq8Y\",\"avatar\":\"LastItem_avatar__3PBZz\",\"info\":\"LastItem_info__sM9X5\",\"date\":\"LastItem_date__3g1xy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"Alert_alert__1Wp_A\",\"wrapper\":\"Alert_wrapper__3heKY\",\"container\":\"Alert_container__1uYpb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuButton\":\"Header_menuButton__1JlfH\",\"searchButton\":\"Header_searchButton__3AdbQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HeaderComponent_container__2SlVa\",\"wrapper\":\"HeaderComponent_wrapper__3wu5K\",\"App-header\":\"HeaderComponent_App-header__1w9xj\",\"App-link\":\"HeaderComponent_App-link__3uQ6h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backButton\":\"Header_backButton__22AOg\",\"userAvatar\":\"Header_userAvatar__272zd\",\"container\":\"Header_container__3_COy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backButton\":\"Header_backButton__3r5J4\",\"container\":\"Header_container__3tnxR\",\"input\":\"Header_input__3rffH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3I0KL\",\"backButton\":\"Header_backButton__HI7r2\",\"searchButton\":\"Header_searchButton__35jPq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BodyComponent_container__2O-R-\"};","const routes = {\r\n    dialogs: \"/dialogs\",\r\n    messages: \"/im\",\r\n    settings: \"/settings\",\r\n    search: \"/search\",\r\n    login: \"/login\",\r\n    registr: \"/register\",\r\n};\r\n\r\nexport default routes;\r\n","// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAtz3-Jp3MsxNLBujPPCLcwUJm6YpPyGQg\",\r\n    authDomain: \"memssenger-c0d86.firebaseapp.com\",\r\n    projectId: \"memssenger-c0d86\",\r\n    storageBucket: \"memssenger-c0d86.appspot.com\",\r\n    messagingSenderId: \"271283967966\",\r\n    appId: \"1:271283967966:web:0b4e1a68a6aa42d5ebef4f\",\r\n    measurementId: \"G-YLB9Z3H722\",\r\n};\r\n\r\n// Initialize Firebase\r\ninitializeApp(firebaseConfig);\r\n\r\nconst db = getFirestore();\r\nconst auth = getAuth();\r\n\r\nexport { db, auth };\r\n","import {\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n} from \"firebase/auth\";\r\nimport {\r\n  addDoc,\r\n  collection,\r\n  doc,\r\n  getDocs,\r\n  query,\r\n  updateDoc,\r\n  where,\r\n} from \"firebase/firestore\";\r\nimport { makeAutoObservable } from \"mobx\";\r\nimport { auth, db } from \"../firebase\";\r\n\r\nclass UserStore {\r\n  user = null;\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async getMe(uid) {\r\n    const userRef = collection(db, \"users\");\r\n    const q = query(userRef, where(\"uid\", \"==\", uid));\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      this.setUser(doc.data());\r\n    });\r\n  }\r\n\r\n  async editUserName(name) {\r\n    let userId = null;\r\n\r\n    const userRef = collection(db, \"users\");\r\n    const q = query(userRef, where(\"uid\", \"==\", this.user.uid));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    querySnapshot.forEach((doc) => {\r\n      userId = doc.id;\r\n    });\r\n\r\n    const nameRef = doc(db, \"users\", userId);\r\n    await updateDoc(nameRef, {\r\n      name,\r\n    });\r\n\r\n    const user = { ...this.user, name };\r\n\r\n    this.setUser(user);\r\n\r\n    return user;\r\n  }\r\n\r\n  async editUserAvatar(avatarUrl) {\r\n    let docID = \"\";\r\n\r\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", this.user.uid));\r\n    const querySnapshot = await getDocs(q);\r\n    querySnapshot.forEach((doc) => {\r\n      docID = doc.id;\r\n    });\r\n\r\n    const avatarRef = doc(db, \"users\", docID);\r\n\r\n    updateDoc(avatarRef, {\r\n      avatar: avatarUrl,\r\n    });\r\n    const user = { ...this.user, avatar: avatarUrl };\r\n    this.setUser(user);\r\n  }\r\n\r\n  async login(myEmail, myPassword) {\r\n    const responseFromAuth = await signInWithEmailAndPassword(\r\n      auth,\r\n      myEmail,\r\n      myPassword\r\n    );\r\n\r\n    let myName = null;\r\n    let myAvatar = null;\r\n    const userId = responseFromAuth.user.uid;\r\n\r\n    const userRef = collection(db, \"users\");\r\n    const q = query(userRef, where(\"email\", \"==\", myEmail));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    querySnapshot.forEach((doc) => {\r\n      myName = doc.data().name;\r\n      myAvatar = doc.data().avatar;\r\n    });\r\n\r\n    const user = {\r\n      email: myEmail,\r\n      uid: userId,\r\n      name: myName,\r\n      avatar: myAvatar,\r\n    };\r\n\r\n    this.setUser(user);\r\n\r\n    return user;\r\n  }\r\n\r\n  async register(myEmail, myPassword, myName) {\r\n    const responseFromAuth = await createUserWithEmailAndPassword(\r\n      auth,\r\n      myEmail,\r\n      myPassword\r\n    );\r\n\r\n    const userId = responseFromAuth.user.uid;\r\n\r\n    await addDoc(collection(db, \"users\"), {\r\n      email: myEmail,\r\n      uid: userId,\r\n      name: myName,\r\n    });\r\n\r\n    const user = {\r\n      email: myEmail,\r\n      uid: userId,\r\n      name: myName,\r\n    };\r\n\r\n    return user;\r\n  }\r\n\r\n  setUser(user) {\r\n    this.user = user;\r\n  }\r\n}\r\n\r\nexport const userStore = new UserStore();\r\n","export default function getDate(date) {\r\n    if (date) {\r\n        const thisDate = new Date(date.seconds * 1000);\r\n\r\n        let hours = thisDate.getHours();\r\n        if (hours < 10) {\r\n            hours = \"0\" + hours;\r\n        }\r\n\r\n        let minutes = thisDate.getMinutes();\r\n        if (minutes < 10) {\r\n            minutes = \"0\" + minutes;\r\n        }\r\n\r\n        const messageDate = `${hours}:${minutes}`;\r\n\r\n        return messageDate;\r\n    }\r\n}\r\n","import getDate from \"./getDate\";\r\n\r\nexport const getLastMessage = (dialog) => {\r\n  const lastMessageIndex = dialog.length - 1;\r\n  let lastMessage = dialog[lastMessageIndex];\r\n\r\n  if (lastMessage.length !== 0) {\r\n    const time = getDate(lastMessage.date);\r\n    const newLastMessage = {\r\n      ...lastMessage,\r\n      time,\r\n    };\r\n    lastMessage = newLastMessage;\r\n  }\r\n\r\n  return lastMessage;\r\n};\r\n","import { collection, getDocs } from \"firebase/firestore\";\r\nimport { makeAutoObservable } from \"mobx\";\r\nimport { db } from \"../firebase\";\r\nimport { userStore } from \"./user\";\r\n\r\nclass ChatStore {\r\n  users = [];\r\n  loading = true;\r\n  error = false;\r\n  dialogs = [];\r\n  activeDialog = null;\r\n  searchedUsers = [];\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async getChats() {\r\n    const querySnapshop = await getDocs(collection(db, \"users\"));\r\n    const filteredUsers = querySnapshop.docs\r\n      .map((doc) => doc.data())\r\n      .filter((doc) => doc?.uid !== userStore.user?.uid);\r\n\r\n    this.serUsers(filteredUsers);\r\n    if (filteredUsers) {\r\n      this.getDialogs();\r\n    }\r\n  }\r\n\r\n  async getDialogs() {\r\n    const querySnapshop = await getDocs(collection(db, \"dialogs\"));\r\n    const allMessages = querySnapshop.docs.map((doc) => doc.data());\r\n    const authUserDialogs = [];\r\n\r\n    allMessages.forEach((message) => {\r\n      if (\r\n        message.messages[0] &&\r\n        message.messages[0]?.dialog_id.includes(userStore.user?.uid)\r\n      ) {\r\n        authUserDialogs.push(message.messages);\r\n      }\r\n    });\r\n\r\n    const s = authUserDialogs.sort((a, b) => {\r\n      const aLastIndex = a.length - 1;\r\n      const bLastIndex = b.length - 1;\r\n      return b[bLastIndex].date.seconds - a[aLastIndex].date.seconds;\r\n    });\r\n\r\n    this.setDialogs(s);\r\n    if (allMessages) {\r\n      this.setLoading(false);\r\n    }\r\n  }\r\n\r\n  searchUsers(name) {\r\n    this.searchedUsers = this.users.filter((user) =>\r\n      user.name.toLowerCase().includes(name.toLowerCase())\r\n    );\r\n  }\r\n\r\n  setLoading(loading) {\r\n    this.loading = loading;\r\n  }\r\n\r\n  setError(error) {\r\n    this.error = error;\r\n  }\r\n\r\n  serUsers(users) {\r\n    this.searchedUsers = users;\r\n    this.users = users;\r\n  }\r\n  setDialogs(dialogs) {\r\n    this.dialogs = dialogs;\r\n  }\r\n}\r\n\r\nexport const chatStore = new ChatStore();\r\n","import { doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\";\r\nimport { makeAutoObservable } from \"mobx\";\r\nimport { db } from \"../firebase\";\r\nimport { userStore } from \"./user\";\r\n\r\nclass DialogStore {\r\n  activeDialog = null;\r\n  messages = [];\r\n  dialogId = null;\r\n  loading = false;\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async sendMessage(message) {\r\n    const dialogRef = doc(db, \"dialogs\", this.dialogId);\r\n    const docSnap = await getDoc(dialogRef);\r\n\r\n    if (docSnap.exists()) {\r\n      const docData = docSnap.data();\r\n      await updateDoc(dialogRef, {\r\n        messages: [...docData.messages, message],\r\n      });\r\n    } else {\r\n      await setDoc(doc(db, \"dialogs\", this.dialogId), {\r\n        messages: [message],\r\n      });\r\n    }\r\n  }\r\n\r\n  createDialogId() {\r\n    const user = userStore.user;\r\n    if (!this.activeDialog || !user) return;\r\n\r\n    let myDialogId = null;\r\n\r\n    if (this.activeDialog.uid > user.uid) {\r\n      myDialogId = this.activeDialog.uid + user.uid;\r\n    } else {\r\n      myDialogId = user.uid + this.activeDialog.uid;\r\n    }\r\n\r\n    this.setDialogId(myDialogId);\r\n    this.setLoading(false);\r\n  }\r\n\r\n  setActiveDialog(dialog) {\r\n    this.activeDialog = dialog;\r\n  }\r\n\r\n  setMessages(messages) {\r\n    this.messages = messages;\r\n  }\r\n\r\n  setDialogId(dialogId) {\r\n    this.dialogId = dialogId;\r\n  }\r\n\r\n  setLoading(loading) {\r\n    this.loading = loading;\r\n  }\r\n\r\n  setAll() {\r\n    this.dialogId = null;\r\n    this.activeDialog = null;\r\n    this.messages = [];\r\n  }\r\n}\r\n\r\nexport const dialogStore = new DialogStore();\r\n","import styles from \"./Dialog.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useLayoutEffect, useMemo, useState } from \"react\";\r\nimport { userStore } from \"../../../store/user\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { getLastMessage } from \"../../../utils/getLastMessage\";\r\nimport { chatStore } from \"../../../store/chat\";\r\nimport { dialogStore } from \"../../../store/dialog\";\r\n\r\nconst Message = observer(({ dialog }) => {\r\n  const authUser = userStore.user;\r\n  const [lastMessage, setLastMessage] = useState(\"\");\r\n  const [user, setUser] = useState(\"\");\r\n\r\n  useMemo(() => {\r\n    const dialogId = dialog[0].dialog_id;\r\n\r\n    chatStore.users.forEach((user) => {\r\n      if (dialogId.includes(user.uid)) {\r\n        setUser(user);\r\n      }\r\n    });\r\n  }, [dialog]);\r\n\r\n  const { name, uid, email, avatar } = user;\r\n\r\n  useLayoutEffect(() => {\r\n    const lastMessage = getLastMessage(dialog);\r\n    setLastMessage(lastMessage);\r\n    chatStore.setLoading(false);\r\n  }, [dialog]);\r\n\r\n  return (\r\n    <>\r\n      {lastMessage && lastMessage.length !== 0 && (\r\n        <NavLink\r\n          to={routes.messages + `/${uid}`}\r\n          className={styles.messageContainer}\r\n          onClick={() =>\r\n            dialogStore.setActiveDialog({ email, uid, name, avatar })\r\n          }\r\n        >\r\n          <div className={styles.avatar}>\r\n            {user?.avatar && <img src={user.avatar} alt=\"\" />}\r\n          </div>\r\n\r\n          <div className={styles.info}>\r\n            <div className={styles.top}>\r\n              <div className={`${styles.userName} text-mw`}>{name}</div>\r\n              <div className={styles.time}>\r\n                {chatStore.loading\r\n                  ? null\r\n                  : lastMessage.length === 0\r\n                  ? null\r\n                  : lastMessage?.time}\r\n              </div>\r\n            </div>\r\n            <div className=\"text-mw\">\r\n              {chatStore.loading\r\n                ? \"Загрузка...\"\r\n                : lastMessage.length !== 0\r\n                ? lastMessage.uid === authUser.uid\r\n                  ? `Вы: ${lastMessage.message}`\r\n                  : lastMessage.message\r\n                : \"Сообщений не найдено\"}\r\n            </div>\r\n          </div>\r\n        </NavLink>\r\n      )}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Message;\r\n","import \"./preloader.css\";\r\n\r\nexport default function Preloader() {\r\n    return (\r\n        <div className=\"preloader-wrapper\">\r\n            <div className=\"loadingio-spinner-spinner-sczevsac37c\">\r\n                <div className=\"ldio-cg0exsdxg3p\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import Dialog from \"../Dialog/Dialog\";\r\nimport Preloader from \"../../../components/Preloader/Preloader\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { chatStore } from \"../../../store/chat\";\r\n\r\nconst Dialogs = observer(() => {\r\n  return (\r\n    <>\r\n      {chatStore.loading ? (\r\n        <Preloader />\r\n      ) : chatStore.dialogs.length !== 0 && chatStore.users.length !== 0 ? (\r\n        <>\r\n          {chatStore.dialogs.map((dialog) => (\r\n            <Dialog key={dialog[0].dialog_id} dialog={dialog} />\r\n          ))}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className=\"not-dialogs\">Сообщений не найдено</div>\r\n          <div className=\"to-search\">\r\n            <NavLink to={\"search\"}> К списку пользователей </NavLink>\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Dialogs;\r\n","import styles from \"./HeaderComponent.module.css\";\r\n\r\nexport default function HeaderComponent({ children }) {\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <div className={styles.container}>{children}</div>\r\n        </div>\r\n    );\r\n}\r\n","export const SearchIcon = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24px\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24px\"\r\n      fill=\"#000000\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\r\n    </svg>\r\n  );\r\n};\r\n","export const MenuIcon = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24px\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24px\"\r\n      fill=\"#000000\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\" />\r\n    </svg>\r\n  );\r\n};\r\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./Header.module.css\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { SearchIcon } from \"../../../components/Icons/SearchIcon/SearchIcon\";\r\nimport { MenuIcon } from \"../../../components/Icons/MenuIcon/MenuIcon\";\r\n\r\nfunction Header() {\r\n  return (\r\n    <>\r\n      <HeaderComponent>\r\n        <NavLink to={routes.settings} className={styles.menuButton}>\r\n          <MenuIcon />\r\n        </NavLink>\r\n\r\n        <div className=\"appTitle\">Memssenger</div>\r\n\r\n        <NavLink to={routes.search} className={styles.searchButton}>\r\n          <SearchIcon />\r\n        </NavLink>\r\n      </HeaderComponent>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import s from \"./BodyComponent.module.css\";\r\n\r\nexport default function BodyComponent({ children }) {\r\n  return <div className={s.container}>{children}</div>;\r\n}\r\n","import Dialogs from \"./Dialogs/Dialogs\";\r\nimport Header from \"./Header/Header\";\r\nimport BodyComponent from \"../../components/Layout/Body/BodyComponent\";\r\nimport { useEffect } from \"react\";\r\nimport { chatStore } from \"../../store/chat\";\r\n\r\nexport default function DialogsPage() {\r\n  useEffect(() => {\r\n    chatStore.getChats();\r\n  }, []);\r\n  return (\r\n    <>\r\n      <Header />\r\n      <BodyComponent>\r\n        <Dialogs />\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n}\r\n","export const BackIcon = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24px\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24px\"\r\n      fill=\"#000000\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n    </svg>\r\n  );\r\n};\r\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./Header.module.css\";\r\n\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useHistory } from \"react-router\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { dialogStore } from \"../../../store/dialog\";\r\nimport { BackIcon } from \"../../../components/Icons/BackIcon/BackIcon\";\r\n\r\nconst Header = observer(() => {\r\n  const history = useHistory();\r\n  const dialog = dialogStore.activeDialog;\r\n  if (!dialog) {\r\n    history.push(routes.dialogs);\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <HeaderComponent>\r\n        <NavLink to={routes.dialogs} className={styles.backButton}>\r\n          <BackIcon />\r\n        </NavLink>\r\n\r\n        <div className=\"appTitle text-mw\">{dialog.name}</div>\r\n\r\n        <div className={styles.userAvatar}>\r\n          <img src={dialog?.avatar} alt=\"\" />\r\n        </div>\r\n      </HeaderComponent>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Header;\r\n","export const EmojiIcon = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24px\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24px\"\r\n      fill=\"#383838\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z\" />\r\n    </svg>\r\n  );\r\n};\r\n","export const SendMessageIcon = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24px\"\r\n      fill=\"#000000\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M4.01 6.03l7.51 3.22-7.52-1 .01-2.22m7.5 8.72L4 17.97v-2.22l7.51-1M2.01 3L2 10l15 2-15 2 .01 7L23 12 2.01 3z\" />\r\n    </svg>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport s from \"../Messages.module.css\";\r\nimport Picker from \"emoji-picker-react\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { userStore } from \"../../../store/user\";\r\nimport { dialogStore } from \"../../../store/dialog\";\r\nimport { EmojiIcon } from \"../../../components/Icons/EmojiIcon/EmojiIcon\";\r\nimport { SendMessageIcon } from \"../../../components/Icons/SendMessageIcon/SendMessageIcon\";\r\n\r\nconst FormMessage = observer(() => {\r\n  const user = userStore.user;\r\n  const dialogId = dialogStore.dialogId;\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [emojiPopover, setEmojiPopover] = useState(false);\r\n\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    setNewMessage((e) => `${e} ${emojiObject.emoji}`);\r\n  };\r\n\r\n  const sendMessage = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const message = newMessage;\r\n    if (message?.trim().length) {\r\n      const myMessage = {\r\n        message: message,\r\n        uid: user.uid,\r\n        date: new Date(),\r\n        dialog_id: dialogId,\r\n        name: user.name,\r\n      };\r\n\r\n      setNewMessage(\"\");\r\n      dialogStore.sendMessage(myMessage);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.wrapper}>\r\n      <div className={s.formWrapper}>\r\n        <form\r\n          className={s.form}\r\n          onSubmit={(event) => {\r\n            sendMessage(event);\r\n            setEmojiPopover(false);\r\n          }}\r\n        >\r\n          <input\r\n            value={newMessage}\r\n            onChange={(e) => setNewMessage(e.target.value)}\r\n            className={s.input}\r\n            type=\"text\"\r\n            placeholder=\"Сообщение\"\r\n          />\r\n\r\n          <div\r\n            onClick={() => setEmojiPopover(!emojiPopover)}\r\n            className=\"emoji-button\"\r\n          >\r\n            <EmojiIcon />\r\n\r\n            {emojiPopover ? (\r\n              <div\r\n                onClick={(e) => e.stopPropagation()}\r\n                className=\"emoji-popover\"\r\n              >\r\n                <Picker\r\n                  pickerStyle={{\r\n                    boxShadow: \"none\",\r\n                  }}\r\n                  onEmojiClick={onEmojiClick}\r\n                />\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n\r\n          <button className={s.send}>\r\n            <SendMessageIcon />\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default FormMessage;\r\n","import s from \"../Messages.module.css\";\r\nimport getDate from \"../../../utils/getDate\";\r\n\r\nexport default function Message({ message, uid, userUid, date }) {\r\n  const messageDate = getDate(date);\r\n  return (\r\n    <div\r\n      className={s.messageContainer}\r\n      style={{\r\n        justifyContent: uid === userUid && \"flex-end\",\r\n        textAlign: uid === userUid && \"right\",\r\n      }}\r\n    >\r\n      <div className={s.message}>\r\n        <span className={s.messageText}>{message}</span>\r\n        {date ? <span className={s.messageDate}> {messageDate} </span> : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport s from \"../Messages.module.css\";\r\nimport Message from \"../Message/Message\";\r\nimport ScrollableFeed from \"react-scrollable-feed\";\r\nimport { userStore } from \"../../../store/user\";\r\nimport { dialogStore } from \"../../../store/dialog\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport useInnerHeight from \"../../../hooks/useInnerHeight\";\r\n\r\nconst MessagesWrapper = observer(() => {\r\n  const user = userStore.user;\r\n  const headerHeight = 168;\r\n  const { innerHeight } = useInnerHeight();\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        layout\r\n        className={s.messagesWrapper}\r\n        style={{ height: innerHeight - headerHeight + \"px\" }}\r\n      >\r\n        <ScrollableFeed className=\"x-hidden\">\r\n          {dialogStore.messages.map(({ message, uid, date }, i) => (\r\n            <Message\r\n              key={`message_key_${i}`}\r\n              message={message}\r\n              userUid={user.uid}\r\n              uid={uid}\r\n              date={date}\r\n            ></Message>\r\n          ))}\r\n        </ScrollableFeed>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default MessagesWrapper;\r\n","import { useLayoutEffect, useState } from \"react\";\r\n\r\nexport default function useInnerHeight() {\r\n  const [innerHeight, setInnerHeight] = useState(window.innerHeight);\r\n\r\n  useLayoutEffect(() => {\r\n    const listener = (e) => {\r\n      setInnerHeight(e.target.innerHeight);\r\n    };\r\n    window.addEventListener(\"resize\", listener);\r\n    return () => window.removeEventListener(\"resize\", listener);\r\n  }, []);\r\n\r\n  return { innerHeight };\r\n}\r\n","import Header from \"./Header/Header\";\r\nimport BodyComponent from \"../../components/Layout/Body/BodyComponent\";\r\nimport FormMessage from \"./FormMessage/FormMessage\";\r\nimport MessagesWrapper from \"./MessagesWrapper/MessagesWrapper\";\r\nimport { useEffect } from \"react\";\r\nimport { db } from \"../../firebase\";\r\nimport { doc, onSnapshot } from \"@firebase/firestore\";\r\nimport Preloader from \"../../components/Preloader/Preloader\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { dialogStore } from \"../../store/dialog\";\r\n\r\nconst Messages = observer(() => {\r\n  useEffect(() => {\r\n    dialogStore.createDialogId();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!dialogStore.dialogId) return;\r\n\r\n    const unsub = onSnapshot(\r\n      doc(db, \"dialogs\", dialogStore.dialogId),\r\n      (doc) => {\r\n        const currentData = doc.data();\r\n\r\n        if (currentData) {\r\n          if (currentData.messages.length > 0) {\r\n            dialogStore.setMessages(currentData.messages);\r\n          }\r\n        } else {\r\n          dialogStore.setMessages([]);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      unsub();\r\n      dialogStore.setAll();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n\r\n      <BodyComponent>\r\n        {dialogStore.loading ? <Preloader /> : <MessagesWrapper />}\r\n\r\n        <FormMessage />\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n});\r\nexport default Messages;\r\n","import styles from \"./Header.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useRef } from \"react\";\r\nimport { BackIcon } from \"../../../components/Icons/BackIcon/BackIcon\";\r\n\r\nfunction Header({ searchUsers }) {\r\n  const searchRef = useRef();\r\n\r\n  const onChange = () => {\r\n    searchUsers(searchRef);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <HeaderComponent>\r\n        <NavLink to={routes.dialogs} className={styles.backButton}>\r\n          <BackIcon />\r\n        </NavLink>\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Поиск\"\r\n          className={styles.input}\r\n          onChange={onChange}\r\n          ref={searchRef}\r\n        />\r\n      </HeaderComponent>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../../routes/routes\";\r\nimport { dialogStore } from \"../../../../store/dialog\";\r\nimport styles from \"./LastItem.module.css\";\r\n\r\nfunction LastItem({ user }) {\r\n  const { name, uid, email, avatar } = user;\r\n\r\n  return (\r\n    <NavLink\r\n      to={routes.messages + `/${user.uid}`}\r\n      onClick={() => dialogStore.setActiveDialog({ email, uid, name, avatar })}\r\n    >\r\n      <div className={styles.container}>\r\n        <div className={styles.avatar}>\r\n          <img src={user.avatar ? user.avatar : null} alt=\"\" />\r\n        </div>\r\n        <div className={styles.info}>\r\n          <div className={`${styles.title} text-mw`}> {user.name} </div>\r\n          <div className={`${styles.date} text-mw`}> {user.email} </div>\r\n        </div>\r\n      </div>\r\n    </NavLink>\r\n  );\r\n}\r\nexport default LastItem;\r\n","import LastItem from \"./LastItem/LastItem\";\r\n\r\nfunction LastList({ users }) {\r\n  return (\r\n    <>\r\n      {users.length !== 0 ? (\r\n        users.map((user) => <LastItem key={user.uid} user={user} />)\r\n      ) : (\r\n        <div className=\"not-dialogs\">Пользователей не найдено</div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\nexport default LastList;\r\n","import { observer } from \"mobx-react-lite\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { chatStore } from \"../../store/chat\";\r\nimport Header from \"./Header/Header\";\r\nimport LastList from \"./LastList/LastList\";\r\nimport BodyComponent from \"../../components/Layout/Body/BodyComponent\";\r\nimport { userStore } from \"../../store/user\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst SearchPage = observer(() => {\r\n  const history = useHistory();\r\n\r\n  if (!userStore.user || chatStore.users.length === 0) {\r\n    history.push(\"/\");\r\n  }\r\n\r\n  const searchUsers = useCallback(async (searchRef) => {\r\n    const searchInput = searchRef.current.value;\r\n    chatStore.searchUsers(searchInput);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Header searchUsers={searchUsers} />\r\n      <BodyComponent>\r\n        <LastList users={chatStore.searchedUsers} />\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default SearchPage;\r\n","import styles from \"./Header.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport HeaderComponent from \"../../../components/Layout/Header/HeaderComponent\";\r\nimport { BackIcon } from \"../../../components/Icons/BackIcon/BackIcon\";\r\nimport { SearchIcon } from \"../../../components/Icons/SearchIcon/SearchIcon\";\r\n\r\nexport default function Header() {\r\n  return (\r\n    <HeaderComponent>\r\n      <NavLink to=\"/im\" className={styles.backButton}>\r\n        <BackIcon />\r\n      </NavLink>\r\n\r\n      <div>Настройки</div>\r\n\r\n      <NavLink to=\"/search\" className={styles.searchButton}>\r\n        <SearchIcon />\r\n      </NavLink>\r\n    </HeaderComponent>\r\n  );\r\n}\r\n","import s from \"./EditName.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useRef, useState } from \"react\";\r\nimport { userStore } from \"../../../store/user\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\n\r\nexport default function EditName({ setModal }) {\r\n  return ReactDOM.createPortal(<Modal setModal={setModal} />, document.body);\r\n}\r\n\r\nfunction Modal({ setModal }) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const newName = useRef(null);\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setIsLoading(true);\r\n    const myName = newName.current.value.trim();\r\n    if (myName.length > 0) {\r\n      await userStore.editUserName(myName);\r\n    }\r\n    setIsLoading(false);\r\n    setModal(false);\r\n  };\r\n\r\n  const onClose = (event) => {\r\n    event.stopPropagation();\r\n    if (event.target.dataset.close === \"close\" && !isLoading) {\r\n      setModal(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.modal} data-close=\"close\" onClick={onClose}>\r\n      <motion.div initial={{ y: \"100%\" }} animate={{ y: \"0%\" }}>\r\n        <div className={s.modalContent}>\r\n          <form onSubmit={onSubmit} className={s.form}>\r\n            <input\r\n              autoFocus\r\n              ref={newName}\r\n              placeholder=\"Введите имя\"\r\n              type=\"text\"\r\n            />\r\n            <button disabled={isLoading}>\r\n              {isLoading ? \"Загрузка..\" : \"Сохранить\"}\r\n            </button>\r\n          </form>\r\n\r\n          <button onClick={onClose} data-close=\"close\" className={s.close}>\r\n            Отменить\r\n          </button>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n","import s from \"./../EditName/EditName.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport { useState } from \"react\";\r\nimport { userStore } from \"../../../store/user\";\r\n\r\nexport default function EditAvatar({ setModal }) {\r\n  return ReactDOM.createPortal(<Modal setModal={setModal} />, document.body);\r\n}\r\n\r\nfunction Modal({ setModal }) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const user = userStore.user;\r\n\r\n  const onChange = async (event) => {\r\n    event.preventDefault();\r\n    await getAvatarUrl(event.target.files[0]);\r\n  };\r\n\r\n  const closeModalAndDisableLoading = () => {\r\n    setIsLoading(false);\r\n    setModal(false);\r\n  };\r\n\r\n  const getAvatarUrl = async (file) => {\r\n    setIsLoading(true);\r\n\r\n    if (file.size > 1024 * 1024 * 10) {\r\n      alert(\"Размер изображения слишком большой\");\r\n      closeModalAndDisableLoading();\r\n    } else if (\r\n      file.type !== \"image/png\" &&\r\n      file.type !== \"image/jpg\" &&\r\n      file.type !== \"image/jpeg\"\r\n    ) {\r\n      alert(\"Можно загружать только изображения (png/jpg/jpeg)\");\r\n      closeModalAndDisableLoading();\r\n    } else {\r\n      const avatarName = user.uid + \"_avatar\";\r\n      const storage = getStorage();\r\n      const storageRef = ref(storage, avatarName);\r\n\r\n      await uploadBytes(storageRef, file).then(() => {\r\n        getDownloadURL(ref(storage, avatarName))\r\n          .then(async (url) => {\r\n            const avatarUrl = url;\r\n            await userStore.editUserAvatar(avatarUrl);\r\n          })\r\n          .catch((error) => {\r\n            alert(\"Произошла ошибка при обновлении аватара. \" + error.message);\r\n          })\r\n          .finally(() => {\r\n            closeModalAndDisableLoading();\r\n          });\r\n      });\r\n    }\r\n  };\r\n\r\n  const onClose = (event) => {\r\n    event.stopPropagation();\r\n    if (event.target.dataset.close === \"close\" && !isLoading) {\r\n      setModal(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.modal} data-close=\"close\" onClick={onClose}>\r\n      <motion.div initial={{ y: \"100%\" }} animate={{ y: \"0%\" }}>\r\n        <div className={s.modalContent}>\r\n          <form onChange={onChange} className={s.form}>\r\n            {!isLoading && (\r\n              <>\r\n                <label className={s.labelAvatar} htmlFor=\"avatar\">\r\n                  Выберите файл\r\n                </label>\r\n\r\n                <input className={s.inputAvatar} type=\"file\" id=\"avatar\" />\r\n              </>\r\n            )}\r\n\r\n            {isLoading && <div className={s.labelAvatar}>Загрузка...</div>}\r\n          </form>\r\n\r\n          {!isLoading && (\r\n            <button onClick={onClose} data-close=\"close\" className={s.close}>\r\n              Отменить\r\n            </button>\r\n          )}\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n","import s from \"./Alert.module.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { motion } from \"framer-motion/dist/framer-motion\";\r\n\r\nexport default function Alert(props) {\r\n  return ReactDOM.createPortal(<AlertComponent {...props} />, document.body);\r\n}\r\n\r\nconst ALERT_SHOW_TIME = 4000;\r\n\r\nfunction AlertComponent({ message, closeAlert }) {\r\n  const [isClosed, setIsClosed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const showTimeout = setTimeout(() => {\r\n      setIsClosed(true);\r\n    }, ALERT_SHOW_TIME);\r\n\r\n    return () => clearTimeout(showTimeout);\r\n  }, [closeAlert]);\r\n\r\n  return (\r\n    <div className={s.wrapper}>\r\n      <motion.div\r\n        initial={{ opacity: 0 }}\r\n        animate={!isClosed ? { opacity: 1 } : \"\"}\r\n        transition={{ duration: 0.2 }}\r\n      >\r\n        <div className={s.alert}>\r\n          <span className={s.container}>{message}</span>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n","export const AvatarIcon = () => {\r\n  return (\r\n    <svg\r\n      aria-hidden=\"true\"\r\n      focusable=\"false\"\r\n      data-prefix=\"fas\"\r\n      data-icon=\"user-astronaut\"\r\n      role=\"img\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 448 512\"\r\n    >\r\n      <path\r\n        fill=\"currentColor\"\r\n        d=\"M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z\"\r\n      ></path>\r\n    </svg>\r\n  );\r\n};\r\n","export const EditNameIcon = () => {\r\n  return (\r\n    <svg\r\n      aria-hidden=\"true\"\r\n      focusable=\"false\"\r\n      data-prefix=\"far\"\r\n      data-icon=\"edit\"\r\n      role=\"img\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 576 512\"\r\n    >\r\n      <path\r\n        fill=\"currentColor\"\r\n        d=\"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z\"\r\n      ></path>\r\n    </svg>\r\n  );\r\n};\r\n","export const InviteIcon = () => {\r\n  return (\r\n    <svg\r\n      aria-hidden=\"true\"\r\n      focusable=\"false\"\r\n      data-prefix=\"fas\"\r\n      data-icon=\"user-friends\"\r\n      role=\"img\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 640 512\"\r\n    >\r\n      <path\r\n        fill=\"currentColor\"\r\n        d=\"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z\"\r\n      ></path>\r\n    </svg>\r\n  );\r\n};\r\n","export const LogoutIcon = () => {\r\n  return (\r\n    <svg\r\n      aria-hidden=\"true\"\r\n      focusable=\"false\"\r\n      data-prefix=\"fas\"\r\n      data-icon=\"sign-out-alt\"\r\n      role=\"img\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 512 512\"\r\n    >\r\n      <path\r\n        fill=\"currentColor\"\r\n        d=\"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z\"\r\n      ></path>\r\n    </svg>\r\n  );\r\n};\r\n","export const InformationIcon = () => {\r\n  return (\r\n    <svg\r\n      aria-hidden=\"true\"\r\n      focusable=\"false\"\r\n      data-prefix=\"fas\"\r\n      data-icon=\"question\"\r\n      role=\"img\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 384 512\"\r\n    >\r\n      <path\r\n        fill=\"currentColor\"\r\n        d=\"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z\"\r\n      ></path>\r\n    </svg>\r\n  );\r\n};\r\n","import { useHistory } from \"react-router\";\r\nimport s from \"./SettingsContainer.module.css\";\r\nimport { useEffect } from \"react\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useState } from \"react\";\r\nimport EditName from \"../../../components/Modals/EditName/EditName\";\r\nimport EditAvatar from \"../../../components/Modals/EditAvatar/EditAvatar\";\r\nimport Alert from \"../../../components/Alert/Alert\";\r\nimport { userStore } from \"../../../store/user\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { AvatarIcon } from \"../../../components/Icons/AvatarIcon/AvatarIcon\";\r\nimport { EditNameIcon } from \"../../../components/Icons/EditNameIcon/EditNameIcon\";\r\nimport { InviteIcon } from \"../../../components/Icons/InviteIcon/InviteIcon\";\r\nimport { LogoutIcon } from \"../../../components/Icons/LogoutIcon/LogoutIcon\";\r\nimport { InformationIcon } from \"../../../components/Icons/InformationIcon/InformationIcon\";\r\n\r\nconst SettingsContainer = observer(() => {\r\n  const history = useHistory();\r\n  const user = userStore.user;\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      history.replace(\"/\");\r\n    }\r\n  }, [history, user]);\r\n\r\n  const [editNameModal, setEditNameModal] = useState(false);\r\n  const [editAvatarModal, setEditAvatarModal] = useState(false);\r\n  const [showAlert, setAlert] = useState(false);\r\n  const [alertText, setAlertText] = useState(null);\r\n\r\n  const logout = () => {\r\n    localStorage.setItem(\"user\", null);\r\n    userStore.setUser(null);\r\n    history.push(routes.login);\r\n  };\r\n\r\n  const showEditNameModal = () => {\r\n    setEditNameModal(true);\r\n  };\r\n\r\n  const showEditAvatarModal = () => {\r\n    setEditAvatarModal(true);\r\n  };\r\n\r\n  const saveToBuffer = async () => {\r\n    const copyText =\r\n      \"Привет, я использую Memssenger для общения с друзьями. Присоединяйся по ссылке: https://ozcnii.github.io/memssenger\";\r\n    try {\r\n      await navigator.clipboard.writeText(copyText);\r\n      const alertText = \"Пригласительное сообщение скопировано в буфер обмена\";\r\n      setAlertText(alertText);\r\n      setAlert(true);\r\n    } catch (e) {\r\n      const alertText =\r\n        \"Произошла ошибка во время копирования пригласительного сообщения\";\r\n      setAlertText(alertText);\r\n      setAlert(true);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      {editNameModal && <EditName setModal={setEditNameModal} />}\r\n\r\n      {editAvatarModal && <EditAvatar setModal={setEditAvatarModal} />}\r\n      {showAlert && <Alert message={alertText} closeAlert={setAlert} />}\r\n\r\n      {user ? (\r\n        <>\r\n          <div className={s.main}>\r\n            <div className={s.top}>\r\n              <div className={s.avatar}>\r\n                {user?.avatar && <img src={user.avatar} alt=\"\" />}\r\n              </div>\r\n\r\n              <div className={s.info}>\r\n                <div className={`${s.userName} text-mw-100`}>{user.name} </div>\r\n                <div className=\"text-mw-100\">{user.email}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className={s.settings}>\r\n            <div className={s.edit} onClick={showEditAvatarModal}>\r\n              <div className={s.icon}>\r\n                <AvatarIcon />\r\n              </div>\r\n              <span>Изменить аватар </span>\r\n            </div>\r\n\r\n            <div className={s.edit} onClick={showEditNameModal}>\r\n              <div className={s.icon}>\r\n                <EditNameIcon />\r\n              </div>\r\n              <span>Изменить имя</span>\r\n            </div>\r\n\r\n            <a\r\n              href=\"https://github.com/ttenapp/memssenger\"\r\n              target=\"blank\"\r\n              className={s.edit}\r\n            >\r\n              <div className={s.icon}>\r\n                <InformationIcon />\r\n              </div>\r\n              <span>Информация</span>\r\n            </a>\r\n\r\n            <div className={s.edit} onClick={saveToBuffer}>\r\n              <div className={s.icon}>\r\n                <InviteIcon />\r\n              </div>\r\n              <span>Пригласить друзей</span>\r\n            </div>\r\n\r\n            <div className={s.edit + \" \" + s.last} onClick={logout}>\r\n              <div className={s.icon}>\r\n                <LogoutIcon />\r\n              </div>\r\n              <span>Выход</span>\r\n            </div>\r\n          </div>\r\n        </>\r\n      ) : null}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default SettingsContainer;\r\n","import Header from \"./Header/Header\";\r\nimport SettingsContainer from \"./SettingsContainer/SettingsContainer\";\r\nimport BodyComponent from \"../../components/Layout/Body/BodyComponent\";\r\n\r\nexport default function SettingsPage() {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <BodyComponent>\r\n        <SettingsContainer />\r\n      </BodyComponent>\r\n    </>\r\n  );\r\n}\r\n","import s from \"./LoginPage.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../routes/routes\";\r\nimport { useRef, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Alert from \"../../components/Alert/Alert\";\r\nimport { userStore } from \"../../store/user\";\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nconst LoginPage = observer(() => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [alertText, setAlertText] = useState(null);\r\n\r\n  const history = useHistory();\r\n  const email = useRef(null);\r\n  const password = useRef(null);\r\n\r\n  const login = async (event) => {\r\n    event.preventDefault();\r\n    const myEmail = email.current.value.trim();\r\n    const myPassword = password.current.value.trim();\r\n\r\n    if (myEmail && myPassword) {\r\n      setIsLoading(true);\r\n      try {\r\n        const user = await userStore.login(myEmail, myPassword);\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n        history.push(routes.dialogs);\r\n      } catch (error) {\r\n        setAlertText(error.message);\r\n        setShowAlert(true);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    } else {\r\n      setAlertText(\"Все поля должны быыть заполнены\");\r\n      setShowAlert(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userStore.user) {\r\n      history.push(routes.dialogs);\r\n    }\r\n  }, [history]);\r\n\r\n  return (\r\n    <>\r\n      {showAlert && <Alert message={alertText} closeAlert={setShowAlert} />}\r\n\r\n      <div className={s.container}>\r\n        <div className={s.title}>Вход</div>\r\n\r\n        <form onSubmit={login} className={s.form}>\r\n          <input\r\n            ref={email}\r\n            type=\"email\"\r\n            placeholder=\"Эл. адрес\"\r\n            className={s.login}\r\n            required\r\n          />\r\n\r\n          <input\r\n            ref={password}\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            className={s.password}\r\n            required\r\n          />\r\n\r\n          <button type=\"submit\" className={s.submit}>\r\n            {isLoading ? \"Загрузка...\" : \"Войти\"}\r\n          </button>\r\n\r\n          <div>\r\n            <NavLink to={routes.registr} className={s.registr}>\r\n              Регистрация\r\n            </NavLink>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default LoginPage;\r\n","import s from \"../LoginPage.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../../routes/routes\";\r\nimport { useRef, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Alert from \"../../../components/Alert/Alert\";\r\nimport { userStore } from \"../../../store/user\";\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nconst RegistrationPage = observer(() => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [alertText, setAlertText] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const email = useRef(null);\r\n  const password = useRef(null);\r\n  const confirmPassword = useRef(null);\r\n  const userName = useRef(null);\r\n\r\n  const register = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const myEmail = email.current.value.trim();\r\n    const myPassword = password.current.value.trim();\r\n    const myConfirmPassword = confirmPassword.current.value.trim();\r\n    const myName = userName.current.value.trim();\r\n\r\n    if (\r\n      myEmail &&\r\n      myPassword &&\r\n      myName &&\r\n      myConfirmPassword &&\r\n      myPassword === myConfirmPassword\r\n    ) {\r\n      try {\r\n        setIsLoading(true);\r\n        const newUser = await userStore.register(myEmail, myPassword, myName);\r\n        if (newUser) {\r\n          localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n        }\r\n        history.push(\"/chat\");\r\n      } catch (error) {\r\n        setAlertText(error.message);\r\n        setShowAlert(true);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    } else if (myPassword !== myConfirmPassword) {\r\n      setAlertText(\"Пароли не совпадают\");\r\n      setShowAlert(true);\r\n    } else {\r\n      setAlertText(\"Все поля должны быыть заполнены\");\r\n      setShowAlert(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userStore.user) {\r\n      history.push(routes.dialogs);\r\n    }\r\n  }, [history]);\r\n\r\n  return (\r\n    <>\r\n      {showAlert && <Alert message={alertText} closeAlert={setShowAlert} />}\r\n\r\n      <div className={s.container}>\r\n        <div className={s.title}>Регистрация</div>\r\n\r\n        <form onSubmit={register} className={s.form}>\r\n          <input\r\n            type=\"email\"\r\n            ref={email}\r\n            placeholder=\"Эл. адрес\"\r\n            className={s.login}\r\n            required\r\n          />\r\n\r\n          <input\r\n            type=\"text\"\r\n            ref={password}\r\n            placeholder=\"Пароль\"\r\n            className={s.password}\r\n            required\r\n          />\r\n\r\n          <input\r\n            type=\"text\"\r\n            ref={confirmPassword}\r\n            placeholder=\"Подтвердите пароль\"\r\n            className={s.passwordConfirm}\r\n            required\r\n          />\r\n\r\n          <input\r\n            type=\"text\"\r\n            ref={userName}\r\n            placeholder=\"Введите ваше имя\"\r\n            className={s.passwordConfirm}\r\n            required\r\n          />\r\n\r\n          <button type=\"submit\" className={s.submit}>\r\n            {isLoading ? \"Загрузка...\" : \"Регистрация\"}\r\n          </button>\r\n\r\n          <div>\r\n            <NavLink to={routes.login} className={s.logIn}>\r\n              Войти\r\n            </NavLink>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default RegistrationPage;\r\n","import { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\r\nimport routes from \"./routes/routes\";\r\nimport DialogsPage from \"./pages/DialogsPage\";\r\nimport Messages from \"./pages/MessagePage\";\r\nimport SearchPage from \"./pages/SearchPage\";\r\nimport SettingsPage from \"./pages/SettingsPage\";\r\nimport LoginPage from \"./pages/LoginPage\";\r\nimport RegistrationPage from \"./pages/LoginPage/RegistrationPage/RegistrationPage\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { userStore } from \"./store/user\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Preloader from \"./components/Preloader/Preloader\";\r\n\r\nconst App = observer(() => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n      if (user && user.uid) {\r\n        await userStore.getMe(user?.uid);\r\n      } else {\r\n        history.push(\"/\");\r\n      }\r\n\r\n      setIsLoading(false);\r\n    })();\r\n  }, [history]);\r\n\r\n  if (isLoading) {\r\n    return <Preloader />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"header-background\"></div>\r\n\r\n      <Switch>\r\n        <Route exact path=\"/\" render={() => <Redirect to={routes.login} />} />\r\n        <Route path={routes.dialogs} render={() => <DialogsPage />} />\r\n\r\n        <Route path={routes.messages + \"/:id\"} render={() => <Messages />} />\r\n        <Route path={routes.settings} render={() => <SettingsPage />} />\r\n        <Route path={routes.search} render={() => <SearchPage />} />\r\n\r\n        <Route path={routes.login} render={() => <LoginPage />} />\r\n        <Route path={routes.registr} render={() => <RegistrationPage />} />\r\n\r\n        <Route path=\"*\" render={() => <Redirect to={routes.dialogs} />} />\r\n      </Switch>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default App;\r\n","import { StrictMode } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n  <StrictMode>\r\n    <HashRouter>\r\n      <App />\r\n    </HashRouter>\r\n  </StrictMode>,\r\n  rootElement\r\n);\r\n"],"sourceRoot":""}